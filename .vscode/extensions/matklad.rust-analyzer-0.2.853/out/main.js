var kR=Object.create;var Eo=Object.defineProperty,qR=Object.defineProperties,OR=Object.getOwnPropertyDescriptor,AR=Object.getOwnPropertyDescriptors,FR=Object.getOwnPropertyNames,sa=Object.getOwnPropertySymbols,IR=Object.getPrototypeOf,Yc=Object.prototype.hasOwnProperty,af=Object.prototype.propertyIsEnumerable;var cf=(r,e,t)=>e in r?Eo(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Xn=(r,e)=>{for(var t in e||(e={}))Yc.call(e,t)&&cf(r,t,e[t]);if(sa)for(var t of sa(e))af.call(e,t)&&cf(r,t,e[t]);return r},uf=(r,e)=>qR(r,AR(e)),lf=r=>Eo(r,"__esModule",{value:!0});var df=(r,e)=>{var t={};for(var n in r)Yc.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&sa)for(var n of sa(r))e.indexOf(n)<0&&af.call(r,n)&&(t[n]=r[n]);return t};var xo=(r,e)=>()=>(r&&(e=r(r=0)),e);var F=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),ff=(r,e)=>{lf(r);for(var t in e)Eo(r,t,{get:e[t],enumerable:!0})},LR=(r,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of FR(e))!Yc.call(r,n)&&n!=="default"&&Eo(r,n,{get:()=>e[n],enumerable:!(t=OR(e,n))||t.enumerable});return r},oe=r=>LR(lf(Eo(r!=null?kR(IR(r)):{},"default",r&&r.__esModule&&"default"in r?{get:()=>r.default,enumerable:!0}:{value:r,enumerable:!0})),r);var hf=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)};var Le=(r,e,t)=>(hf(r,e,"read from private field"),t?t.call(r):e.get(r)),Rr=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},rr=(r,e,t,n)=>(hf(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t);var ko=F((B0,pf)=>{var NR="2.0.0",MR=256,jR=Number.MAX_SAFE_INTEGER||9007199254740991,$R=16;pf.exports={SEMVER_SPEC_VERSION:NR,MAX_LENGTH:MR,MAX_SAFE_INTEGER:jR,MAX_SAFE_COMPONENT_LENGTH:$R}});var qo=F((U0,gf)=>{var WR=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...r)=>console.error("SEMVER",...r):()=>{};gf.exports=WR});var Qn=F((Fn,mf)=>{var{MAX_SAFE_COMPONENT_LENGTH:Xc}=ko(),HR=qo();Fn=mf.exports={};var zR=Fn.re=[],Z=Fn.src=[],ee=Fn.t={},BR=0,me=(r,e,t)=>{let n=BR++;HR(n,e),ee[r]=n,Z[n]=e,zR[n]=new RegExp(e,t?"g":void 0)};me("NUMERICIDENTIFIER","0|[1-9]\\d*");me("NUMERICIDENTIFIERLOOSE","[0-9]+");me("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");me("MAINVERSION",`(${Z[ee.NUMERICIDENTIFIER]})\\.(${Z[ee.NUMERICIDENTIFIER]})\\.(${Z[ee.NUMERICIDENTIFIER]})`);me("MAINVERSIONLOOSE",`(${Z[ee.NUMERICIDENTIFIERLOOSE]})\\.(${Z[ee.NUMERICIDENTIFIERLOOSE]})\\.(${Z[ee.NUMERICIDENTIFIERLOOSE]})`);me("PRERELEASEIDENTIFIER",`(?:${Z[ee.NUMERICIDENTIFIER]}|${Z[ee.NONNUMERICIDENTIFIER]})`);me("PRERELEASEIDENTIFIERLOOSE",`(?:${Z[ee.NUMERICIDENTIFIERLOOSE]}|${Z[ee.NONNUMERICIDENTIFIER]})`);me("PRERELEASE",`(?:-(${Z[ee.PRERELEASEIDENTIFIER]}(?:\\.${Z[ee.PRERELEASEIDENTIFIER]})*))`);me("PRERELEASELOOSE",`(?:-?(${Z[ee.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${Z[ee.PRERELEASEIDENTIFIERLOOSE]})*))`);me("BUILDIDENTIFIER","[0-9A-Za-z-]+");me("BUILD",`(?:\\+(${Z[ee.BUILDIDENTIFIER]}(?:\\.${Z[ee.BUILDIDENTIFIER]})*))`);me("FULLPLAIN",`v?${Z[ee.MAINVERSION]}${Z[ee.PRERELEASE]}?${Z[ee.BUILD]}?`);me("FULL",`^${Z[ee.FULLPLAIN]}$`);me("LOOSEPLAIN",`[v=\\s]*${Z[ee.MAINVERSIONLOOSE]}${Z[ee.PRERELEASELOOSE]}?${Z[ee.BUILD]}?`);me("LOOSE",`^${Z[ee.LOOSEPLAIN]}$`);me("GTLT","((?:<|>)?=?)");me("XRANGEIDENTIFIERLOOSE",`${Z[ee.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);me("XRANGEIDENTIFIER",`${Z[ee.NUMERICIDENTIFIER]}|x|X|\\*`);me("XRANGEPLAIN",`[v=\\s]*(${Z[ee.XRANGEIDENTIFIER]})(?:\\.(${Z[ee.XRANGEIDENTIFIER]})(?:\\.(${Z[ee.XRANGEIDENTIFIER]})(?:${Z[ee.PRERELEASE]})?${Z[ee.BUILD]}?)?)?`);me("XRANGEPLAINLOOSE",`[v=\\s]*(${Z[ee.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Z[ee.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Z[ee.XRANGEIDENTIFIERLOOSE]})(?:${Z[ee.PRERELEASELOOSE]})?${Z[ee.BUILD]}?)?)?`);me("XRANGE",`^${Z[ee.GTLT]}\\s*${Z[ee.XRANGEPLAIN]}$`);me("XRANGELOOSE",`^${Z[ee.GTLT]}\\s*${Z[ee.XRANGEPLAINLOOSE]}$`);me("COERCE",`(^|[^\\d])(\\d{1,${Xc}})(?:\\.(\\d{1,${Xc}}))?(?:\\.(\\d{1,${Xc}}))?(?:$|[^\\d])`);me("COERCERTL",Z[ee.COERCE],!0);me("LONETILDE","(?:~>?)");me("TILDETRIM",`(\\s*)${Z[ee.LONETILDE]}\\s+`,!0);Fn.tildeTrimReplace="$1~";me("TILDE",`^${Z[ee.LONETILDE]}${Z[ee.XRANGEPLAIN]}$`);me("TILDELOOSE",`^${Z[ee.LONETILDE]}${Z[ee.XRANGEPLAINLOOSE]}$`);me("LONECARET","(?:\\^)");me("CARETTRIM",`(\\s*)${Z[ee.LONECARET]}\\s+`,!0);Fn.caretTrimReplace="$1^";me("CARET",`^${Z[ee.LONECARET]}${Z[ee.XRANGEPLAIN]}$`);me("CARETLOOSE",`^${Z[ee.LONECARET]}${Z[ee.XRANGEPLAINLOOSE]}$`);me("COMPARATORLOOSE",`^${Z[ee.GTLT]}\\s*(${Z[ee.LOOSEPLAIN]})$|^$`);me("COMPARATOR",`^${Z[ee.GTLT]}\\s*(${Z[ee.FULLPLAIN]})$|^$`);me("COMPARATORTRIM",`(\\s*)${Z[ee.GTLT]}\\s*(${Z[ee.LOOSEPLAIN]}|${Z[ee.XRANGEPLAIN]})`,!0);Fn.comparatorTrimReplace="$1$2$3";me("HYPHENRANGE",`^\\s*(${Z[ee.XRANGEPLAIN]})\\s+-\\s+(${Z[ee.XRANGEPLAIN]})\\s*$`);me("HYPHENRANGELOOSE",`^\\s*(${Z[ee.XRANGEPLAINLOOSE]})\\s+-\\s+(${Z[ee.XRANGEPLAINLOOSE]})\\s*$`);me("STAR","(<|>)?=?\\s*\\*");me("GTE0","^\\s*>=\\s*0.0.0\\s*$");me("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")});var Oo=F((K0,vf)=>{var UR=["includePrerelease","loose","rtl"],KR=r=>r?typeof r!="object"?{loose:!0}:UR.filter(e=>r[e]).reduce((e,t)=>(e[t]=!0,e),{}):{};vf.exports=KR});var aa=F((G0,wf)=>{var yf=/^[0-9]+$/,bf=(r,e)=>{let t=yf.test(r),n=yf.test(e);return t&&n&&(r=+r,e=+e),r===e?0:t&&!n?-1:n&&!t?1:r<e?-1:1},GR=(r,e)=>bf(e,r);wf.exports={compareIdentifiers:bf,rcompareIdentifiers:GR}});var It=F((V0,Sf)=>{var ca=qo(),{MAX_LENGTH:Cf,MAX_SAFE_INTEGER:ua}=ko(),{re:Rf,t:_f}=Qn(),VR=Oo(),{compareIdentifiers:Ao}=aa(),_r=class{constructor(e,t){if(t=VR(t),e instanceof _r){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${e}`);if(e.length>Cf)throw new TypeError(`version is longer than ${Cf} characters`);ca("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let n=e.trim().match(t.loose?Rf[_f.LOOSE]:Rf[_f.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>ua||this.major<0)throw new TypeError("Invalid major version");if(this.minor>ua||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>ua||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let s=+i;if(s>=0&&s<ua)return s}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(ca("SemVer.compare",this.version,this.options,e),!(e instanceof _r)){if(typeof e=="string"&&e===this.version)return 0;e=new _r(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof _r||(e=new _r(e,this.options)),Ao(this.major,e.major)||Ao(this.minor,e.minor)||Ao(this.patch,e.patch)}comparePre(e){if(e instanceof _r||(e=new _r(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let n=this.prerelease[t],i=e.prerelease[t];if(ca("prerelease compare",t,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Ao(n,i)}while(++t)}compareBuild(e){e instanceof _r||(e=new _r(e,this.options));let t=0;do{let n=this.build[t],i=e.build[t];if(ca("prerelease compare",t,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Ao(n,i)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t),this.inc("pre",t);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let n=this.prerelease.length;for(;--n>=0;)typeof this.prerelease[n]=="number"&&(this.prerelease[n]++,n=-2);n===-1&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}};Sf.exports=_r});var Jn=F((Y0,Ef)=>{var{MAX_LENGTH:YR}=ko(),{re:Tf,t:Pf}=Qn(),Df=It(),XR=Oo(),QR=(r,e)=>{if(e=XR(e),r instanceof Df)return r;if(typeof r!="string"||r.length>YR||!(e.loose?Tf[Pf.LOOSE]:Tf[Pf.FULL]).test(r))return null;try{return new Df(r,e)}catch{return null}};Ef.exports=QR});var kf=F((X0,xf)=>{var JR=Jn(),ZR=(r,e)=>{let t=JR(r,e);return t?t.version:null};xf.exports=ZR});var Of=F((Q0,qf)=>{var e_=Jn(),t_=(r,e)=>{let t=e_(r.trim().replace(/^[=v]+/,""),e);return t?t.version:null};qf.exports=t_});var Ff=F((J0,Af)=>{var r_=It(),n_=(r,e,t,n)=>{typeof t=="string"&&(n=t,t=void 0);try{return new r_(r,t).inc(e,n).version}catch{return null}};Af.exports=n_});var Sr=F((Z0,Lf)=>{var If=It(),i_=(r,e,t)=>new If(r,t).compare(new If(e,t));Lf.exports=i_});var la=F((eq,Nf)=>{var o_=Sr(),s_=(r,e,t)=>o_(r,e,t)===0;Nf.exports=s_});var $f=F((tq,jf)=>{var Mf=Jn(),a_=la(),c_=(r,e)=>{if(a_(r,e))return null;{let t=Mf(r),n=Mf(e),i=t.prerelease.length||n.prerelease.length,s=i?"pre":"",a=i?"prerelease":"";for(let l in t)if((l==="major"||l==="minor"||l==="patch")&&t[l]!==n[l])return s+l;return a}};jf.exports=c_});var Hf=F((rq,Wf)=>{var u_=It(),l_=(r,e)=>new u_(r,e).major;Wf.exports=l_});var Bf=F((nq,zf)=>{var d_=It(),f_=(r,e)=>new d_(r,e).minor;zf.exports=f_});var Kf=F((iq,Uf)=>{var h_=It(),p_=(r,e)=>new h_(r,e).patch;Uf.exports=p_});var Vf=F((oq,Gf)=>{var g_=Jn(),m_=(r,e)=>{let t=g_(r,e);return t&&t.prerelease.length?t.prerelease:null};Gf.exports=m_});var Xf=F((sq,Yf)=>{var v_=Sr(),y_=(r,e,t)=>v_(e,r,t);Yf.exports=y_});var Jf=F((aq,Qf)=>{var b_=Sr(),w_=(r,e)=>b_(r,e,!0);Qf.exports=w_});var da=F((cq,eh)=>{var Zf=It(),C_=(r,e,t)=>{let n=new Zf(r,t),i=new Zf(e,t);return n.compare(i)||n.compareBuild(i)};eh.exports=C_});var rh=F((uq,th)=>{var R_=da(),__=(r,e)=>r.sort((t,n)=>R_(t,n,e));th.exports=__});var ih=F((lq,nh)=>{var S_=da(),T_=(r,e)=>r.sort((t,n)=>S_(n,t,e));nh.exports=T_});var Fo=F((dq,oh)=>{var P_=Sr(),D_=(r,e,t)=>P_(r,e,t)>0;oh.exports=D_});var fa=F((fq,sh)=>{var E_=Sr(),x_=(r,e,t)=>E_(r,e,t)<0;sh.exports=x_});var Qc=F((hq,ah)=>{var k_=Sr(),q_=(r,e,t)=>k_(r,e,t)!==0;ah.exports=q_});var ha=F((pq,ch)=>{var O_=Sr(),A_=(r,e,t)=>O_(r,e,t)>=0;ch.exports=A_});var pa=F((gq,uh)=>{var F_=Sr(),I_=(r,e,t)=>F_(r,e,t)<=0;uh.exports=I_});var Jc=F((mq,lh)=>{var L_=la(),N_=Qc(),M_=Fo(),j_=ha(),$_=fa(),W_=pa(),H_=(r,e,t,n)=>{switch(e){case"===":return typeof r=="object"&&(r=r.version),typeof t=="object"&&(t=t.version),r===t;case"!==":return typeof r=="object"&&(r=r.version),typeof t=="object"&&(t=t.version),r!==t;case"":case"=":case"==":return L_(r,t,n);case"!=":return N_(r,t,n);case">":return M_(r,t,n);case">=":return j_(r,t,n);case"<":return $_(r,t,n);case"<=":return W_(r,t,n);default:throw new TypeError(`Invalid operator: ${e}`)}};lh.exports=H_});var fh=F((vq,dh)=>{var z_=It(),B_=Jn(),{re:ga,t:ma}=Qn(),U_=(r,e)=>{if(r instanceof z_)return r;if(typeof r=="number"&&(r=String(r)),typeof r!="string")return null;e=e||{};let t=null;if(!e.rtl)t=r.match(ga[ma.COERCE]);else{let n;for(;(n=ga[ma.COERCERTL].exec(r))&&(!t||t.index+t[0].length!==r.length);)(!t||n.index+n[0].length!==t.index+t[0].length)&&(t=n),ga[ma.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;ga[ma.COERCERTL].lastIndex=-1}return t===null?null:B_(`${t[2]}.${t[3]||"0"}.${t[4]||"0"}`,e)};dh.exports=U_});var ph=F((yq,hh)=>{"use strict";hh.exports=function(r){r.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var mh=F((bq,gh)=>{"use strict";gh.exports=De;De.Node=Zn;De.create=De;function De(r){var e=this;if(e instanceof De||(e=new De),e.tail=null,e.head=null,e.length=0,r&&typeof r.forEach=="function")r.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var t=0,n=arguments.length;t<n;t++)e.push(arguments[t]);return e}De.prototype.removeNode=function(r){if(r.list!==this)throw new Error("removing node which does not belong to this list");var e=r.next,t=r.prev;return e&&(e.prev=t),t&&(t.next=e),r===this.head&&(this.head=e),r===this.tail&&(this.tail=t),r.list.length--,r.next=null,r.prev=null,r.list=null,e};De.prototype.unshiftNode=function(r){if(r!==this.head){r.list&&r.list.removeNode(r);var e=this.head;r.list=this,r.next=e,e&&(e.prev=r),this.head=r,this.tail||(this.tail=r),this.length++}};De.prototype.pushNode=function(r){if(r!==this.tail){r.list&&r.list.removeNode(r);var e=this.tail;r.list=this,r.prev=e,e&&(e.next=r),this.tail=r,this.head||(this.head=r),this.length++}};De.prototype.push=function(){for(var r=0,e=arguments.length;r<e;r++)G_(this,arguments[r]);return this.length};De.prototype.unshift=function(){for(var r=0,e=arguments.length;r<e;r++)V_(this,arguments[r]);return this.length};De.prototype.pop=function(){if(!!this.tail){var r=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,r}};De.prototype.shift=function(){if(!!this.head){var r=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,r}};De.prototype.forEach=function(r,e){e=e||this;for(var t=this.head,n=0;t!==null;n++)r.call(e,t.value,n,this),t=t.next};De.prototype.forEachReverse=function(r,e){e=e||this;for(var t=this.tail,n=this.length-1;t!==null;n--)r.call(e,t.value,n,this),t=t.prev};De.prototype.get=function(r){for(var e=0,t=this.head;t!==null&&e<r;e++)t=t.next;if(e===r&&t!==null)return t.value};De.prototype.getReverse=function(r){for(var e=0,t=this.tail;t!==null&&e<r;e++)t=t.prev;if(e===r&&t!==null)return t.value};De.prototype.map=function(r,e){e=e||this;for(var t=new De,n=this.head;n!==null;)t.push(r.call(e,n.value,this)),n=n.next;return t};De.prototype.mapReverse=function(r,e){e=e||this;for(var t=new De,n=this.tail;n!==null;)t.push(r.call(e,n.value,this)),n=n.prev;return t};De.prototype.reduce=function(r,e){var t,n=this.head;if(arguments.length>1)t=e;else if(this.head)n=this.head.next,t=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;n!==null;i++)t=r(t,n.value,i),n=n.next;return t};De.prototype.reduceReverse=function(r,e){var t,n=this.tail;if(arguments.length>1)t=e;else if(this.tail)n=this.tail.prev,t=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;n!==null;i--)t=r(t,n.value,i),n=n.prev;return t};De.prototype.toArray=function(){for(var r=new Array(this.length),e=0,t=this.head;t!==null;e++)r[e]=t.value,t=t.next;return r};De.prototype.toArrayReverse=function(){for(var r=new Array(this.length),e=0,t=this.tail;t!==null;e++)r[e]=t.value,t=t.prev;return r};De.prototype.slice=function(r,e){e=e||this.length,e<0&&(e+=this.length),r=r||0,r<0&&(r+=this.length);var t=new De;if(e<r||e<0)return t;r<0&&(r=0),e>this.length&&(e=this.length);for(var n=0,i=this.head;i!==null&&n<r;n++)i=i.next;for(;i!==null&&n<e;n++,i=i.next)t.push(i.value);return t};De.prototype.sliceReverse=function(r,e){e=e||this.length,e<0&&(e+=this.length),r=r||0,r<0&&(r+=this.length);var t=new De;if(e<r||e<0)return t;r<0&&(r=0),e>this.length&&(e=this.length);for(var n=this.length,i=this.tail;i!==null&&n>e;n--)i=i.prev;for(;i!==null&&n>r;n--,i=i.prev)t.push(i.value);return t};De.prototype.splice=function(r,e,...t){r>this.length&&(r=this.length-1),r<0&&(r=this.length+r);for(var n=0,i=this.head;i!==null&&n<r;n++)i=i.next;for(var s=[],n=0;i&&n<e;n++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var n=0;n<t.length;n++)i=K_(this,i,t[n]);return s};De.prototype.reverse=function(){for(var r=this.head,e=this.tail,t=r;t!==null;t=t.prev){var n=t.prev;t.prev=t.next,t.next=n}return this.head=e,this.tail=r,this};function K_(r,e,t){var n=e===r.head?new Zn(t,null,e,r):new Zn(t,e,e.next,r);return n.next===null&&(r.tail=n),n.prev===null&&(r.head=n),r.length++,n}function G_(r,e){r.tail=new Zn(e,r.tail,null,r),r.head||(r.head=r.tail),r.length++}function V_(r,e){r.head=new Zn(e,null,r.head,r),r.tail||(r.tail=r.head),r.length++}function Zn(r,e,t,n){if(!(this instanceof Zn))return new Zn(r,e,t,n);this.list=n,this.value=r,e?(e.next=this,this.prev=e):this.prev=null,t?(t.prev=this,this.next=t):this.next=null}try{ph()(De)}catch{}});var _h=F((wq,Rh)=>{"use strict";var Y_=mh(),ei=Symbol("max"),mn=Symbol("length"),Ai=Symbol("lengthCalculator"),Io=Symbol("allowStale"),ti=Symbol("maxAge"),vn=Symbol("dispose"),vh=Symbol("noDisposeOnSet"),yt=Symbol("lruList"),jr=Symbol("cache"),yh=Symbol("updateAgeOnGet"),Zc=()=>1,bh=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");let t=this[ei]=e.max||1/0,n=e.length||Zc;if(this[Ai]=typeof n!="function"?Zc:n,this[Io]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[ti]=e.maxAge||0,this[vn]=e.dispose,this[vh]=e.noDisposeOnSet||!1,this[yh]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[ei]=e||1/0,Lo(this)}get max(){return this[ei]}set allowStale(e){this[Io]=!!e}get allowStale(){return this[Io]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[ti]=e,Lo(this)}get maxAge(){return this[ti]}set lengthCalculator(e){typeof e!="function"&&(e=Zc),e!==this[Ai]&&(this[Ai]=e,this[mn]=0,this[yt].forEach(t=>{t.length=this[Ai](t.value,t.key),this[mn]+=t.length})),Lo(this)}get lengthCalculator(){return this[Ai]}get length(){return this[mn]}get itemCount(){return this[yt].length}rforEach(e,t){t=t||this;for(let n=this[yt].tail;n!==null;){let i=n.prev;Ch(this,e,n,t),n=i}}forEach(e,t){t=t||this;for(let n=this[yt].head;n!==null;){let i=n.next;Ch(this,e,n,t),n=i}}keys(){return this[yt].toArray().map(e=>e.key)}values(){return this[yt].toArray().map(e=>e.value)}reset(){this[vn]&&this[yt]&&this[yt].length&&this[yt].forEach(e=>this[vn](e.key,e.value)),this[jr]=new Map,this[yt]=new Y_,this[mn]=0}dump(){return this[yt].map(e=>va(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[yt]}set(e,t,n){if(n=n||this[ti],n&&typeof n!="number")throw new TypeError("maxAge must be a number");let i=n?Date.now():0,s=this[Ai](t,e);if(this[jr].has(e)){if(s>this[ei])return Fi(this,this[jr].get(e)),!1;let u=this[jr].get(e).value;return this[vn]&&(this[vh]||this[vn](e,u.value)),u.now=i,u.maxAge=n,u.value=t,this[mn]+=s-u.length,u.length=s,this.get(e),Lo(this),!0}let a=new wh(e,t,s,i,n);return a.length>this[ei]?(this[vn]&&this[vn](e,t),!1):(this[mn]+=a.length,this[yt].unshift(a),this[jr].set(e,this[yt].head),Lo(this),!0)}has(e){if(!this[jr].has(e))return!1;let t=this[jr].get(e).value;return!va(this,t)}get(e){return eu(this,e,!0)}peek(e){return eu(this,e,!1)}pop(){let e=this[yt].tail;return e?(Fi(this,e),e.value):null}del(e){Fi(this,this[jr].get(e))}load(e){this.reset();let t=Date.now();for(let n=e.length-1;n>=0;n--){let i=e[n],s=i.e||0;if(s===0)this.set(i.k,i.v);else{let a=s-t;a>0&&this.set(i.k,i.v,a)}}}prune(){this[jr].forEach((e,t)=>eu(this,t,!1))}},eu=(r,e,t)=>{let n=r[jr].get(e);if(n){let i=n.value;if(va(r,i)){if(Fi(r,n),!r[Io])return}else t&&(r[yh]&&(n.value.now=Date.now()),r[yt].unshiftNode(n));return i.value}},va=(r,e)=>{if(!e||!e.maxAge&&!r[ti])return!1;let t=Date.now()-e.now;return e.maxAge?t>e.maxAge:r[ti]&&t>r[ti]},Lo=r=>{if(r[mn]>r[ei])for(let e=r[yt].tail;r[mn]>r[ei]&&e!==null;){let t=e.prev;Fi(r,e),e=t}},Fi=(r,e)=>{if(e){let t=e.value;r[vn]&&r[vn](t.key,t.value),r[mn]-=t.length,r[jr].delete(t.key),r[yt].removeNode(e)}},wh=class{constructor(e,t,n,i,s){this.key=e,this.value=t,this.length=n,this.now=i,this.maxAge=s||0}},Ch=(r,e,t,n)=>{let i=t.value;va(r,i)&&(Fi(r,t),r[Io]||(i=void 0)),i&&e.call(n,i.value,i.key,r)};Rh.exports=bh});var Tr=F((Cq,Dh)=>{var Ii=class{constructor(e,t){if(t=Q_(t),e instanceof Ii)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new Ii(e.raw,t);if(e instanceof tu)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!Th(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&rS(i[0])){this.set=[i];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();let n=`parseRange:${Object.keys(this.options).join(",")}:${e}`,i=Sh.get(n);if(i)return i;let s=this.options.loose,a=s?Lt[Et.HYPHENRANGELOOSE]:Lt[Et.HYPHENRANGE];e=e.replace(a,fS(this.options.includePrerelease)),et("hyphen replace",e),e=e.replace(Lt[Et.COMPARATORTRIM],Z_),et("comparator trim",e,Lt[Et.COMPARATORTRIM]),e=e.replace(Lt[Et.TILDETRIM],eS),e=e.replace(Lt[Et.CARETTRIM],tS),e=e.split(/\s+/).join(" ");let l=s?Lt[Et.COMPARATORLOOSE]:Lt[Et.COMPARATOR],u=e.split(" ").map(C=>nS(C,this.options)).join(" ").split(/\s+/).map(C=>dS(C,this.options)).filter(this.options.loose?C=>!!C.match(l):()=>!0).map(C=>new tu(C,this.options)),g=u.length,v=new Map;for(let C of u){if(Th(C))return[C];v.set(C.value,C)}v.size>1&&v.has("")&&v.delete("");let b=[...v.values()];return Sh.set(n,b),b}intersects(e,t){if(!(e instanceof Ii))throw new TypeError("a Range is required");return this.set.some(n=>Ph(n,t)&&e.set.some(i=>Ph(i,t)&&n.every(s=>i.every(a=>s.intersects(a,t)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new J_(e,this.options)}catch{return!1}for(let t=0;t<this.set.length;t++)if(hS(this.set[t],e,this.options))return!0;return!1}};Dh.exports=Ii;var X_=_h(),Sh=new X_({max:1e3}),Q_=Oo(),tu=No(),et=qo(),J_=It(),{re:Lt,t:Et,comparatorTrimReplace:Z_,tildeTrimReplace:eS,caretTrimReplace:tS}=Qn(),Th=r=>r.value==="<0.0.0-0",rS=r=>r.value==="",Ph=(r,e)=>{let t=!0,n=r.slice(),i=n.pop();for(;t&&n.length;)t=n.every(s=>i.intersects(s,e)),i=n.pop();return t},nS=(r,e)=>(et("comp",r,e),r=sS(r,e),et("caret",r),r=iS(r,e),et("tildes",r),r=cS(r,e),et("xrange",r),r=lS(r,e),et("stars",r),r),Vt=r=>!r||r.toLowerCase()==="x"||r==="*",iS=(r,e)=>r.trim().split(/\s+/).map(t=>oS(t,e)).join(" "),oS=(r,e)=>{let t=e.loose?Lt[Et.TILDELOOSE]:Lt[Et.TILDE];return r.replace(t,(n,i,s,a,l)=>{et("tilde",r,n,i,s,a,l);let u;return Vt(i)?u="":Vt(s)?u=`>=${i}.0.0 <${+i+1}.0.0-0`:Vt(a)?u=`>=${i}.${s}.0 <${i}.${+s+1}.0-0`:l?(et("replaceTilde pr",l),u=`>=${i}.${s}.${a}-${l} <${i}.${+s+1}.0-0`):u=`>=${i}.${s}.${a} <${i}.${+s+1}.0-0`,et("tilde return",u),u})},sS=(r,e)=>r.trim().split(/\s+/).map(t=>aS(t,e)).join(" "),aS=(r,e)=>{et("caret",r,e);let t=e.loose?Lt[Et.CARETLOOSE]:Lt[Et.CARET],n=e.includePrerelease?"-0":"";return r.replace(t,(i,s,a,l,u)=>{et("caret",r,i,s,a,l,u);let g;return Vt(s)?g="":Vt(a)?g=`>=${s}.0.0${n} <${+s+1}.0.0-0`:Vt(l)?s==="0"?g=`>=${s}.${a}.0${n} <${s}.${+a+1}.0-0`:g=`>=${s}.${a}.0${n} <${+s+1}.0.0-0`:u?(et("replaceCaret pr",u),s==="0"?a==="0"?g=`>=${s}.${a}.${l}-${u} <${s}.${a}.${+l+1}-0`:g=`>=${s}.${a}.${l}-${u} <${s}.${+a+1}.0-0`:g=`>=${s}.${a}.${l}-${u} <${+s+1}.0.0-0`):(et("no pr"),s==="0"?a==="0"?g=`>=${s}.${a}.${l}${n} <${s}.${a}.${+l+1}-0`:g=`>=${s}.${a}.${l}${n} <${s}.${+a+1}.0-0`:g=`>=${s}.${a}.${l} <${+s+1}.0.0-0`),et("caret return",g),g})},cS=(r,e)=>(et("replaceXRanges",r,e),r.split(/\s+/).map(t=>uS(t,e)).join(" ")),uS=(r,e)=>{r=r.trim();let t=e.loose?Lt[Et.XRANGELOOSE]:Lt[Et.XRANGE];return r.replace(t,(n,i,s,a,l,u)=>{et("xRange",r,n,i,s,a,l,u);let g=Vt(s),v=g||Vt(a),b=v||Vt(l),C=b;return i==="="&&C&&(i=""),u=e.includePrerelease?"-0":"",g?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&C?(v&&(a=0),l=0,i===">"?(i=">=",v?(s=+s+1,a=0,l=0):(a=+a+1,l=0)):i==="<="&&(i="<",v?s=+s+1:a=+a+1),i==="<"&&(u="-0"),n=`${i+s}.${a}.${l}${u}`):v?n=`>=${s}.0.0${u} <${+s+1}.0.0-0`:b&&(n=`>=${s}.${a}.0${u} <${s}.${+a+1}.0-0`),et("xRange return",n),n})},lS=(r,e)=>(et("replaceStars",r,e),r.trim().replace(Lt[Et.STAR],"")),dS=(r,e)=>(et("replaceGTE0",r,e),r.trim().replace(Lt[e.includePrerelease?Et.GTE0PRE:Et.GTE0],"")),fS=r=>(e,t,n,i,s,a,l,u,g,v,b,C,w)=>(Vt(n)?t="":Vt(i)?t=`>=${n}.0.0${r?"-0":""}`:Vt(s)?t=`>=${n}.${i}.0${r?"-0":""}`:a?t=`>=${t}`:t=`>=${t}${r?"-0":""}`,Vt(g)?u="":Vt(v)?u=`<${+g+1}.0.0-0`:Vt(b)?u=`<${g}.${+v+1}.0-0`:C?u=`<=${g}.${v}.${b}-${C}`:r?u=`<${g}.${v}.${+b+1}-0`:u=`<=${u}`,`${t} ${u}`.trim()),hS=(r,e,t)=>{for(let n=0;n<r.length;n++)if(!r[n].test(e))return!1;if(e.prerelease.length&&!t.includePrerelease){for(let n=0;n<r.length;n++)if(et(r[n].semver),r[n].semver!==tu.ANY&&r[n].semver.prerelease.length>0){let i=r[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var No=F((Rq,Oh)=>{var Mo=Symbol("SemVer ANY"),jo=class{static get ANY(){return Mo}constructor(e,t){if(t=pS(t),e instanceof jo){if(e.loose===!!t.loose)return e;e=e.value}nu("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===Mo?this.value="":this.value=this.operator+this.semver.version,nu("comp",this)}parse(e){let t=this.options.loose?Eh[xh.COMPARATORLOOSE]:Eh[xh.COMPARATOR],n=e.match(t);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new kh(n[2],this.options.loose):this.semver=Mo}toString(){return this.value}test(e){if(nu("Comparator.test",e,this.options.loose),this.semver===Mo||e===Mo)return!0;if(typeof e=="string")try{e=new kh(e,this.options)}catch{return!1}return ru(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof jo))throw new TypeError("a Comparator is required");if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new qh(e.value,t).test(this.value);if(e.operator==="")return e.value===""?!0:new qh(this.value,t).test(e.semver);let n=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),s=this.semver.version===e.semver.version,a=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),l=ru(this.semver,"<",e.semver,t)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),u=ru(this.semver,">",e.semver,t)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return n||i||s&&a||l||u}};Oh.exports=jo;var pS=Oo(),{re:Eh,t:xh}=Qn(),ru=Jc(),nu=qo(),kh=It(),qh=Tr()});var $o=F((_q,Ah)=>{var gS=Tr(),mS=(r,e,t)=>{try{e=new gS(e,t)}catch{return!1}return e.test(r)};Ah.exports=mS});var Ih=F((Sq,Fh)=>{var vS=Tr(),yS=(r,e)=>new vS(r,e).set.map(t=>t.map(n=>n.value).join(" ").trim().split(" "));Fh.exports=yS});var Nh=F((Tq,Lh)=>{var bS=It(),wS=Tr(),CS=(r,e,t)=>{let n=null,i=null,s=null;try{s=new wS(e,t)}catch{return null}return r.forEach(a=>{s.test(a)&&(!n||i.compare(a)===-1)&&(n=a,i=new bS(n,t))}),n};Lh.exports=CS});var jh=F((Pq,Mh)=>{var RS=It(),_S=Tr(),SS=(r,e,t)=>{let n=null,i=null,s=null;try{s=new _S(e,t)}catch{return null}return r.forEach(a=>{s.test(a)&&(!n||i.compare(a)===1)&&(n=a,i=new RS(n,t))}),n};Mh.exports=SS});var Hh=F((Dq,Wh)=>{var iu=It(),TS=Tr(),$h=Fo(),PS=(r,e)=>{r=new TS(r,e);let t=new iu("0.0.0");if(r.test(t)||(t=new iu("0.0.0-0"),r.test(t)))return t;t=null;for(let n=0;n<r.set.length;++n){let i=r.set[n],s=null;i.forEach(a=>{let l=new iu(a.semver.version);switch(a.operator){case">":l.prerelease.length===0?l.patch++:l.prerelease.push(0),l.raw=l.format();case"":case">=":(!s||$h(l,s))&&(s=l);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${a.operator}`)}}),s&&(!t||$h(t,s))&&(t=s)}return t&&r.test(t)?t:null};Wh.exports=PS});var Bh=F((Eq,zh)=>{var DS=Tr(),ES=(r,e)=>{try{return new DS(r,e).range||"*"}catch{return null}};zh.exports=ES});var ya=F((xq,Vh)=>{var xS=It(),Uh=No(),{ANY:kS}=Uh,qS=Tr(),OS=$o(),Kh=Fo(),Gh=fa(),AS=pa(),FS=ha(),IS=(r,e,t,n)=>{r=new xS(r,n),e=new qS(e,n);let i,s,a,l,u;switch(t){case">":i=Kh,s=AS,a=Gh,l=">",u=">=";break;case"<":i=Gh,s=FS,a=Kh,l="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(OS(r,e,n))return!1;for(let g=0;g<e.set.length;++g){let v=e.set[g],b=null,C=null;if(v.forEach(w=>{w.semver===kS&&(w=new Uh(">=0.0.0")),b=b||w,C=C||w,i(w.semver,b.semver,n)?b=w:a(w.semver,C.semver,n)&&(C=w)}),b.operator===l||b.operator===u||(!C.operator||C.operator===l)&&s(r,C.semver))return!1;if(C.operator===u&&a(r,C.semver))return!1}return!0};Vh.exports=IS});var Xh=F((kq,Yh)=>{var LS=ya(),NS=(r,e,t)=>LS(r,e,">",t);Yh.exports=NS});var Jh=F((qq,Qh)=>{var MS=ya(),jS=(r,e,t)=>MS(r,e,"<",t);Qh.exports=jS});var tp=F((Oq,ep)=>{var Zh=Tr(),$S=(r,e,t)=>(r=new Zh(r,t),e=new Zh(e,t),r.intersects(e));ep.exports=$S});var np=F((Aq,rp)=>{var WS=$o(),HS=Sr();rp.exports=(r,e,t)=>{let n=[],i=null,s=null,a=r.sort((v,b)=>HS(v,b,t));for(let v of a)WS(v,e,t)?(s=v,i||(i=v)):(s&&n.push([i,s]),s=null,i=null);i&&n.push([i,null]);let l=[];for(let[v,b]of n)v===b?l.push(v):!b&&v===a[0]?l.push("*"):b?v===a[0]?l.push(`<=${b}`):l.push(`${v} - ${b}`):l.push(`>=${v}`);let u=l.join(" || "),g=typeof e.raw=="string"?e.raw:String(e);return u.length<g.length?u:e}});var cp=F((Fq,ap)=>{var ip=Tr(),ba=No(),{ANY:ou}=ba,Wo=$o(),su=Sr(),zS=(r,e,t={})=>{if(r===e)return!0;r=new ip(r,t),e=new ip(e,t);let n=!1;e:for(let i of r.set){for(let s of e.set){let a=BS(i,s,t);if(n=n||a!==null,a)continue e}if(n)return!1}return!0},BS=(r,e,t)=>{if(r===e)return!0;if(r.length===1&&r[0].semver===ou){if(e.length===1&&e[0].semver===ou)return!0;t.includePrerelease?r=[new ba(">=0.0.0-0")]:r=[new ba(">=0.0.0")]}if(e.length===1&&e[0].semver===ou){if(t.includePrerelease)return!0;e=[new ba(">=0.0.0")]}let n=new Set,i,s;for(let w of r)w.operator===">"||w.operator===">="?i=op(i,w,t):w.operator==="<"||w.operator==="<="?s=sp(s,w,t):n.add(w.semver);if(n.size>1)return null;let a;if(i&&s){if(a=su(i.semver,s.semver,t),a>0)return null;if(a===0&&(i.operator!==">="||s.operator!=="<="))return null}for(let w of n){if(i&&!Wo(w,String(i),t)||s&&!Wo(w,String(s),t))return null;for(let E of e)if(!Wo(w,String(E),t))return!1;return!0}let l,u,g,v,b=s&&!t.includePrerelease&&s.semver.prerelease.length?s.semver:!1,C=i&&!t.includePrerelease&&i.semver.prerelease.length?i.semver:!1;b&&b.prerelease.length===1&&s.operator==="<"&&b.prerelease[0]===0&&(b=!1);for(let w of e){if(v=v||w.operator===">"||w.operator===">=",g=g||w.operator==="<"||w.operator==="<=",i){if(C&&w.semver.prerelease&&w.semver.prerelease.length&&w.semver.major===C.major&&w.semver.minor===C.minor&&w.semver.patch===C.patch&&(C=!1),w.operator===">"||w.operator===">="){if(l=op(i,w,t),l===w&&l!==i)return!1}else if(i.operator===">="&&!Wo(i.semver,String(w),t))return!1}if(s){if(b&&w.semver.prerelease&&w.semver.prerelease.length&&w.semver.major===b.major&&w.semver.minor===b.minor&&w.semver.patch===b.patch&&(b=!1),w.operator==="<"||w.operator==="<="){if(u=sp(s,w,t),u===w&&u!==s)return!1}else if(s.operator==="<="&&!Wo(s.semver,String(w),t))return!1}if(!w.operator&&(s||i)&&a!==0)return!1}return!(i&&g&&!s&&a!==0||s&&v&&!i&&a!==0||C||b)},op=(r,e,t)=>{if(!r)return e;let n=su(r.semver,e.semver,t);return n>0?r:n<0||e.operator===">"&&r.operator===">="?e:r},sp=(r,e,t)=>{if(!r)return e;let n=su(r.semver,e.semver,t);return n<0?r:n>0||e.operator==="<"&&r.operator==="<="?e:r};ap.exports=zS});var lp=F((Iq,up)=>{var au=Qn();up.exports={re:au.re,src:au.src,tokens:au.t,SEMVER_SPEC_VERSION:ko().SEMVER_SPEC_VERSION,SemVer:It(),compareIdentifiers:aa().compareIdentifiers,rcompareIdentifiers:aa().rcompareIdentifiers,parse:Jn(),valid:kf(),clean:Of(),inc:Ff(),diff:$f(),major:Hf(),minor:Bf(),patch:Kf(),prerelease:Vf(),compare:Sr(),rcompare:Xf(),compareLoose:Jf(),compareBuild:da(),sort:rh(),rsort:ih(),gt:Fo(),lt:fa(),eq:la(),neq:Qc(),gte:ha(),lte:pa(),cmp:Jc(),coerce:fh(),Comparator:No(),Range:Tr(),satisfies:$o(),toComparators:Ih(),maxSatisfying:Nh(),minSatisfying:jh(),minVersion:Hh(),validRange:Bh(),outside:ya(),gtr:Xh(),ltr:Jh(),intersects:tp(),simplifyRange:np(),subset:cp()}});var yn=F(Xe=>{"use strict";Object.defineProperty(Xe,"__esModule",{value:!0});Xe.asPromise=Xe.thenable=Xe.typedArray=Xe.stringArray=Xe.array=Xe.func=Xe.error=Xe.number=Xe.string=Xe.boolean=void 0;function US(r){return r===!0||r===!1}Xe.boolean=US;function dp(r){return typeof r=="string"||r instanceof String}Xe.string=dp;function KS(r){return typeof r=="number"||r instanceof Number}Xe.number=KS;function GS(r){return r instanceof Error}Xe.error=GS;function fp(r){return typeof r=="function"}Xe.func=fp;function hp(r){return Array.isArray(r)}Xe.array=hp;function VS(r){return hp(r)&&r.every(e=>dp(e))}Xe.stringArray=VS;function YS(r,e){return Array.isArray(r)&&r.every(e)}Xe.typedArray=YS;function pp(r){return r&&fp(r.then)}Xe.thenable=pp;function XS(r){return r instanceof Promise?r:pp(r)?new Promise((e,t)=>{r.then(n=>e(n),n=>t(n))}):Promise.resolve(r)}Xe.asPromise=XS});var bn=F(lu=>{"use strict";Object.defineProperty(lu,"__esModule",{value:!0});var cu;function uu(){if(cu===void 0)throw new Error("No runtime abstraction layer installed");return cu}(function(r){function e(t){if(t===void 0)throw new Error("No runtime abstraction layer provided");cu=t}r.install=e})(uu||(uu={}));lu.default=uu});var du=F(Ho=>{"use strict";Object.defineProperty(Ho,"__esModule",{value:!0});Ho.Disposable=void 0;var QS;(function(r){function e(t){return{dispose:t}}r.create=e})(QS=Ho.Disposable||(Ho.Disposable={}))});var mp=F(wa=>{"use strict";Object.defineProperty(wa,"__esModule",{value:!0});wa.AbstractMessageBuffer=void 0;var JS=13,ZS=10,eT=`\r
`,gp=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let t=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(t),this._totalLength+=t.byteLength}tryReadHeaders(){if(this._chunks.length===0)return;let e=0,t=0,n=0,i=0;e:for(;t<this._chunks.length;){let u=this._chunks[t];n=0;t:for(;n<u.length;){switch(u[n]){case JS:switch(e){case 0:e=1;break;case 2:e=3;break;default:e=0}break;case ZS:switch(e){case 1:e=2;break;case 3:e=4,n++;break e;default:e=0}break;default:e=0}n++}i+=u.byteLength,t++}if(e!==4)return;let s=this._read(i+n),a=new Map,l=this.toString(s,"ascii").split(eT);if(l.length<2)return a;for(let u=0;u<l.length-2;u++){let g=l[u],v=g.indexOf(":");if(v===-1)throw new Error("Message header must separate key and value using :");let b=g.substr(0,v),C=g.substr(v+1).trim();a.set(b,C)}return a}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let s=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(s)}if(this._chunks[0].byteLength>e){let s=this._chunks[0],a=this.asNative(s,e);return this._chunks[0]=s.slice(e),this._totalLength-=e,a}let t=this.allocNative(e),n=0,i=0;for(;e>0;){let s=this._chunks[i];if(s.byteLength>e){let a=s.slice(0,e);t.set(a,n),n+=e,this._chunks[i]=s.slice(e),this._totalLength-=e,e-=e}else t.set(s,n),n+=s.byteLength,this._chunks.shift(),this._totalLength-=s.byteLength,e-=s.byteLength}return t}};wa.AbstractMessageBuffer=gp});var Cp=F(hu=>{"use strict";Object.defineProperty(hu,"__esModule",{value:!0});var tT=bn(),vp=require("util"),ri=du(),rT=mp(),zo=class extends rT.AbstractMessageBuffer{constructor(e="utf-8"){super(e)}emptyBuffer(){return zo.emptyBuffer}fromString(e,t){return Buffer.from(e,t)}toString(e,t){return e instanceof Buffer?e.toString(t):new vp.TextDecoder(t).decode(e)}asNative(e,t){return t===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,t):Buffer.from(e,0,t)}allocNative(e){return Buffer.allocUnsafe(e)}};zo.emptyBuffer=Buffer.allocUnsafe(0);var yp=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),ri.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),ri.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),ri.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),ri.Disposable.create(()=>this.stream.off("data",e))}},bp=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),ri.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),ri.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),ri.Disposable.create(()=>this.stream.off("end",e))}write(e,t){return new Promise((n,i)=>{let s=a=>{a==null?n():i(a)};typeof e=="string"?this.stream.write(e,t,s):this.stream.write(e,s)})}end(){this.stream.end()}},wp=Object.freeze({messageBuffer:Object.freeze({create:r=>new zo(r)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(r,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(r,void 0,0),e.charset))}catch(t){return Promise.reject(t)}}}),decoder:Object.freeze({name:"application/json",decode:(r,e)=>{try{return r instanceof Buffer?Promise.resolve(JSON.parse(r.toString(e.charset))):Promise.resolve(JSON.parse(new vp.TextDecoder(e.charset).decode(r)))}catch(t){return Promise.reject(t)}}})}),stream:Object.freeze({asReadableStream:r=>new yp(r),asWritableStream:r=>new bp(r)}),console,timer:Object.freeze({setTimeout(r,e,...t){let n=setTimeout(r,e,...t);return{dispose:()=>clearTimeout(n)}},setImmediate(r,...e){let t=setImmediate(r,...e);return{dispose:()=>clearImmediate(t)}},setInterval(r,e,...t){let n=setInterval(r,e,...t);return{dispose:()=>clearInterval(n)}}})});function fu(){return wp}(function(r){function e(){tT.default.install(wp)}r.install=e})(fu||(fu={}));hu.default=fu});var Li=F(Nt=>{"use strict";Object.defineProperty(Nt,"__esModule",{value:!0});Nt.stringArray=Nt.array=Nt.func=Nt.error=Nt.number=Nt.string=Nt.boolean=void 0;function nT(r){return r===!0||r===!1}Nt.boolean=nT;function Rp(r){return typeof r=="string"||r instanceof String}Nt.string=Rp;function iT(r){return typeof r=="number"||r instanceof Number}Nt.number=iT;function oT(r){return r instanceof Error}Nt.error=oT;function sT(r){return typeof r=="function"}Nt.func=sT;function _p(r){return Array.isArray(r)}Nt.array=_p;function aT(r){return _p(r)&&r.every(e=>Rp(e))}Nt.stringArray=aT});var pu=F(te=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0});te.isResponseMessage=te.isNotificationMessage=te.isRequestMessage=te.NotificationType9=te.NotificationType8=te.NotificationType7=te.NotificationType6=te.NotificationType5=te.NotificationType4=te.NotificationType3=te.NotificationType2=te.NotificationType1=te.NotificationType0=te.NotificationType=te.RequestType9=te.RequestType8=te.RequestType7=te.RequestType6=te.RequestType5=te.RequestType4=te.RequestType3=te.RequestType2=te.RequestType1=te.RequestType=te.RequestType0=te.AbstractMessageSignature=te.ParameterStructures=te.ResponseError=te.ErrorCodes=void 0;var ni=Li(),Sp;(function(r){r.ParseError=-32700,r.InvalidRequest=-32600,r.MethodNotFound=-32601,r.InvalidParams=-32602,r.InternalError=-32603,r.jsonrpcReservedErrorRangeStart=-32099,r.serverErrorStart=r.jsonrpcReservedErrorRangeStart,r.MessageWriteError=-32099,r.MessageReadError=-32098,r.ServerNotInitialized=-32002,r.UnknownErrorCode=-32001,r.jsonrpcReservedErrorRangeEnd=-32e3,r.serverErrorEnd=r.jsonrpcReservedErrorRangeEnd})(Sp=te.ErrorCodes||(te.ErrorCodes={}));var Ca=class extends Error{constructor(e,t,n){super(t);this.code=ni.number(e)?e:Sp.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,Ca.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};te.ResponseError=Ca;var xt=class{constructor(e){this.kind=e}static is(e){return e===xt.auto||e===xt.byName||e===xt.byPosition}toString(){return this.kind}};te.ParameterStructures=xt;xt.auto=new xt("auto");xt.byPosition=new xt("byPosition");xt.byName=new xt("byName");var ze=class{constructor(e,t){this.method=e,this.numberOfParams=t}get parameterStructures(){return xt.auto}};te.AbstractMessageSignature=ze;var Tp=class extends ze{constructor(e){super(e,0)}};te.RequestType0=Tp;var Pp=class extends ze{constructor(e,t=xt.auto){super(e,1);this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};te.RequestType=Pp;var Dp=class extends ze{constructor(e,t=xt.auto){super(e,1);this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};te.RequestType1=Dp;var Ep=class extends ze{constructor(e){super(e,2)}};te.RequestType2=Ep;var xp=class extends ze{constructor(e){super(e,3)}};te.RequestType3=xp;var kp=class extends ze{constructor(e){super(e,4)}};te.RequestType4=kp;var qp=class extends ze{constructor(e){super(e,5)}};te.RequestType5=qp;var Op=class extends ze{constructor(e){super(e,6)}};te.RequestType6=Op;var Ap=class extends ze{constructor(e){super(e,7)}};te.RequestType7=Ap;var Fp=class extends ze{constructor(e){super(e,8)}};te.RequestType8=Fp;var Ip=class extends ze{constructor(e){super(e,9)}};te.RequestType9=Ip;var Lp=class extends ze{constructor(e,t=xt.auto){super(e,1);this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};te.NotificationType=Lp;var Np=class extends ze{constructor(e){super(e,0)}};te.NotificationType0=Np;var Mp=class extends ze{constructor(e,t=xt.auto){super(e,1);this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};te.NotificationType1=Mp;var jp=class extends ze{constructor(e){super(e,2)}};te.NotificationType2=jp;var $p=class extends ze{constructor(e){super(e,3)}};te.NotificationType3=$p;var Wp=class extends ze{constructor(e){super(e,4)}};te.NotificationType4=Wp;var Hp=class extends ze{constructor(e){super(e,5)}};te.NotificationType5=Hp;var zp=class extends ze{constructor(e){super(e,6)}};te.NotificationType6=zp;var Bp=class extends ze{constructor(e){super(e,7)}};te.NotificationType7=Bp;var Up=class extends ze{constructor(e){super(e,8)}};te.NotificationType8=Up;var Kp=class extends ze{constructor(e){super(e,9)}};te.NotificationType9=Kp;function cT(r){let e=r;return e&&ni.string(e.method)&&(ni.string(e.id)||ni.number(e.id))}te.isRequestMessage=cT;function uT(r){let e=r;return e&&ni.string(e.method)&&r.id===void 0}te.isNotificationMessage=uT;function lT(r){let e=r;return e&&(e.result!==void 0||!!e.error)&&(ni.string(e.id)||ni.number(e.id)||e.id===null)}te.isResponseMessage=lT});var mu=F(wn=>{"use strict";var Gp;Object.defineProperty(wn,"__esModule",{value:!0});wn.LRUCache=wn.LinkedMap=wn.Touch=void 0;var Yt;(function(r){r.None=0,r.First=1,r.AsOld=r.First,r.Last=2,r.AsNew=r.Last})(Yt=wn.Touch||(wn.Touch={}));var gu=class{constructor(){this[Gp]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)===null||e===void 0?void 0:e.value}get last(){var e;return(e=this._tail)===null||e===void 0?void 0:e.value}has(e){return this._map.has(e)}get(e,t=Yt.None){let n=this._map.get(e);if(!!n)return t!==Yt.None&&this.touch(n,t),n.value}set(e,t,n=Yt.None){let i=this._map.get(e);if(i)i.value=t,n!==Yt.None&&this.touch(i,n);else{switch(i={key:e,value:t,next:void 0,previous:void 0},n){case Yt.None:this.addItemLast(i);break;case Yt.First:this.addItemFirst(i);break;case Yt.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let t=this._map.get(e);if(!!t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let n=this._state,i=this._head;for(;i;){if(t?e.bind(t)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this._state,t=this._head,n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){let i={value:t.key,done:!1};return t=t.next,i}else return{value:void 0,done:!0}}};return n}values(){let e=this._state,t=this._head,n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){let i={value:t.value,done:!1};return t=t.next,i}else return{value:void 0,done:!0}}};return n}entries(){let e=this._state,t=this._head,n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){let i={value:[t.key,t.value],done:!1};return t=t.next,i}else return{value:void 0,done:!0}}};return n}[(Gp=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==Yt.First&&t!==Yt.Last)){if(t===Yt.First){if(e===this._head)return;let n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===Yt.Last){if(e===this._tail)return;let n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((t,n)=>{e.push([n,t])}),e}fromJSON(e){this.clear();for(let[t,n]of e)this.set(t,n)}};wn.LinkedMap=gu;var Vp=class extends gu{constructor(e,t=1){super();this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,t=Yt.AsNew){return super.get(e,t)}peek(e){return super.get(e,Yt.None)}set(e,t){return super.set(e,t,Yt.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};wn.LRUCache=Vp});var Ni=F(ii=>{"use strict";Object.defineProperty(ii,"__esModule",{value:!0});ii.Emitter=ii.Event=void 0;var dT=bn(),fT;(function(r){let e={dispose(){}};r.None=function(){return e}})(fT=ii.Event||(ii.Event={}));var Yp=class{add(e,t=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(n)&&n.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(!this._callbacks)return;let n=!1;for(let i=0,s=this._callbacks.length;i<s;i++)if(this._callbacks[i]===e)if(this._contexts[i]===t){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else n=!0;if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let t=[],n=this._callbacks.slice(0),i=this._contexts.slice(0);for(let s=0,a=n.length;s<a;s++)try{t.push(n[s].apply(i[s],e))}catch(l){dT.default().console.error(l)}return t}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},Bo=class{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,n)=>{this._callbacks||(this._callbacks=new Yp),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t);let i={dispose:()=>{!this._callbacks||(this._callbacks.remove(e,t),i.dispose=Bo._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(n)&&n.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};ii.Emitter=Bo;Bo._noop=function(){}});var wu=F(oi=>{"use strict";Object.defineProperty(oi,"__esModule",{value:!0});oi.CancellationTokenSource=oi.CancellationToken=void 0;var hT=bn(),pT=Li(),vu=Ni(),yu;(function(r){r.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:vu.Event.None}),r.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:vu.Event.None});function e(t){let n=t;return n&&(n===r.None||n===r.Cancelled||pT.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}r.is=e})(yu=oi.CancellationToken||(oi.CancellationToken={}));var gT=Object.freeze(function(r,e){let t=hT.default().timer.setTimeout(r.bind(e),0);return{dispose(){t.dispose()}}}),bu=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?gT:(this._emitter||(this._emitter=new vu.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},Xp=class{get token(){return this._token||(this._token=new bu),this._token}cancel(){this._token?this._token.cancel():this._token=yu.Cancelled}dispose(){this._token?this._token instanceof bu&&this._token.dispose():this._token=yu.None}};oi.CancellationTokenSource=Xp});var Jp=F(Cn=>{"use strict";Object.defineProperty(Cn,"__esModule",{value:!0});Cn.ReadableStreamMessageReader=Cn.AbstractMessageReader=Cn.MessageReader=void 0;var Cu=bn(),Mi=Li(),Ru=Ni(),mT;(function(r){function e(t){let n=t;return n&&Mi.func(n.listen)&&Mi.func(n.dispose)&&Mi.func(n.onError)&&Mi.func(n.onClose)&&Mi.func(n.onPartialMessage)}r.is=e})(mT=Cn.MessageReader||(Cn.MessageReader={}));var _u=class{constructor(){this.errorEmitter=new Ru.Emitter,this.closeEmitter=new Ru.Emitter,this.partialMessageEmitter=new Ru.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${Mi.string(e.message)?e.message:"unknown"}`)}};Cn.AbstractMessageReader=_u;var Su;(function(r){function e(t){var n;let i,s,a,l=new Map,u,g=new Map;if(t===void 0||typeof t=="string")i=t??"utf-8";else{if(i=(n=t.charset)!==null&&n!==void 0?n:"utf-8",t.contentDecoder!==void 0&&(a=t.contentDecoder,l.set(a.name,a)),t.contentDecoders!==void 0)for(let v of t.contentDecoders)l.set(v.name,v);if(t.contentTypeDecoder!==void 0&&(u=t.contentTypeDecoder,g.set(u.name,u)),t.contentTypeDecoders!==void 0)for(let v of t.contentTypeDecoders)g.set(v.name,v)}return u===void 0&&(u=Cu.default().applicationJson.decoder,g.set(u.name,u)),{charset:i,contentDecoder:a,contentDecoders:l,contentTypeDecoder:u,contentTypeDecoders:g}}r.fromOptions=e})(Su||(Su={}));var Qp=class extends _u{constructor(e,t){super();this.readable=e,this.options=Su.fromOptions(t),this.buffer=Cu.default().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let t=this.readable.onData(n=>{this.onData(n)});return this.readable.onError(n=>this.fireError(n)),this.readable.onClose(()=>this.fireClose()),t}onData(e){for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let i=this.buffer.tryReadHeaders();if(!i)return;let s=i.get("Content-Length");if(!s)throw new Error("Header must provide a Content-Length property.");let a=parseInt(s);if(isNaN(a))throw new Error("Content-Length value must be a number.");this.nextMessageLength=a}let t=this.buffer.tryReadBody(this.nextMessageLength);if(t===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1;let n;this.options.contentDecoder!==void 0?n=this.options.contentDecoder.decode(t):n=Promise.resolve(t),n.then(i=>{this.options.contentTypeDecoder.decode(i,this.options).then(s=>{this.callback(s)},s=>{this.fireError(s)})},i=>{this.fireError(i)})}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=Cu.default().timer.setTimeout((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};Cn.ReadableStreamMessageReader=Qp});var eg=F(Ra=>{"use strict";Object.defineProperty(Ra,"__esModule",{value:!0});Ra.Semaphore=void 0;var vT=bn(),Zp=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((t,n)=>{this._waiting.push({thunk:e,resolve:t,reject:n}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||vT.default().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let t=e.thunk();t instanceof Promise?t.then(n=>{this._active--,e.resolve(n),this.runNext()},n=>{this._active--,e.reject(n),this.runNext()}):(this._active--,e.resolve(t),this.runNext())}catch(t){this._active--,e.reject(t),this.runNext()}}};Ra.Semaphore=Zp});var og=F(Rn=>{"use strict";Object.defineProperty(Rn,"__esModule",{value:!0});Rn.WriteableStreamMessageWriter=Rn.AbstractMessageWriter=Rn.MessageWriter=void 0;var tg=bn(),Uo=Li(),yT=eg(),rg=Ni(),bT="Content-Length: ",ng=`\r
`,wT;(function(r){function e(t){let n=t;return n&&Uo.func(n.dispose)&&Uo.func(n.onClose)&&Uo.func(n.onError)&&Uo.func(n.write)}r.is=e})(wT=Rn.MessageWriter||(Rn.MessageWriter={}));var Tu=class{constructor(){this.errorEmitter=new rg.Emitter,this.closeEmitter=new rg.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,n){this.errorEmitter.fire([this.asError(e),t,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${Uo.string(e.message)?e.message:"unknown"}`)}};Rn.AbstractMessageWriter=Tu;var Pu;(function(r){function e(t){var n,i;return t===void 0||typeof t=="string"?{charset:t??"utf-8",contentTypeEncoder:tg.default().applicationJson.encoder}:{charset:(n=t.charset)!==null&&n!==void 0?n:"utf-8",contentEncoder:t.contentEncoder,contentTypeEncoder:(i=t.contentTypeEncoder)!==null&&i!==void 0?i:tg.default().applicationJson.encoder}}r.fromOptions=e})(Pu||(Pu={}));var ig=class extends Tu{constructor(e,t){super();this.writable=e,this.options=Pu.fromOptions(t),this.errorCount=0,this.writeSemaphore=new yT.Semaphore(1),this.writable.onError(n=>this.fireError(n)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(n=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(n):n).then(n=>{let i=[];return i.push(bT,n.byteLength.toString(),ng),i.push(ng),this.doWrite(e,i,n)},n=>{throw this.fireError(n),n}))}async doWrite(e,t,n){try{return await this.writable.write(t.join(""),"ascii"),this.writable.write(n)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){this.writable.end()}};Rn.WriteableStreamMessageWriter=ig});var dg=F(ue=>{"use strict";Object.defineProperty(ue,"__esModule",{value:!0});ue.createMessageConnection=ue.ConnectionOptions=ue.CancellationStrategy=ue.CancellationSenderStrategy=ue.CancellationReceiverStrategy=ue.ConnectionStrategy=ue.ConnectionError=ue.ConnectionErrors=ue.LogTraceNotification=ue.SetTraceNotification=ue.TraceFormat=ue.Trace=ue.NullLogger=ue.ProgressType=void 0;var sg=bn(),ft=Li(),ce=pu(),ag=mu(),Ko=Ni(),Du=wu(),Go;(function(r){r.type=new ce.NotificationType("$/cancelRequest")})(Go||(Go={}));var _a;(function(r){r.type=new ce.NotificationType("$/progress")})(_a||(_a={}));var cg=class{constructor(){}};ue.ProgressType=cg;var Eu;(function(r){function e(t){return ft.func(t)}r.is=e})(Eu||(Eu={}));ue.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var ot;(function(r){r[r.Off=0]="Off",r[r.Messages=1]="Messages",r[r.Verbose=2]="Verbose"})(ot=ue.Trace||(ue.Trace={}));(function(r){function e(n){if(!ft.string(n))return r.Off;switch(n=n.toLowerCase(),n){case"off":return r.Off;case"messages":return r.Messages;case"verbose":return r.Verbose;default:return r.Off}}r.fromString=e;function t(n){switch(n){case r.Off:return"off";case r.Messages:return"messages";case r.Verbose:return"verbose";default:return"off"}}r.toString=t})(ot=ue.Trace||(ue.Trace={}));var $r;(function(r){r.Text="text",r.JSON="json"})($r=ue.TraceFormat||(ue.TraceFormat={}));(function(r){function e(t){return ft.string(t)?(t=t.toLowerCase(),t==="json"?r.JSON:r.Text):r.Text}r.fromString=e})($r=ue.TraceFormat||(ue.TraceFormat={}));var ug;(function(r){r.type=new ce.NotificationType("$/setTrace")})(ug=ue.SetTraceNotification||(ue.SetTraceNotification={}));var xu;(function(r){r.type=new ce.NotificationType("$/logTrace")})(xu=ue.LogTraceNotification||(ue.LogTraceNotification={}));var Sa;(function(r){r[r.Closed=1]="Closed",r[r.Disposed=2]="Disposed",r[r.AlreadyListening=3]="AlreadyListening"})(Sa=ue.ConnectionErrors||(ue.ConnectionErrors={}));var si=class extends Error{constructor(e,t){super(t);this.code=e,Object.setPrototypeOf(this,si.prototype)}};ue.ConnectionError=si;var lg;(function(r){function e(t){let n=t;return n&&ft.func(n.cancelUndispatched)}r.is=e})(lg=ue.ConnectionStrategy||(ue.ConnectionStrategy={}));var ku;(function(r){r.Message=Object.freeze({createCancellationTokenSource(t){return new Du.CancellationTokenSource}});function e(t){let n=t;return n&&ft.func(n.createCancellationTokenSource)}r.is=e})(ku=ue.CancellationReceiverStrategy||(ue.CancellationReceiverStrategy={}));var qu;(function(r){r.Message=Object.freeze({sendCancellation(t,n){return t.sendNotification(Go.type,{id:n})},cleanup(t){}});function e(t){let n=t;return n&&ft.func(n.sendCancellation)&&ft.func(n.cleanup)}r.is=e})(qu=ue.CancellationSenderStrategy||(ue.CancellationSenderStrategy={}));var Ou;(function(r){r.Message=Object.freeze({receiver:ku.Message,sender:qu.Message});function e(t){let n=t;return n&&ku.is(n.receiver)&&qu.is(n.sender)}r.is=e})(Ou=ue.CancellationStrategy||(ue.CancellationStrategy={}));var CT;(function(r){function e(t){let n=t;return n&&(Ou.is(n.cancellationStrategy)||lg.is(n.connectionStrategy))}r.is=e})(CT=ue.ConnectionOptions||(ue.ConnectionOptions={}));var Wr;(function(r){r[r.New=1]="New",r[r.Listening=2]="Listening",r[r.Closed=3]="Closed",r[r.Disposed=4]="Disposed"})(Wr||(Wr={}));function RT(r,e,t,n){let i=t!==void 0?t:ue.NullLogger,s=0,a=0,l=0,u="2.0",g,v=Object.create(null),b,C=Object.create(null),w=new Map,E,q=new ag.LinkedMap,N=Object.create(null),A=new Set,H=Object.create(null),O=ot.Off,z=$r.Text,M,G=Wr.New,X=new Ko.Emitter,_e=new Ko.Emitter,Ae=new Ko.Emitter,Je=new Ko.Emitter,je=new Ko.Emitter,Fe=n&&n.cancellationStrategy?n.cancellationStrategy:Ou.Message;function ct(D){if(D===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+D.toString()}function St(D){return D===null?"res-unknown-"+(++l).toString():"res-"+D.toString()}function Tt(){return"not-"+(++a).toString()}function Wt(D,j){ce.isRequestMessage(j)?D.set(ct(j.id),j):ce.isResponseMessage(j)?D.set(St(j.id),j):D.set(Tt(),j)}function $e(D){}function gt(){return G===Wr.Listening}function mt(){return G===Wr.Closed}function ut(){return G===Wr.Disposed}function Pt(){(G===Wr.New||G===Wr.Listening)&&(G=Wr.Closed,_e.fire(void 0))}function Ot(D){X.fire([D,void 0,void 0])}function Jr(D){X.fire(D)}r.onClose(Pt),r.onError(Ot),e.onClose(Pt),e.onError(Jr);function Zr(){E||q.size===0||(E=sg.default().timer.setImmediate(()=>{E=void 0,Or()}))}function Or(){if(q.size===0)return;let D=q.shift();try{ce.isRequestMessage(D)?lt(D):ce.isNotificationMessage(D)?cr(D):ce.isResponseMessage(D)?gr(D):dt(D)}finally{Zr()}}let nt=D=>{try{if(ce.isNotificationMessage(D)&&D.method===Go.type.method){let j=D.params.id,K=ct(j),Q=q.get(K);if(ce.isRequestMessage(Q)){let R=n==null?void 0:n.connectionStrategy,P=R&&R.cancelUndispatched?R.cancelUndispatched(Q,$e):$e(Q);if(P&&(P.error!==void 0||P.result!==void 0)){q.delete(K),P.id=Q.id,Ht(P,D.method,Date.now()),e.write(P).catch(()=>i.error("Sending response for canceled message failed."));return}}let f=String(j),d=H[f];if(d!==void 0){d.cancel(),At(D);return}else A.add(j)}Wt(q,D)}finally{Zr()}};function lt(D){if(ut())return;function j(y,m,x){let I={jsonrpc:u,id:D.id};y instanceof ce.ResponseError?I.error=y.toJson():I.result=y===void 0?null:y,Ht(I,m,x),e.write(I).catch(()=>i.error("Sending response failed."))}function K(y,m,x){let I={jsonrpc:u,id:D.id,error:y.toJson()};Ht(I,m,x),e.write(I).catch(()=>i.error("Sending response failed."))}function Q(y,m,x){y===void 0&&(y=null);let I={jsonrpc:u,id:D.id,result:y};Ht(I,m,x),e.write(I).catch(()=>i.error("Sending response failed."))}Fr(D);let f=v[D.method],d,R;f&&(d=f.type,R=f.handler);let P=Date.now();if(R||g){let y=String(D.id),m=Fe.receiver.createCancellationTokenSource(y);D.id!==null&&A.has(D.id)&&m.cancel(),H[y]=m;try{let x;if(R)if(D.params===void 0){if(d!==void 0&&d.numberOfParams!==0){K(new ce.ResponseError(ce.ErrorCodes.InvalidParams,`Request ${D.method} defines ${d.numberOfParams} params but received none.`),D.method,P);return}x=R(m.token)}else if(Array.isArray(D.params)){if(d!==void 0&&d.parameterStructures===ce.ParameterStructures.byName){K(new ce.ResponseError(ce.ErrorCodes.InvalidParams,`Request ${D.method} defines parameters by name but received parameters by position`),D.method,P);return}x=R(...D.params,m.token)}else{if(d!==void 0&&d.parameterStructures===ce.ParameterStructures.byPosition){K(new ce.ResponseError(ce.ErrorCodes.InvalidParams,`Request ${D.method} defines parameters by position but received parameters by name`),D.method,P);return}x=R(D.params,m.token)}else g&&(x=g(D.method,D.params,m.token));let I=x;x?I.then?I.then(Y=>{delete H[y],j(Y,D.method,P)},Y=>{delete H[y],Y instanceof ce.ResponseError?K(Y,D.method,P):Y&&ft.string(Y.message)?K(new ce.ResponseError(ce.ErrorCodes.InternalError,`Request ${D.method} failed with message: ${Y.message}`),D.method,P):K(new ce.ResponseError(ce.ErrorCodes.InternalError,`Request ${D.method} failed unexpectedly without providing any details.`),D.method,P)}):(delete H[y],j(x,D.method,P)):(delete H[y],Q(x,D.method,P))}catch(x){delete H[y],x instanceof ce.ResponseError?j(x,D.method,P):x&&ft.string(x.message)?K(new ce.ResponseError(ce.ErrorCodes.InternalError,`Request ${D.method} failed with message: ${x.message}`),D.method,P):K(new ce.ResponseError(ce.ErrorCodes.InternalError,`Request ${D.method} failed unexpectedly without providing any details.`),D.method,P)}}else K(new ce.ResponseError(ce.ErrorCodes.MethodNotFound,`Unhandled method ${D.method}`),D.method,P)}function gr(D){if(!ut())if(D.id===null)D.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(D.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let j=String(D.id),K=N[j];if(vr(D,K),K){delete N[j];try{if(D.error){let Q=D.error;K.reject(new ce.ResponseError(Q.code,Q.message,Q.data))}else if(D.result!==void 0)K.resolve(D.result);else throw new Error("Should never happen.")}catch(Q){Q.message?i.error(`Response handler '${K.method}' failed with message: ${Q.message}`):i.error(`Response handler '${K.method}' failed unexpectedly.`)}}}}function cr(D){if(ut())return;let j,K;if(D.method===Go.type.method){let Q=D.params.id;A.delete(Q),At(D);return}else{let Q=C[D.method];Q&&(K=Q.handler,j=Q.type)}if(K||b)try{At(D),K?D.params===void 0?(j!==void 0&&j.numberOfParams!==0&&j.parameterStructures!==ce.ParameterStructures.byName&&i.error(`Notification ${D.method} defines ${j.numberOfParams} params but received none.`),K()):Array.isArray(D.params)?(j!==void 0&&(j.parameterStructures===ce.ParameterStructures.byName&&i.error(`Notification ${D.method} defines parameters by name but received parameters by position`),j.numberOfParams!==D.params.length&&i.error(`Notification ${D.method} defines ${j.numberOfParams} params but received ${D.params.length} arguments`)),K(...D.params)):(j!==void 0&&j.parameterStructures===ce.ParameterStructures.byPosition&&i.error(`Notification ${D.method} defines parameters by position but received parameters by name`),K(D.params)):b&&b(D.method,D.params)}catch(Q){Q.message?i.error(`Notification handler '${D.method}' failed with message: ${Q.message}`):i.error(`Notification handler '${D.method}' failed unexpectedly.`)}else Ae.fire(D)}function dt(D){if(!D){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(D,null,4)}`);let j=D;if(ft.string(j.id)||ft.number(j.id)){let K=String(j.id),Q=N[K];Q&&Q.reject(new Error("The received response has neither a result nor an error property."))}}function mr(D){if(!(O===ot.Off||!M))if(z===$r.Text){let j;O===ot.Verbose&&D.params&&(j=`Params: ${JSON.stringify(D.params,null,4)}

`),M.log(`Sending request '${D.method} - (${D.id})'.`,j)}else ke("send-request",D)}function Ar(D){if(!(O===ot.Off||!M))if(z===$r.Text){let j;O===ot.Verbose&&(D.params?j=`Params: ${JSON.stringify(D.params,null,4)}

`:j=`No parameters provided.

`),M.log(`Sending notification '${D.method}'.`,j)}else ke("send-notification",D)}function Ht(D,j,K){if(!(O===ot.Off||!M))if(z===$r.Text){let Q;O===ot.Verbose&&(D.error&&D.error.data?Q=`Error data: ${JSON.stringify(D.error.data,null,4)}

`:D.result?Q=`Result: ${JSON.stringify(D.result,null,4)}

`:D.error===void 0&&(Q=`No result returned.

`)),M.log(`Sending response '${j} - (${D.id})'. Processing request took ${Date.now()-K}ms`,Q)}else ke("send-response",D)}function Fr(D){if(!(O===ot.Off||!M))if(z===$r.Text){let j;O===ot.Verbose&&D.params&&(j=`Params: ${JSON.stringify(D.params,null,4)}

`),M.log(`Received request '${D.method} - (${D.id})'.`,j)}else ke("receive-request",D)}function At(D){if(!(O===ot.Off||!M||D.method===xu.type.method))if(z===$r.Text){let j;O===ot.Verbose&&(D.params?j=`Params: ${JSON.stringify(D.params,null,4)}

`:j=`No parameters provided.

`),M.log(`Received notification '${D.method}'.`,j)}else ke("receive-notification",D)}function vr(D,j){if(!(O===ot.Off||!M))if(z===$r.Text){let K;if(O===ot.Verbose&&(D.error&&D.error.data?K=`Error data: ${JSON.stringify(D.error.data,null,4)}

`:D.result?K=`Result: ${JSON.stringify(D.result,null,4)}

`:D.error===void 0&&(K=`No result returned.

`)),j){let Q=D.error?` Request failed: ${D.error.message} (${D.error.code}).`:"";M.log(`Received response '${j.method} - (${D.id})' in ${Date.now()-j.timerStart}ms.${Q}`,K)}else M.log(`Received response ${D.id} without active response promise.`,K)}else ke("receive-response",D)}function ke(D,j){if(!M||O===ot.Off)return;let K={isLSPMessage:!0,type:D,message:j,timestamp:Date.now()};M.log(K)}function Dt(){if(mt())throw new si(Sa.Closed,"Connection is closed.");if(ut())throw new si(Sa.Disposed,"Connection is disposed.")}function Ir(){if(gt())throw new si(Sa.AlreadyListening,"Connection is already listening")}function yr(){if(!gt())throw new Error("Call listen() first.")}function zt(D){return D===void 0?null:D}function Zt(D){if(D!==null)return D}function Ze(D){return D!=null&&!Array.isArray(D)&&typeof D=="object"}function Bt(D,j){switch(D){case ce.ParameterStructures.auto:return Ze(j)?Zt(j):[zt(j)];case ce.ParameterStructures.byName:if(!Ze(j))throw new Error("Received parameters by name but param is not an object literal.");return Zt(j);case ce.ParameterStructures.byPosition:return[zt(j)];default:throw new Error(`Unknown parameter structure ${D.toString()}`)}}function er(D,j){let K,Q=D.numberOfParams;switch(Q){case 0:K=void 0;break;case 1:K=Bt(D.parameterStructures,j[0]);break;default:K=[];for(let f=0;f<j.length&&f<Q;f++)K.push(zt(j[f]));if(j.length<Q)for(let f=j.length;f<Q;f++)K.push(null);break}return K}let Ut={sendNotification:(D,...j)=>{Dt();let K,Q;if(ft.string(D)){K=D;let d=j[0],R=0,P=ce.ParameterStructures.auto;ce.ParameterStructures.is(d)&&(R=1,P=d);let y=j.length,m=y-R;switch(m){case 0:Q=void 0;break;case 1:Q=Bt(P,j[R]);break;default:if(P===ce.ParameterStructures.byName)throw new Error(`Received ${m} parameters for 'by Name' notification parameter structure.`);Q=j.slice(R,y).map(x=>zt(x));break}}else{let d=j;K=D.method,Q=er(D,d)}let f={jsonrpc:u,method:K,params:Q};return Ar(f),e.write(f).catch(()=>i.error("Sending notification failed."))},onNotification:(D,j)=>{Dt();let K;return ft.func(D)?b=D:j&&(ft.string(D)?(K=D,C[D]={type:void 0,handler:j}):(K=D.method,C[D.method]={type:D,handler:j})),{dispose:()=>{K!==void 0?delete C[K]:b=void 0}}},onProgress:(D,j,K)=>{if(w.has(j))throw new Error(`Progress handler for token ${j} already registered`);return w.set(j,K),{dispose:()=>{w.delete(j)}}},sendProgress:(D,j,K)=>Ut.sendNotification(_a.type,{token:j,value:K}),onUnhandledProgress:Je.event,sendRequest:(D,...j)=>{Dt(),yr();let K,Q,f;if(ft.string(D)){K=D;let y=j[0],m=j[j.length-1],x=0,I=ce.ParameterStructures.auto;ce.ParameterStructures.is(y)&&(x=1,I=y);let Y=j.length;Du.CancellationToken.is(m)&&(Y=Y-1,f=m);let be=Y-x;switch(be){case 0:Q=void 0;break;case 1:Q=Bt(I,j[x]);break;default:if(I===ce.ParameterStructures.byName)throw new Error(`Received ${be} parameters for 'by Name' request parameter structure.`);Q=j.slice(x,Y).map(we=>zt(we));break}}else{let y=j;K=D.method,Q=er(D,y);let m=D.numberOfParams;f=Du.CancellationToken.is(y[m])?y[m]:void 0}let d=s++,R;return f&&(R=f.onCancellationRequested(()=>{let y=Fe.sender.sendCancellation(Ut,d);return y===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${d}`),Promise.resolve()):y.catch(()=>{i.log(`Sending cancellation messages for id ${d} failed`)})})),new Promise((y,m)=>{let x={jsonrpc:u,id:d,method:K,params:Q},I=we=>{y(we),Fe.sender.cleanup(d),R==null||R.dispose()},Y=we=>{m(we),Fe.sender.cleanup(d),R==null||R.dispose()},be={method:K,timerStart:Date.now(),resolve:I,reject:Y};mr(x);try{e.write(x).catch(()=>i.error("Sending request failed."))}catch(we){be.reject(new ce.ResponseError(ce.ErrorCodes.MessageWriteError,we.message?we.message:"Unknown reason")),be=null}be&&(N[String(d)]=be)})},onRequest:(D,j)=>{Dt();let K=null;return Eu.is(D)?(K=void 0,g=D):ft.string(D)?(K=null,j!==void 0&&(K=D,v[D]={handler:j,type:void 0})):j!==void 0&&(K=D.method,v[D.method]={type:D,handler:j}),{dispose:()=>{K!==null&&(K!==void 0?delete v[K]:g=void 0)}}},trace:(D,j,K)=>{let Q=!1,f=$r.Text;K!==void 0&&(ft.boolean(K)?Q=K:(Q=K.sendNotification||!1,f=K.traceFormat||$r.Text)),O=D,z=f,O===ot.Off?M=void 0:M=j,Q&&!mt()&&!ut()&&Ut.sendNotification(ug.type,{value:ot.toString(D)}).catch(()=>{i.error("Sending trace notification failed")})},onError:X.event,onClose:_e.event,onUnhandledNotification:Ae.event,onDispose:je.event,end:()=>{e.end()},dispose:()=>{if(ut())return;G=Wr.Disposed,je.fire(void 0);let D=new Error("Connection got disposed.");Object.keys(N).forEach(j=>{N[j].reject(D)}),N=Object.create(null),H=Object.create(null),A=new Set,q=new ag.LinkedMap,ft.func(e.dispose)&&e.dispose(),ft.func(r.dispose)&&r.dispose()},listen:()=>{Dt(),Ir(),G=Wr.Listening,r.listen(nt)},inspect:()=>{sg.default().console.log("inspect")}};return Ut.onNotification(xu.type,D=>{O===ot.Off||!M||M.log(D.message,O===ot.Verbose?D.verbose:void 0)}),Ut.onNotification(_a.type,D=>{let j=w.get(D.token);j?j(D.value):Je.fire(D)}),Ut}ue.createMessageConnection=RT});var Lu=F(W=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0});W.ConnectionErrors=W.LogTraceNotification=W.SetTraceNotification=W.TraceFormat=W.Trace=W.ProgressType=W.createMessageConnection=W.NullLogger=W.ConnectionOptions=W.ConnectionStrategy=W.WriteableStreamMessageWriter=W.AbstractMessageWriter=W.MessageWriter=W.ReadableStreamMessageReader=W.AbstractMessageReader=W.MessageReader=W.CancellationToken=W.CancellationTokenSource=W.Emitter=W.Event=W.Disposable=W.LRUCache=W.Touch=W.LinkedMap=W.ParameterStructures=W.NotificationType9=W.NotificationType8=W.NotificationType7=W.NotificationType6=W.NotificationType5=W.NotificationType4=W.NotificationType3=W.NotificationType2=W.NotificationType1=W.NotificationType0=W.NotificationType=W.ErrorCodes=W.ResponseError=W.RequestType9=W.RequestType8=W.RequestType7=W.RequestType6=W.RequestType5=W.RequestType4=W.RequestType3=W.RequestType2=W.RequestType1=W.RequestType0=W.RequestType=W.RAL=void 0;W.CancellationStrategy=W.CancellationSenderStrategy=W.CancellationReceiverStrategy=W.ConnectionError=void 0;var We=pu();Object.defineProperty(W,"RequestType",{enumerable:!0,get:function(){return We.RequestType}});Object.defineProperty(W,"RequestType0",{enumerable:!0,get:function(){return We.RequestType0}});Object.defineProperty(W,"RequestType1",{enumerable:!0,get:function(){return We.RequestType1}});Object.defineProperty(W,"RequestType2",{enumerable:!0,get:function(){return We.RequestType2}});Object.defineProperty(W,"RequestType3",{enumerable:!0,get:function(){return We.RequestType3}});Object.defineProperty(W,"RequestType4",{enumerable:!0,get:function(){return We.RequestType4}});Object.defineProperty(W,"RequestType5",{enumerable:!0,get:function(){return We.RequestType5}});Object.defineProperty(W,"RequestType6",{enumerable:!0,get:function(){return We.RequestType6}});Object.defineProperty(W,"RequestType7",{enumerable:!0,get:function(){return We.RequestType7}});Object.defineProperty(W,"RequestType8",{enumerable:!0,get:function(){return We.RequestType8}});Object.defineProperty(W,"RequestType9",{enumerable:!0,get:function(){return We.RequestType9}});Object.defineProperty(W,"ResponseError",{enumerable:!0,get:function(){return We.ResponseError}});Object.defineProperty(W,"ErrorCodes",{enumerable:!0,get:function(){return We.ErrorCodes}});Object.defineProperty(W,"NotificationType",{enumerable:!0,get:function(){return We.NotificationType}});Object.defineProperty(W,"NotificationType0",{enumerable:!0,get:function(){return We.NotificationType0}});Object.defineProperty(W,"NotificationType1",{enumerable:!0,get:function(){return We.NotificationType1}});Object.defineProperty(W,"NotificationType2",{enumerable:!0,get:function(){return We.NotificationType2}});Object.defineProperty(W,"NotificationType3",{enumerable:!0,get:function(){return We.NotificationType3}});Object.defineProperty(W,"NotificationType4",{enumerable:!0,get:function(){return We.NotificationType4}});Object.defineProperty(W,"NotificationType5",{enumerable:!0,get:function(){return We.NotificationType5}});Object.defineProperty(W,"NotificationType6",{enumerable:!0,get:function(){return We.NotificationType6}});Object.defineProperty(W,"NotificationType7",{enumerable:!0,get:function(){return We.NotificationType7}});Object.defineProperty(W,"NotificationType8",{enumerable:!0,get:function(){return We.NotificationType8}});Object.defineProperty(W,"NotificationType9",{enumerable:!0,get:function(){return We.NotificationType9}});Object.defineProperty(W,"ParameterStructures",{enumerable:!0,get:function(){return We.ParameterStructures}});var Au=mu();Object.defineProperty(W,"LinkedMap",{enumerable:!0,get:function(){return Au.LinkedMap}});Object.defineProperty(W,"LRUCache",{enumerable:!0,get:function(){return Au.LRUCache}});Object.defineProperty(W,"Touch",{enumerable:!0,get:function(){return Au.Touch}});var _T=du();Object.defineProperty(W,"Disposable",{enumerable:!0,get:function(){return _T.Disposable}});var fg=Ni();Object.defineProperty(W,"Event",{enumerable:!0,get:function(){return fg.Event}});Object.defineProperty(W,"Emitter",{enumerable:!0,get:function(){return fg.Emitter}});var hg=wu();Object.defineProperty(W,"CancellationTokenSource",{enumerable:!0,get:function(){return hg.CancellationTokenSource}});Object.defineProperty(W,"CancellationToken",{enumerable:!0,get:function(){return hg.CancellationToken}});var Fu=Jp();Object.defineProperty(W,"MessageReader",{enumerable:!0,get:function(){return Fu.MessageReader}});Object.defineProperty(W,"AbstractMessageReader",{enumerable:!0,get:function(){return Fu.AbstractMessageReader}});Object.defineProperty(W,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return Fu.ReadableStreamMessageReader}});var Iu=og();Object.defineProperty(W,"MessageWriter",{enumerable:!0,get:function(){return Iu.MessageWriter}});Object.defineProperty(W,"AbstractMessageWriter",{enumerable:!0,get:function(){return Iu.AbstractMessageWriter}});Object.defineProperty(W,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return Iu.WriteableStreamMessageWriter}});var nr=dg();Object.defineProperty(W,"ConnectionStrategy",{enumerable:!0,get:function(){return nr.ConnectionStrategy}});Object.defineProperty(W,"ConnectionOptions",{enumerable:!0,get:function(){return nr.ConnectionOptions}});Object.defineProperty(W,"NullLogger",{enumerable:!0,get:function(){return nr.NullLogger}});Object.defineProperty(W,"createMessageConnection",{enumerable:!0,get:function(){return nr.createMessageConnection}});Object.defineProperty(W,"ProgressType",{enumerable:!0,get:function(){return nr.ProgressType}});Object.defineProperty(W,"Trace",{enumerable:!0,get:function(){return nr.Trace}});Object.defineProperty(W,"TraceFormat",{enumerable:!0,get:function(){return nr.TraceFormat}});Object.defineProperty(W,"SetTraceNotification",{enumerable:!0,get:function(){return nr.SetTraceNotification}});Object.defineProperty(W,"LogTraceNotification",{enumerable:!0,get:function(){return nr.LogTraceNotification}});Object.defineProperty(W,"ConnectionErrors",{enumerable:!0,get:function(){return nr.ConnectionErrors}});Object.defineProperty(W,"ConnectionError",{enumerable:!0,get:function(){return nr.ConnectionError}});Object.defineProperty(W,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return nr.CancellationReceiverStrategy}});Object.defineProperty(W,"CancellationSenderStrategy",{enumerable:!0,get:function(){return nr.CancellationSenderStrategy}});Object.defineProperty(W,"CancellationStrategy",{enumerable:!0,get:function(){return nr.CancellationStrategy}});var ST=bn();W.RAL=ST.default});var ai=F(Ee=>{"use strict";var TT=Ee&&Ee.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),PT=Ee&&Ee.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&TT(e,r,t)};Object.defineProperty(Ee,"__esModule",{value:!0});Ee.createMessageConnection=Ee.createServerSocketTransport=Ee.createClientSocketTransport=Ee.createServerPipeTransport=Ee.createClientPipeTransport=Ee.generateRandomPipeName=Ee.StreamMessageWriter=Ee.StreamMessageReader=Ee.SocketMessageWriter=Ee.SocketMessageReader=Ee.IPCMessageWriter=Ee.IPCMessageReader=void 0;var ji=Cp();ji.default.install();var rn=Lu(),pg=require("path"),DT=require("os"),ET=require("crypto"),Ta=require("net");PT(Lu(),Ee);var gg=class extends rn.AbstractMessageReader{constructor(e){super();this.process=e;let t=this.process;t.on("error",n=>this.fireError(n)),t.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),rn.Disposable.create(()=>this.process.off("message",e))}};Ee.IPCMessageReader=gg;var mg=class extends rn.AbstractMessageWriter{constructor(e){super();this.process=e,this.errorCount=0;let t=this.process;t.on("error",n=>this.fireError(n)),t.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,t=>{t?(this.errorCount++,this.handleError(t,e)):this.errorCount=0}),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}};Ee.IPCMessageWriter=mg;var $i=class extends rn.ReadableStreamMessageReader{constructor(e,t="utf-8"){super(ji.default().stream.asReadableStream(e),t)}};Ee.SocketMessageReader=$i;var Wi=class extends rn.WriteableStreamMessageWriter{constructor(e,t){super(ji.default().stream.asWritableStream(e),t);this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};Ee.SocketMessageWriter=Wi;var Nu=class extends rn.ReadableStreamMessageReader{constructor(e,t){super(ji.default().stream.asReadableStream(e),t)}};Ee.StreamMessageReader=Nu;var Mu=class extends rn.WriteableStreamMessageWriter{constructor(e,t){super(ji.default().stream.asWritableStream(e),t)}};Ee.StreamMessageWriter=Mu;var vg=process.env.XDG_RUNTIME_DIR,xT=new Map([["linux",107],["darwin",103]]);function kT(){let r=ET.randomBytes(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${r}-sock`;let e;vg?e=pg.join(vg,`vscode-ipc-${r}.sock`):e=pg.join(DT.tmpdir(),`vscode-${r}.sock`);let t=xT.get(process.platform);return t!==void 0&&e.length>=t&&ji.default().console.warn(`WARNING: IPC handle "${e}" is longer than ${t} characters.`),e}Ee.generateRandomPipeName=kT;function qT(r,e="utf-8"){let t,n=new Promise((i,s)=>{t=i});return new Promise((i,s)=>{let a=Ta.createServer(l=>{a.close(),t([new $i(l,e),new Wi(l,e)])});a.on("error",s),a.listen(r,()=>{a.removeListener("error",s),i({onConnected:()=>n})})})}Ee.createClientPipeTransport=qT;function OT(r,e="utf-8"){let t=Ta.createConnection(r);return[new $i(t,e),new Wi(t,e)]}Ee.createServerPipeTransport=OT;function AT(r,e="utf-8"){let t,n=new Promise((i,s)=>{t=i});return new Promise((i,s)=>{let a=Ta.createServer(l=>{a.close(),t([new $i(l,e),new Wi(l,e)])});a.on("error",s),a.listen(r,"127.0.0.1",()=>{a.removeListener("error",s),i({onConnected:()=>n})})})}Ee.createClientSocketTransport=AT;function FT(r,e="utf-8"){let t=Ta.createConnection(r,"127.0.0.1");return[new $i(t,e),new Wi(t,e)]}Ee.createServerSocketTransport=FT;function IT(r){let e=r;return e.read!==void 0&&e.addListener!==void 0}function LT(r){let e=r;return e.write!==void 0&&e.addListener!==void 0}function NT(r,e,t,n){t||(t=rn.NullLogger);let i=IT(r)?new Nu(r):r,s=LT(e)?new Mu(e):e;return rn.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),rn.createMessageConnection(i,s,t,n)}Ee.createMessageConnection=NT});var ju=F((Jq,yg)=>{"use strict";yg.exports=ai()});var wg=F((bg,Pa)=>{(function(r){if(typeof Pa=="object"&&typeof Pa.exports=="object"){var e=r(require,bg);e!==void 0&&(Pa.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],r)})(function(r,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=e.EOL=e.SemanticTokens=e.SemanticTokenModifiers=e.SemanticTokenTypes=e.SelectionRange=e.DocumentLink=e.FormattingOptions=e.CodeLens=e.CodeAction=e.CodeActionContext=e.CodeActionKind=e.DocumentSymbol=e.SymbolInformation=e.SymbolTag=e.SymbolKind=e.DocumentHighlight=e.DocumentHighlightKind=e.SignatureInformation=e.ParameterInformation=e.Hover=e.MarkedString=e.CompletionList=e.CompletionItem=e.CompletionItemLabelDetails=e.InsertTextMode=e.InsertReplaceEdit=e.CompletionItemTag=e.InsertTextFormat=e.CompletionItemKind=e.MarkupContent=e.MarkupKind=e.TextDocumentItem=e.OptionalVersionedTextDocumentIdentifier=e.VersionedTextDocumentIdentifier=e.TextDocumentIdentifier=e.WorkspaceChange=e.WorkspaceEdit=e.DeleteFile=e.RenameFile=e.CreateFile=e.TextDocumentEdit=e.AnnotatedTextEdit=e.ChangeAnnotationIdentifier=e.ChangeAnnotation=e.TextEdit=e.Command=e.Diagnostic=e.CodeDescription=e.DiagnosticTag=e.DiagnosticSeverity=e.DiagnosticRelatedInformation=e.FoldingRange=e.FoldingRangeKind=e.ColorPresentation=e.ColorInformation=e.Color=e.LocationLink=e.Location=e.Range=e.Position=e.uinteger=e.integer=void 0;var t;(function(d){d.MIN_VALUE=-2147483648,d.MAX_VALUE=2147483647})(t=e.integer||(e.integer={}));var n;(function(d){d.MIN_VALUE=0,d.MAX_VALUE=2147483647})(n=e.uinteger||(e.uinteger={}));var i;(function(d){function R(y,m){return y===Number.MAX_VALUE&&(y=n.MAX_VALUE),m===Number.MAX_VALUE&&(m=n.MAX_VALUE),{line:y,character:m}}d.create=R;function P(y){var m=y;return f.objectLiteral(m)&&f.uinteger(m.line)&&f.uinteger(m.character)}d.is=P})(i=e.Position||(e.Position={}));var s;(function(d){function R(y,m,x,I){if(f.uinteger(y)&&f.uinteger(m)&&f.uinteger(x)&&f.uinteger(I))return{start:i.create(y,m),end:i.create(x,I)};if(i.is(y)&&i.is(m))return{start:y,end:m};throw new Error("Range#create called with invalid arguments["+y+", "+m+", "+x+", "+I+"]")}d.create=R;function P(y){var m=y;return f.objectLiteral(m)&&i.is(m.start)&&i.is(m.end)}d.is=P})(s=e.Range||(e.Range={}));var a;(function(d){function R(y,m){return{uri:y,range:m}}d.create=R;function P(y){var m=y;return f.defined(m)&&s.is(m.range)&&(f.string(m.uri)||f.undefined(m.uri))}d.is=P})(a=e.Location||(e.Location={}));var l;(function(d){function R(y,m,x,I){return{targetUri:y,targetRange:m,targetSelectionRange:x,originSelectionRange:I}}d.create=R;function P(y){var m=y;return f.defined(m)&&s.is(m.targetRange)&&f.string(m.targetUri)&&(s.is(m.targetSelectionRange)||f.undefined(m.targetSelectionRange))&&(s.is(m.originSelectionRange)||f.undefined(m.originSelectionRange))}d.is=P})(l=e.LocationLink||(e.LocationLink={}));var u;(function(d){function R(y,m,x,I){return{red:y,green:m,blue:x,alpha:I}}d.create=R;function P(y){var m=y;return f.numberRange(m.red,0,1)&&f.numberRange(m.green,0,1)&&f.numberRange(m.blue,0,1)&&f.numberRange(m.alpha,0,1)}d.is=P})(u=e.Color||(e.Color={}));var g;(function(d){function R(y,m){return{range:y,color:m}}d.create=R;function P(y){var m=y;return s.is(m.range)&&u.is(m.color)}d.is=P})(g=e.ColorInformation||(e.ColorInformation={}));var v;(function(d){function R(y,m,x){return{label:y,textEdit:m,additionalTextEdits:x}}d.create=R;function P(y){var m=y;return f.string(m.label)&&(f.undefined(m.textEdit)||O.is(m))&&(f.undefined(m.additionalTextEdits)||f.typedArray(m.additionalTextEdits,O.is))}d.is=P})(v=e.ColorPresentation||(e.ColorPresentation={}));var b;(function(d){d.Comment="comment",d.Imports="imports",d.Region="region"})(b=e.FoldingRangeKind||(e.FoldingRangeKind={}));var C;(function(d){function R(y,m,x,I,Y){var be={startLine:y,endLine:m};return f.defined(x)&&(be.startCharacter=x),f.defined(I)&&(be.endCharacter=I),f.defined(Y)&&(be.kind=Y),be}d.create=R;function P(y){var m=y;return f.uinteger(m.startLine)&&f.uinteger(m.startLine)&&(f.undefined(m.startCharacter)||f.uinteger(m.startCharacter))&&(f.undefined(m.endCharacter)||f.uinteger(m.endCharacter))&&(f.undefined(m.kind)||f.string(m.kind))}d.is=P})(C=e.FoldingRange||(e.FoldingRange={}));var w;(function(d){function R(y,m){return{location:y,message:m}}d.create=R;function P(y){var m=y;return f.defined(m)&&a.is(m.location)&&f.string(m.message)}d.is=P})(w=e.DiagnosticRelatedInformation||(e.DiagnosticRelatedInformation={}));var E;(function(d){d.Error=1,d.Warning=2,d.Information=3,d.Hint=4})(E=e.DiagnosticSeverity||(e.DiagnosticSeverity={}));var q;(function(d){d.Unnecessary=1,d.Deprecated=2})(q=e.DiagnosticTag||(e.DiagnosticTag={}));var N;(function(d){function R(P){var y=P;return y!=null&&f.string(y.href)}d.is=R})(N=e.CodeDescription||(e.CodeDescription={}));var A;(function(d){function R(y,m,x,I,Y,be){var we={range:y,message:m};return f.defined(x)&&(we.severity=x),f.defined(I)&&(we.code=I),f.defined(Y)&&(we.source=Y),f.defined(be)&&(we.relatedInformation=be),we}d.create=R;function P(y){var m,x=y;return f.defined(x)&&s.is(x.range)&&f.string(x.message)&&(f.number(x.severity)||f.undefined(x.severity))&&(f.integer(x.code)||f.string(x.code)||f.undefined(x.code))&&(f.undefined(x.codeDescription)||f.string((m=x.codeDescription)===null||m===void 0?void 0:m.href))&&(f.string(x.source)||f.undefined(x.source))&&(f.undefined(x.relatedInformation)||f.typedArray(x.relatedInformation,w.is))}d.is=P})(A=e.Diagnostic||(e.Diagnostic={}));var H;(function(d){function R(y,m){for(var x=[],I=2;I<arguments.length;I++)x[I-2]=arguments[I];var Y={title:y,command:m};return f.defined(x)&&x.length>0&&(Y.arguments=x),Y}d.create=R;function P(y){var m=y;return f.defined(m)&&f.string(m.title)&&f.string(m.command)}d.is=P})(H=e.Command||(e.Command={}));var O;(function(d){function R(x,I){return{range:x,newText:I}}d.replace=R;function P(x,I){return{range:{start:x,end:x},newText:I}}d.insert=P;function y(x){return{range:x,newText:""}}d.del=y;function m(x){var I=x;return f.objectLiteral(I)&&f.string(I.newText)&&s.is(I.range)}d.is=m})(O=e.TextEdit||(e.TextEdit={}));var z;(function(d){function R(y,m,x){var I={label:y};return m!==void 0&&(I.needsConfirmation=m),x!==void 0&&(I.description=x),I}d.create=R;function P(y){var m=y;return m!==void 0&&f.objectLiteral(m)&&f.string(m.label)&&(f.boolean(m.needsConfirmation)||m.needsConfirmation===void 0)&&(f.string(m.description)||m.description===void 0)}d.is=P})(z=e.ChangeAnnotation||(e.ChangeAnnotation={}));var M;(function(d){function R(P){var y=P;return typeof y=="string"}d.is=R})(M=e.ChangeAnnotationIdentifier||(e.ChangeAnnotationIdentifier={}));var G;(function(d){function R(x,I,Y){return{range:x,newText:I,annotationId:Y}}d.replace=R;function P(x,I,Y){return{range:{start:x,end:x},newText:I,annotationId:Y}}d.insert=P;function y(x,I){return{range:x,newText:"",annotationId:I}}d.del=y;function m(x){var I=x;return O.is(I)&&(z.is(I.annotationId)||M.is(I.annotationId))}d.is=m})(G=e.AnnotatedTextEdit||(e.AnnotatedTextEdit={}));var X;(function(d){function R(y,m){return{textDocument:y,edits:m}}d.create=R;function P(y){var m=y;return f.defined(m)&&$e.is(m.textDocument)&&Array.isArray(m.edits)}d.is=P})(X=e.TextDocumentEdit||(e.TextDocumentEdit={}));var _e;(function(d){function R(y,m,x){var I={kind:"create",uri:y};return m!==void 0&&(m.overwrite!==void 0||m.ignoreIfExists!==void 0)&&(I.options=m),x!==void 0&&(I.annotationId=x),I}d.create=R;function P(y){var m=y;return m&&m.kind==="create"&&f.string(m.uri)&&(m.options===void 0||(m.options.overwrite===void 0||f.boolean(m.options.overwrite))&&(m.options.ignoreIfExists===void 0||f.boolean(m.options.ignoreIfExists)))&&(m.annotationId===void 0||M.is(m.annotationId))}d.is=P})(_e=e.CreateFile||(e.CreateFile={}));var Ae;(function(d){function R(y,m,x,I){var Y={kind:"rename",oldUri:y,newUri:m};return x!==void 0&&(x.overwrite!==void 0||x.ignoreIfExists!==void 0)&&(Y.options=x),I!==void 0&&(Y.annotationId=I),Y}d.create=R;function P(y){var m=y;return m&&m.kind==="rename"&&f.string(m.oldUri)&&f.string(m.newUri)&&(m.options===void 0||(m.options.overwrite===void 0||f.boolean(m.options.overwrite))&&(m.options.ignoreIfExists===void 0||f.boolean(m.options.ignoreIfExists)))&&(m.annotationId===void 0||M.is(m.annotationId))}d.is=P})(Ae=e.RenameFile||(e.RenameFile={}));var Je;(function(d){function R(y,m,x){var I={kind:"delete",uri:y};return m!==void 0&&(m.recursive!==void 0||m.ignoreIfNotExists!==void 0)&&(I.options=m),x!==void 0&&(I.annotationId=x),I}d.create=R;function P(y){var m=y;return m&&m.kind==="delete"&&f.string(m.uri)&&(m.options===void 0||(m.options.recursive===void 0||f.boolean(m.options.recursive))&&(m.options.ignoreIfNotExists===void 0||f.boolean(m.options.ignoreIfNotExists)))&&(m.annotationId===void 0||M.is(m.annotationId))}d.is=P})(Je=e.DeleteFile||(e.DeleteFile={}));var je;(function(d){function R(P){var y=P;return y&&(y.changes!==void 0||y.documentChanges!==void 0)&&(y.documentChanges===void 0||y.documentChanges.every(function(m){return f.string(m.kind)?_e.is(m)||Ae.is(m)||Je.is(m):X.is(m)}))}d.is=R})(je=e.WorkspaceEdit||(e.WorkspaceEdit={}));var Fe=function(){function d(R,P){this.edits=R,this.changeAnnotations=P}return d.prototype.insert=function(R,P,y){var m,x;if(y===void 0?m=O.insert(R,P):M.is(y)?(x=y,m=G.insert(R,P,y)):(this.assertChangeAnnotations(this.changeAnnotations),x=this.changeAnnotations.manage(y),m=G.insert(R,P,x)),this.edits.push(m),x!==void 0)return x},d.prototype.replace=function(R,P,y){var m,x;if(y===void 0?m=O.replace(R,P):M.is(y)?(x=y,m=G.replace(R,P,y)):(this.assertChangeAnnotations(this.changeAnnotations),x=this.changeAnnotations.manage(y),m=G.replace(R,P,x)),this.edits.push(m),x!==void 0)return x},d.prototype.delete=function(R,P){var y,m;if(P===void 0?y=O.del(R):M.is(P)?(m=P,y=G.del(R,P)):(this.assertChangeAnnotations(this.changeAnnotations),m=this.changeAnnotations.manage(P),y=G.del(R,m)),this.edits.push(y),m!==void 0)return m},d.prototype.add=function(R){this.edits.push(R)},d.prototype.all=function(){return this.edits},d.prototype.clear=function(){this.edits.splice(0,this.edits.length)},d.prototype.assertChangeAnnotations=function(R){if(R===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},d}(),ct=function(){function d(R){this._annotations=R===void 0?Object.create(null):R,this._counter=0,this._size=0}return d.prototype.all=function(){return this._annotations},Object.defineProperty(d.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),d.prototype.manage=function(R,P){var y;if(M.is(R)?y=R:(y=this.nextId(),P=R),this._annotations[y]!==void 0)throw new Error("Id "+y+" is already in use.");if(P===void 0)throw new Error("No annotation provided for id "+y);return this._annotations[y]=P,this._size++,y},d.prototype.nextId=function(){return this._counter++,this._counter.toString()},d}(),St=function(){function d(R){var P=this;this._textEditChanges=Object.create(null),R!==void 0?(this._workspaceEdit=R,R.documentChanges?(this._changeAnnotations=new ct(R.changeAnnotations),R.changeAnnotations=this._changeAnnotations.all(),R.documentChanges.forEach(function(y){if(X.is(y)){var m=new Fe(y.edits,P._changeAnnotations);P._textEditChanges[y.textDocument.uri]=m}})):R.changes&&Object.keys(R.changes).forEach(function(y){var m=new Fe(R.changes[y]);P._textEditChanges[y]=m})):this._workspaceEdit={}}return Object.defineProperty(d.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),d.prototype.getTextEditChange=function(R){if($e.is(R)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var P={uri:R.uri,version:R.version},y=this._textEditChanges[P.uri];if(!y){var m=[],x={textDocument:P,edits:m};this._workspaceEdit.documentChanges.push(x),y=new Fe(m,this._changeAnnotations),this._textEditChanges[P.uri]=y}return y}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var y=this._textEditChanges[R];if(!y){var m=[];this._workspaceEdit.changes[R]=m,y=new Fe(m),this._textEditChanges[R]=y}return y}},d.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new ct,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},d.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},d.prototype.createFile=function(R,P,y){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var m;z.is(P)||M.is(P)?m=P:y=P;var x,I;if(m===void 0?x=_e.create(R,y):(I=M.is(m)?m:this._changeAnnotations.manage(m),x=_e.create(R,y,I)),this._workspaceEdit.documentChanges.push(x),I!==void 0)return I},d.prototype.renameFile=function(R,P,y,m){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var x;z.is(y)||M.is(y)?x=y:m=y;var I,Y;if(x===void 0?I=Ae.create(R,P,m):(Y=M.is(x)?x:this._changeAnnotations.manage(x),I=Ae.create(R,P,m,Y)),this._workspaceEdit.documentChanges.push(I),Y!==void 0)return Y},d.prototype.deleteFile=function(R,P,y){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var m;z.is(P)||M.is(P)?m=P:y=P;var x,I;if(m===void 0?x=Je.create(R,y):(I=M.is(m)?m:this._changeAnnotations.manage(m),x=Je.create(R,y,I)),this._workspaceEdit.documentChanges.push(x),I!==void 0)return I},d}();e.WorkspaceChange=St;var Tt;(function(d){function R(y){return{uri:y}}d.create=R;function P(y){var m=y;return f.defined(m)&&f.string(m.uri)}d.is=P})(Tt=e.TextDocumentIdentifier||(e.TextDocumentIdentifier={}));var Wt;(function(d){function R(y,m){return{uri:y,version:m}}d.create=R;function P(y){var m=y;return f.defined(m)&&f.string(m.uri)&&f.integer(m.version)}d.is=P})(Wt=e.VersionedTextDocumentIdentifier||(e.VersionedTextDocumentIdentifier={}));var $e;(function(d){function R(y,m){return{uri:y,version:m}}d.create=R;function P(y){var m=y;return f.defined(m)&&f.string(m.uri)&&(m.version===null||f.integer(m.version))}d.is=P})($e=e.OptionalVersionedTextDocumentIdentifier||(e.OptionalVersionedTextDocumentIdentifier={}));var gt;(function(d){function R(y,m,x,I){return{uri:y,languageId:m,version:x,text:I}}d.create=R;function P(y){var m=y;return f.defined(m)&&f.string(m.uri)&&f.string(m.languageId)&&f.integer(m.version)&&f.string(m.text)}d.is=P})(gt=e.TextDocumentItem||(e.TextDocumentItem={}));var mt;(function(d){d.PlainText="plaintext",d.Markdown="markdown"})(mt=e.MarkupKind||(e.MarkupKind={})),function(d){function R(P){var y=P;return y===d.PlainText||y===d.Markdown}d.is=R}(mt=e.MarkupKind||(e.MarkupKind={}));var ut;(function(d){function R(P){var y=P;return f.objectLiteral(P)&&mt.is(y.kind)&&f.string(y.value)}d.is=R})(ut=e.MarkupContent||(e.MarkupContent={}));var Pt;(function(d){d.Text=1,d.Method=2,d.Function=3,d.Constructor=4,d.Field=5,d.Variable=6,d.Class=7,d.Interface=8,d.Module=9,d.Property=10,d.Unit=11,d.Value=12,d.Enum=13,d.Keyword=14,d.Snippet=15,d.Color=16,d.File=17,d.Reference=18,d.Folder=19,d.EnumMember=20,d.Constant=21,d.Struct=22,d.Event=23,d.Operator=24,d.TypeParameter=25})(Pt=e.CompletionItemKind||(e.CompletionItemKind={}));var Ot;(function(d){d.PlainText=1,d.Snippet=2})(Ot=e.InsertTextFormat||(e.InsertTextFormat={}));var Jr;(function(d){d.Deprecated=1})(Jr=e.CompletionItemTag||(e.CompletionItemTag={}));var Zr;(function(d){function R(y,m,x){return{newText:y,insert:m,replace:x}}d.create=R;function P(y){var m=y;return m&&f.string(m.newText)&&s.is(m.insert)&&s.is(m.replace)}d.is=P})(Zr=e.InsertReplaceEdit||(e.InsertReplaceEdit={}));var Or;(function(d){d.asIs=1,d.adjustIndentation=2})(Or=e.InsertTextMode||(e.InsertTextMode={}));var nt;(function(d){function R(P){var y=P;return y&&(f.string(y.detail)||y.detail===void 0)&&(f.string(y.description)||y.description===void 0)}d.is=R})(nt=e.CompletionItemLabelDetails||(e.CompletionItemLabelDetails={}));var lt;(function(d){function R(P){return{label:P}}d.create=R})(lt=e.CompletionItem||(e.CompletionItem={}));var gr;(function(d){function R(P,y){return{items:P||[],isIncomplete:!!y}}d.create=R})(gr=e.CompletionList||(e.CompletionList={}));var cr;(function(d){function R(y){return y.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}d.fromPlainText=R;function P(y){var m=y;return f.string(m)||f.objectLiteral(m)&&f.string(m.language)&&f.string(m.value)}d.is=P})(cr=e.MarkedString||(e.MarkedString={}));var dt;(function(d){function R(P){var y=P;return!!y&&f.objectLiteral(y)&&(ut.is(y.contents)||cr.is(y.contents)||f.typedArray(y.contents,cr.is))&&(P.range===void 0||s.is(P.range))}d.is=R})(dt=e.Hover||(e.Hover={}));var mr;(function(d){function R(P,y){return y?{label:P,documentation:y}:{label:P}}d.create=R})(mr=e.ParameterInformation||(e.ParameterInformation={}));var Ar;(function(d){function R(P,y){for(var m=[],x=2;x<arguments.length;x++)m[x-2]=arguments[x];var I={label:P};return f.defined(y)&&(I.documentation=y),f.defined(m)?I.parameters=m:I.parameters=[],I}d.create=R})(Ar=e.SignatureInformation||(e.SignatureInformation={}));var Ht;(function(d){d.Text=1,d.Read=2,d.Write=3})(Ht=e.DocumentHighlightKind||(e.DocumentHighlightKind={}));var Fr;(function(d){function R(P,y){var m={range:P};return f.number(y)&&(m.kind=y),m}d.create=R})(Fr=e.DocumentHighlight||(e.DocumentHighlight={}));var At;(function(d){d.File=1,d.Module=2,d.Namespace=3,d.Package=4,d.Class=5,d.Method=6,d.Property=7,d.Field=8,d.Constructor=9,d.Enum=10,d.Interface=11,d.Function=12,d.Variable=13,d.Constant=14,d.String=15,d.Number=16,d.Boolean=17,d.Array=18,d.Object=19,d.Key=20,d.Null=21,d.EnumMember=22,d.Struct=23,d.Event=24,d.Operator=25,d.TypeParameter=26})(At=e.SymbolKind||(e.SymbolKind={}));var vr;(function(d){d.Deprecated=1})(vr=e.SymbolTag||(e.SymbolTag={}));var ke;(function(d){function R(P,y,m,x,I){var Y={name:P,kind:y,location:{uri:x,range:m}};return I&&(Y.containerName=I),Y}d.create=R})(ke=e.SymbolInformation||(e.SymbolInformation={}));var Dt;(function(d){function R(y,m,x,I,Y,be){var we={name:y,detail:m,kind:x,range:I,selectionRange:Y};return be!==void 0&&(we.children=be),we}d.create=R;function P(y){var m=y;return m&&f.string(m.name)&&f.number(m.kind)&&s.is(m.range)&&s.is(m.selectionRange)&&(m.detail===void 0||f.string(m.detail))&&(m.deprecated===void 0||f.boolean(m.deprecated))&&(m.children===void 0||Array.isArray(m.children))&&(m.tags===void 0||Array.isArray(m.tags))}d.is=P})(Dt=e.DocumentSymbol||(e.DocumentSymbol={}));var Ir;(function(d){d.Empty="",d.QuickFix="quickfix",d.Refactor="refactor",d.RefactorExtract="refactor.extract",d.RefactorInline="refactor.inline",d.RefactorRewrite="refactor.rewrite",d.Source="source",d.SourceOrganizeImports="source.organizeImports",d.SourceFixAll="source.fixAll"})(Ir=e.CodeActionKind||(e.CodeActionKind={}));var yr;(function(d){function R(y,m){var x={diagnostics:y};return m!=null&&(x.only=m),x}d.create=R;function P(y){var m=y;return f.defined(m)&&f.typedArray(m.diagnostics,A.is)&&(m.only===void 0||f.typedArray(m.only,f.string))}d.is=P})(yr=e.CodeActionContext||(e.CodeActionContext={}));var zt;(function(d){function R(y,m,x){var I={title:y},Y=!0;return typeof m=="string"?(Y=!1,I.kind=m):H.is(m)?I.command=m:I.edit=m,Y&&x!==void 0&&(I.kind=x),I}d.create=R;function P(y){var m=y;return m&&f.string(m.title)&&(m.diagnostics===void 0||f.typedArray(m.diagnostics,A.is))&&(m.kind===void 0||f.string(m.kind))&&(m.edit!==void 0||m.command!==void 0)&&(m.command===void 0||H.is(m.command))&&(m.isPreferred===void 0||f.boolean(m.isPreferred))&&(m.edit===void 0||je.is(m.edit))}d.is=P})(zt=e.CodeAction||(e.CodeAction={}));var Zt;(function(d){function R(y,m){var x={range:y};return f.defined(m)&&(x.data=m),x}d.create=R;function P(y){var m=y;return f.defined(m)&&s.is(m.range)&&(f.undefined(m.command)||H.is(m.command))}d.is=P})(Zt=e.CodeLens||(e.CodeLens={}));var Ze;(function(d){function R(y,m){return{tabSize:y,insertSpaces:m}}d.create=R;function P(y){var m=y;return f.defined(m)&&f.uinteger(m.tabSize)&&f.boolean(m.insertSpaces)}d.is=P})(Ze=e.FormattingOptions||(e.FormattingOptions={}));var Bt;(function(d){function R(y,m,x){return{range:y,target:m,data:x}}d.create=R;function P(y){var m=y;return f.defined(m)&&s.is(m.range)&&(f.undefined(m.target)||f.string(m.target))}d.is=P})(Bt=e.DocumentLink||(e.DocumentLink={}));var er;(function(d){function R(y,m){return{range:y,parent:m}}d.create=R;function P(y){var m=y;return m!==void 0&&s.is(m.range)&&(m.parent===void 0||d.is(m.parent))}d.is=P})(er=e.SelectionRange||(e.SelectionRange={}));var Ut;(function(d){d.namespace="namespace",d.type="type",d.class="class",d.enum="enum",d.interface="interface",d.struct="struct",d.typeParameter="typeParameter",d.parameter="parameter",d.variable="variable",d.property="property",d.enumMember="enumMember",d.event="event",d.function="function",d.method="method",d.macro="macro",d.keyword="keyword",d.modifier="modifier",d.comment="comment",d.string="string",d.number="number",d.regexp="regexp",d.operator="operator"})(Ut=e.SemanticTokenTypes||(e.SemanticTokenTypes={}));var D;(function(d){d.declaration="declaration",d.definition="definition",d.readonly="readonly",d.static="static",d.deprecated="deprecated",d.abstract="abstract",d.async="async",d.modification="modification",d.documentation="documentation",d.defaultLibrary="defaultLibrary"})(D=e.SemanticTokenModifiers||(e.SemanticTokenModifiers={}));var j;(function(d){function R(P){var y=P;return y!==void 0&&(y.resultId===void 0||typeof y.resultId=="string")&&Array.isArray(y.data)&&(y.data.length===0||typeof y.data[0]=="number")}d.is=R})(j=e.SemanticTokens||(e.SemanticTokens={})),e.EOL=[`
`,`\r
`,"\r"];var K;(function(d){function R(x,I,Y,be){return new Q(x,I,Y,be)}d.create=R;function P(x){var I=x;return!!(f.defined(I)&&f.string(I.uri)&&(f.undefined(I.languageId)||f.string(I.languageId))&&f.uinteger(I.lineCount)&&f.func(I.getText)&&f.func(I.positionAt)&&f.func(I.offsetAt))}d.is=P;function y(x,I){for(var Y=x.getText(),be=m(I,function(Ft,en){var br=Ft.range.start.line-en.range.start.line;return br===0?Ft.range.start.character-en.range.start.character:br}),we=Y.length,Kt=be.length-1;Kt>=0;Kt--){var Ye=be[Kt],vt=x.offsetAt(Ye.range.start),le=x.offsetAt(Ye.range.end);if(le<=we)Y=Y.substring(0,vt)+Ye.newText+Y.substring(le,Y.length);else throw new Error("Overlapping edit");we=vt}return Y}d.applyEdits=y;function m(x,I){if(x.length<=1)return x;var Y=x.length/2|0,be=x.slice(0,Y),we=x.slice(Y);m(be,I),m(we,I);for(var Kt=0,Ye=0,vt=0;Kt<be.length&&Ye<we.length;){var le=I(be[Kt],we[Ye]);le<=0?x[vt++]=be[Kt++]:x[vt++]=we[Ye++]}for(;Kt<be.length;)x[vt++]=be[Kt++];for(;Ye<we.length;)x[vt++]=we[Ye++];return x}})(K=e.TextDocument||(e.TextDocument={}));var Q=function(){function d(R,P,y,m){this._uri=R,this._languageId=P,this._version=y,this._content=m,this._lineOffsets=void 0}return Object.defineProperty(d.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),d.prototype.getText=function(R){if(R){var P=this.offsetAt(R.start),y=this.offsetAt(R.end);return this._content.substring(P,y)}return this._content},d.prototype.update=function(R,P){this._content=R.text,this._version=P,this._lineOffsets=void 0},d.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var R=[],P=this._content,y=!0,m=0;m<P.length;m++){y&&(R.push(m),y=!1);var x=P.charAt(m);y=x==="\r"||x===`
`,x==="\r"&&m+1<P.length&&P.charAt(m+1)===`
`&&m++}y&&P.length>0&&R.push(P.length),this._lineOffsets=R}return this._lineOffsets},d.prototype.positionAt=function(R){R=Math.max(Math.min(R,this._content.length),0);var P=this.getLineOffsets(),y=0,m=P.length;if(m===0)return i.create(0,R);for(;y<m;){var x=Math.floor((y+m)/2);P[x]>R?m=x:y=x+1}var I=y-1;return i.create(I,R-P[I])},d.prototype.offsetAt=function(R){var P=this.getLineOffsets();if(R.line>=P.length)return this._content.length;if(R.line<0)return 0;var y=P[R.line],m=R.line+1<P.length?P[R.line+1]:this._content.length;return Math.max(Math.min(y+R.character,m),y)},Object.defineProperty(d.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),d}(),f;(function(d){var R=Object.prototype.toString;function P(le){return typeof le!="undefined"}d.defined=P;function y(le){return typeof le=="undefined"}d.undefined=y;function m(le){return le===!0||le===!1}d.boolean=m;function x(le){return R.call(le)==="[object String]"}d.string=x;function I(le){return R.call(le)==="[object Number]"}d.number=I;function Y(le,Ft,en){return R.call(le)==="[object Number]"&&Ft<=le&&le<=en}d.numberRange=Y;function be(le){return R.call(le)==="[object Number]"&&-2147483648<=le&&le<=2147483647}d.integer=be;function we(le){return R.call(le)==="[object Number]"&&0<=le&&le<=2147483647}d.uinteger=we;function Kt(le){return R.call(le)==="[object Function]"}d.func=Kt;function Ye(le){return le!==null&&typeof le=="object"}d.objectLiteral=Ye;function vt(le,Ft){return Array.isArray(le)&&le.every(Ft)}d.typedArray=vt})(f||(f={}))})});var ht=F(Pr=>{"use strict";Object.defineProperty(Pr,"__esModule",{value:!0});Pr.ProtocolNotificationType=Pr.ProtocolNotificationType0=Pr.ProtocolRequestType=Pr.ProtocolRequestType0=Pr.RegistrationType=void 0;var Hi=ai(),Cg=class{constructor(e){this.method=e}};Pr.RegistrationType=Cg;var Rg=class extends Hi.RequestType0{constructor(e){super(e)}};Pr.ProtocolRequestType0=Rg;var _g=class extends Hi.RequestType{constructor(e){super(e,Hi.ParameterStructures.byName)}};Pr.ProtocolRequestType=_g;var Sg=class extends Hi.NotificationType0{constructor(e){super(e)}};Pr.ProtocolNotificationType0=Sg;var Tg=class extends Hi.NotificationType{constructor(e){super(e,Hi.ParameterStructures.byName)}};Pr.ProtocolNotificationType=Tg});var $u=F(st=>{"use strict";Object.defineProperty(st,"__esModule",{value:!0});st.objectLiteral=st.typedArray=st.stringArray=st.array=st.func=st.error=st.number=st.string=st.boolean=void 0;function MT(r){return r===!0||r===!1}st.boolean=MT;function Pg(r){return typeof r=="string"||r instanceof String}st.string=Pg;function jT(r){return typeof r=="number"||r instanceof Number}st.number=jT;function $T(r){return r instanceof Error}st.error=$T;function WT(r){return typeof r=="function"}st.func=WT;function Dg(r){return Array.isArray(r)}st.array=Dg;function HT(r){return Dg(r)&&r.every(e=>Pg(e))}st.stringArray=HT;function zT(r,e){return Array.isArray(r)&&r.every(e)}st.typedArray=zT;function BT(r){return r!==null&&typeof r=="object"}st.objectLiteral=BT});var Eg=F(Vo=>{"use strict";Object.defineProperty(Vo,"__esModule",{value:!0});Vo.ImplementationRequest=void 0;var UT=ht(),KT;(function(r){r.method="textDocument/implementation",r.type=new UT.ProtocolRequestType(r.method)})(KT=Vo.ImplementationRequest||(Vo.ImplementationRequest={}))});var xg=F(Yo=>{"use strict";Object.defineProperty(Yo,"__esModule",{value:!0});Yo.TypeDefinitionRequest=void 0;var GT=ht(),VT;(function(r){r.method="textDocument/typeDefinition",r.type=new GT.ProtocolRequestType(r.method)})(VT=Yo.TypeDefinitionRequest||(Yo.TypeDefinitionRequest={}))});var qg=F(In=>{"use strict";Object.defineProperty(In,"__esModule",{value:!0});In.DidChangeWorkspaceFoldersNotification=In.WorkspaceFoldersRequest=void 0;var kg=ht(),YT;(function(r){r.type=new kg.ProtocolRequestType0("workspace/workspaceFolders")})(YT=In.WorkspaceFoldersRequest||(In.WorkspaceFoldersRequest={}));var XT;(function(r){r.type=new kg.ProtocolNotificationType("workspace/didChangeWorkspaceFolders")})(XT=In.DidChangeWorkspaceFoldersNotification||(In.DidChangeWorkspaceFoldersNotification={}))});var Og=F(Xo=>{"use strict";Object.defineProperty(Xo,"__esModule",{value:!0});Xo.ConfigurationRequest=void 0;var QT=ht(),JT;(function(r){r.type=new QT.ProtocolRequestType("workspace/configuration")})(JT=Xo.ConfigurationRequest||(Xo.ConfigurationRequest={}))});var Fg=F(Ln=>{"use strict";Object.defineProperty(Ln,"__esModule",{value:!0});Ln.ColorPresentationRequest=Ln.DocumentColorRequest=void 0;var Ag=ht(),ZT;(function(r){r.method="textDocument/documentColor",r.type=new Ag.ProtocolRequestType(r.method)})(ZT=Ln.DocumentColorRequest||(Ln.DocumentColorRequest={}));var eP;(function(r){r.type=new Ag.ProtocolRequestType("textDocument/colorPresentation")})(eP=Ln.ColorPresentationRequest||(Ln.ColorPresentationRequest={}))});var Ig=F(Nn=>{"use strict";Object.defineProperty(Nn,"__esModule",{value:!0});Nn.FoldingRangeRequest=Nn.FoldingRangeKind=void 0;var tP=ht(),rP;(function(r){r.Comment="comment",r.Imports="imports",r.Region="region"})(rP=Nn.FoldingRangeKind||(Nn.FoldingRangeKind={}));var nP;(function(r){r.method="textDocument/foldingRange",r.type=new tP.ProtocolRequestType(r.method)})(nP=Nn.FoldingRangeRequest||(Nn.FoldingRangeRequest={}))});var Lg=F(Qo=>{"use strict";Object.defineProperty(Qo,"__esModule",{value:!0});Qo.DeclarationRequest=void 0;var iP=ht(),oP;(function(r){r.method="textDocument/declaration",r.type=new iP.ProtocolRequestType(r.method)})(oP=Qo.DeclarationRequest||(Qo.DeclarationRequest={}))});var Ng=F(Jo=>{"use strict";Object.defineProperty(Jo,"__esModule",{value:!0});Jo.SelectionRangeRequest=void 0;var sP=ht(),aP;(function(r){r.method="textDocument/selectionRange",r.type=new sP.ProtocolRequestType(r.method)})(aP=Jo.SelectionRangeRequest||(Jo.SelectionRangeRequest={}))});var jg=F(Hr=>{"use strict";Object.defineProperty(Hr,"__esModule",{value:!0});Hr.WorkDoneProgressCancelNotification=Hr.WorkDoneProgressCreateRequest=Hr.WorkDoneProgress=void 0;var cP=ai(),Mg=ht(),uP;(function(r){r.type=new cP.ProgressType;function e(t){return t===r.type}r.is=e})(uP=Hr.WorkDoneProgress||(Hr.WorkDoneProgress={}));var lP;(function(r){r.type=new Mg.ProtocolRequestType("window/workDoneProgress/create")})(lP=Hr.WorkDoneProgressCreateRequest||(Hr.WorkDoneProgressCreateRequest={}));var dP;(function(r){r.type=new Mg.ProtocolNotificationType("window/workDoneProgress/cancel")})(dP=Hr.WorkDoneProgressCancelNotification||(Hr.WorkDoneProgressCancelNotification={}))});var $g=F(zr=>{"use strict";Object.defineProperty(zr,"__esModule",{value:!0});zr.CallHierarchyOutgoingCallsRequest=zr.CallHierarchyIncomingCallsRequest=zr.CallHierarchyPrepareRequest=void 0;var Wu=ht(),fP;(function(r){r.method="textDocument/prepareCallHierarchy",r.type=new Wu.ProtocolRequestType(r.method)})(fP=zr.CallHierarchyPrepareRequest||(zr.CallHierarchyPrepareRequest={}));var hP;(function(r){r.method="callHierarchy/incomingCalls",r.type=new Wu.ProtocolRequestType(r.method)})(hP=zr.CallHierarchyIncomingCallsRequest||(zr.CallHierarchyIncomingCallsRequest={}));var pP;(function(r){r.method="callHierarchy/outgoingCalls",r.type=new Wu.ProtocolRequestType(r.method)})(pP=zr.CallHierarchyOutgoingCallsRequest||(zr.CallHierarchyOutgoingCallsRequest={}))});var Wg=F(at=>{"use strict";Object.defineProperty(at,"__esModule",{value:!0});at.SemanticTokensRefreshRequest=at.SemanticTokensRangeRequest=at.SemanticTokensDeltaRequest=at.SemanticTokensRequest=at.SemanticTokensRegistrationType=at.TokenFormat=void 0;var Zo=ht(),gP;(function(r){r.Relative="relative"})(gP=at.TokenFormat||(at.TokenFormat={}));var mP;(function(r){r.method="textDocument/semanticTokens",r.type=new Zo.RegistrationType(r.method)})(mP=at.SemanticTokensRegistrationType||(at.SemanticTokensRegistrationType={}));var vP;(function(r){r.method="textDocument/semanticTokens/full",r.type=new Zo.ProtocolRequestType(r.method)})(vP=at.SemanticTokensRequest||(at.SemanticTokensRequest={}));var yP;(function(r){r.method="textDocument/semanticTokens/full/delta",r.type=new Zo.ProtocolRequestType(r.method)})(yP=at.SemanticTokensDeltaRequest||(at.SemanticTokensDeltaRequest={}));var bP;(function(r){r.method="textDocument/semanticTokens/range",r.type=new Zo.ProtocolRequestType(r.method)})(bP=at.SemanticTokensRangeRequest||(at.SemanticTokensRangeRequest={}));var wP;(function(r){r.method="workspace/semanticTokens/refresh",r.type=new Zo.ProtocolRequestType0(r.method)})(wP=at.SemanticTokensRefreshRequest||(at.SemanticTokensRefreshRequest={}))});var Hg=F(es=>{"use strict";Object.defineProperty(es,"__esModule",{value:!0});es.ShowDocumentRequest=void 0;var CP=ht(),RP;(function(r){r.method="window/showDocument",r.type=new CP.ProtocolRequestType(r.method)})(RP=es.ShowDocumentRequest||(es.ShowDocumentRequest={}))});var zg=F(ts=>{"use strict";Object.defineProperty(ts,"__esModule",{value:!0});ts.LinkedEditingRangeRequest=void 0;var _P=ht(),SP;(function(r){r.method="textDocument/linkedEditingRange",r.type=new _P.ProtocolRequestType(r.method)})(SP=ts.LinkedEditingRangeRequest||(ts.LinkedEditingRangeRequest={}))});var Bg=F(Ge=>{"use strict";Object.defineProperty(Ge,"__esModule",{value:!0});Ge.WillDeleteFilesRequest=Ge.DidDeleteFilesNotification=Ge.DidRenameFilesNotification=Ge.WillRenameFilesRequest=Ge.DidCreateFilesNotification=Ge.WillCreateFilesRequest=Ge.FileOperationPatternKind=void 0;var zi=ht(),TP;(function(r){r.file="file",r.folder="folder"})(TP=Ge.FileOperationPatternKind||(Ge.FileOperationPatternKind={}));var PP;(function(r){r.method="workspace/willCreateFiles",r.type=new zi.ProtocolRequestType(r.method)})(PP=Ge.WillCreateFilesRequest||(Ge.WillCreateFilesRequest={}));var DP;(function(r){r.method="workspace/didCreateFiles",r.type=new zi.ProtocolNotificationType(r.method)})(DP=Ge.DidCreateFilesNotification||(Ge.DidCreateFilesNotification={}));var EP;(function(r){r.method="workspace/willRenameFiles",r.type=new zi.ProtocolRequestType(r.method)})(EP=Ge.WillRenameFilesRequest||(Ge.WillRenameFilesRequest={}));var xP;(function(r){r.method="workspace/didRenameFiles",r.type=new zi.ProtocolNotificationType(r.method)})(xP=Ge.DidRenameFilesNotification||(Ge.DidRenameFilesNotification={}));var kP;(function(r){r.method="workspace/didDeleteFiles",r.type=new zi.ProtocolNotificationType(r.method)})(kP=Ge.DidDeleteFilesNotification||(Ge.DidDeleteFilesNotification={}));var qP;(function(r){r.method="workspace/willDeleteFiles",r.type=new zi.ProtocolRequestType(r.method)})(qP=Ge.WillDeleteFilesRequest||(Ge.WillDeleteFilesRequest={}))});var Ug=F(Br=>{"use strict";Object.defineProperty(Br,"__esModule",{value:!0});Br.MonikerRequest=Br.MonikerKind=Br.UniquenessLevel=void 0;var OP=ht(),AP;(function(r){r.document="document",r.project="project",r.group="group",r.scheme="scheme",r.global="global"})(AP=Br.UniquenessLevel||(Br.UniquenessLevel={}));var FP;(function(r){r.import="import",r.export="export",r.local="local"})(FP=Br.MonikerKind||(Br.MonikerKind={}));var IP;(function(r){r.method="textDocument/moniker",r.type=new OP.ProtocolRequestType(r.method)})(IP=Br.MonikerRequest||(Br.MonikerRequest={}))});var Xg=F(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0});_.DocumentLinkRequest=_.CodeLensRefreshRequest=_.CodeLensResolveRequest=_.CodeLensRequest=_.WorkspaceSymbolRequest=_.CodeActionResolveRequest=_.CodeActionRequest=_.DocumentSymbolRequest=_.DocumentHighlightRequest=_.ReferencesRequest=_.DefinitionRequest=_.SignatureHelpRequest=_.SignatureHelpTriggerKind=_.HoverRequest=_.CompletionResolveRequest=_.CompletionRequest=_.CompletionTriggerKind=_.PublishDiagnosticsNotification=_.WatchKind=_.FileChangeType=_.DidChangeWatchedFilesNotification=_.WillSaveTextDocumentWaitUntilRequest=_.WillSaveTextDocumentNotification=_.TextDocumentSaveReason=_.DidSaveTextDocumentNotification=_.DidCloseTextDocumentNotification=_.DidChangeTextDocumentNotification=_.TextDocumentContentChangeEvent=_.DidOpenTextDocumentNotification=_.TextDocumentSyncKind=_.TelemetryEventNotification=_.LogMessageNotification=_.ShowMessageRequest=_.ShowMessageNotification=_.MessageType=_.DidChangeConfigurationNotification=_.ExitNotification=_.ShutdownRequest=_.InitializedNotification=_.InitializeError=_.InitializeRequest=_.WorkDoneProgressOptions=_.TextDocumentRegistrationOptions=_.StaticRegistrationOptions=_.FailureHandlingKind=_.ResourceOperationKind=_.UnregistrationRequest=_.RegistrationRequest=_.DocumentSelector=_.DocumentFilter=void 0;_.MonikerRequest=_.MonikerKind=_.UniquenessLevel=_.WillDeleteFilesRequest=_.DidDeleteFilesNotification=_.WillRenameFilesRequest=_.DidRenameFilesNotification=_.WillCreateFilesRequest=_.DidCreateFilesNotification=_.FileOperationPatternKind=_.LinkedEditingRangeRequest=_.ShowDocumentRequest=_.SemanticTokensRegistrationType=_.SemanticTokensRefreshRequest=_.SemanticTokensRangeRequest=_.SemanticTokensDeltaRequest=_.SemanticTokensRequest=_.TokenFormat=_.CallHierarchyPrepareRequest=_.CallHierarchyOutgoingCallsRequest=_.CallHierarchyIncomingCallsRequest=_.WorkDoneProgressCancelNotification=_.WorkDoneProgressCreateRequest=_.WorkDoneProgress=_.SelectionRangeRequest=_.DeclarationRequest=_.FoldingRangeRequest=_.ColorPresentationRequest=_.DocumentColorRequest=_.ConfigurationRequest=_.DidChangeWorkspaceFoldersNotification=_.WorkspaceFoldersRequest=_.TypeDefinitionRequest=_.ImplementationRequest=_.ApplyWorkspaceEditRequest=_.ExecuteCommandRequest=_.PrepareRenameRequest=_.RenameRequest=_.PrepareSupportDefaultBehavior=_.DocumentOnTypeFormattingRequest=_.DocumentRangeFormattingRequest=_.DocumentFormattingRequest=_.DocumentLinkResolveRequest=void 0;var de=ht(),Mn=$u(),LP=Eg();Object.defineProperty(_,"ImplementationRequest",{enumerable:!0,get:function(){return LP.ImplementationRequest}});var NP=xg();Object.defineProperty(_,"TypeDefinitionRequest",{enumerable:!0,get:function(){return NP.TypeDefinitionRequest}});var Kg=qg();Object.defineProperty(_,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return Kg.WorkspaceFoldersRequest}});Object.defineProperty(_,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return Kg.DidChangeWorkspaceFoldersNotification}});var MP=Og();Object.defineProperty(_,"ConfigurationRequest",{enumerable:!0,get:function(){return MP.ConfigurationRequest}});var Gg=Fg();Object.defineProperty(_,"DocumentColorRequest",{enumerable:!0,get:function(){return Gg.DocumentColorRequest}});Object.defineProperty(_,"ColorPresentationRequest",{enumerable:!0,get:function(){return Gg.ColorPresentationRequest}});var jP=Ig();Object.defineProperty(_,"FoldingRangeRequest",{enumerable:!0,get:function(){return jP.FoldingRangeRequest}});var $P=Lg();Object.defineProperty(_,"DeclarationRequest",{enumerable:!0,get:function(){return $P.DeclarationRequest}});var WP=Ng();Object.defineProperty(_,"SelectionRangeRequest",{enumerable:!0,get:function(){return WP.SelectionRangeRequest}});var Hu=jg();Object.defineProperty(_,"WorkDoneProgress",{enumerable:!0,get:function(){return Hu.WorkDoneProgress}});Object.defineProperty(_,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return Hu.WorkDoneProgressCreateRequest}});Object.defineProperty(_,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return Hu.WorkDoneProgressCancelNotification}});var zu=$g();Object.defineProperty(_,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return zu.CallHierarchyIncomingCallsRequest}});Object.defineProperty(_,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return zu.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(_,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return zu.CallHierarchyPrepareRequest}});var Bi=Wg();Object.defineProperty(_,"TokenFormat",{enumerable:!0,get:function(){return Bi.TokenFormat}});Object.defineProperty(_,"SemanticTokensRequest",{enumerable:!0,get:function(){return Bi.SemanticTokensRequest}});Object.defineProperty(_,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return Bi.SemanticTokensDeltaRequest}});Object.defineProperty(_,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return Bi.SemanticTokensRangeRequest}});Object.defineProperty(_,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return Bi.SemanticTokensRefreshRequest}});Object.defineProperty(_,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return Bi.SemanticTokensRegistrationType}});var HP=Hg();Object.defineProperty(_,"ShowDocumentRequest",{enumerable:!0,get:function(){return HP.ShowDocumentRequest}});var zP=zg();Object.defineProperty(_,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return zP.LinkedEditingRangeRequest}});var ci=Bg();Object.defineProperty(_,"FileOperationPatternKind",{enumerable:!0,get:function(){return ci.FileOperationPatternKind}});Object.defineProperty(_,"DidCreateFilesNotification",{enumerable:!0,get:function(){return ci.DidCreateFilesNotification}});Object.defineProperty(_,"WillCreateFilesRequest",{enumerable:!0,get:function(){return ci.WillCreateFilesRequest}});Object.defineProperty(_,"DidRenameFilesNotification",{enumerable:!0,get:function(){return ci.DidRenameFilesNotification}});Object.defineProperty(_,"WillRenameFilesRequest",{enumerable:!0,get:function(){return ci.WillRenameFilesRequest}});Object.defineProperty(_,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return ci.DidDeleteFilesNotification}});Object.defineProperty(_,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return ci.WillDeleteFilesRequest}});var Bu=Ug();Object.defineProperty(_,"UniquenessLevel",{enumerable:!0,get:function(){return Bu.UniquenessLevel}});Object.defineProperty(_,"MonikerKind",{enumerable:!0,get:function(){return Bu.MonikerKind}});Object.defineProperty(_,"MonikerRequest",{enumerable:!0,get:function(){return Bu.MonikerRequest}});var Vg;(function(r){function e(t){let n=t;return Mn.string(n.language)||Mn.string(n.scheme)||Mn.string(n.pattern)}r.is=e})(Vg=_.DocumentFilter||(_.DocumentFilter={}));var Yg;(function(r){function e(t){if(!Array.isArray(t))return!1;for(let n of t)if(!Mn.string(n)&&!Vg.is(n))return!1;return!0}r.is=e})(Yg=_.DocumentSelector||(_.DocumentSelector={}));var BP;(function(r){r.type=new de.ProtocolRequestType("client/registerCapability")})(BP=_.RegistrationRequest||(_.RegistrationRequest={}));var UP;(function(r){r.type=new de.ProtocolRequestType("client/unregisterCapability")})(UP=_.UnregistrationRequest||(_.UnregistrationRequest={}));var KP;(function(r){r.Create="create",r.Rename="rename",r.Delete="delete"})(KP=_.ResourceOperationKind||(_.ResourceOperationKind={}));var GP;(function(r){r.Abort="abort",r.Transactional="transactional",r.TextOnlyTransactional="textOnlyTransactional",r.Undo="undo"})(GP=_.FailureHandlingKind||(_.FailureHandlingKind={}));var VP;(function(r){function e(t){let n=t;return n&&Mn.string(n.id)&&n.id.length>0}r.hasId=e})(VP=_.StaticRegistrationOptions||(_.StaticRegistrationOptions={}));var YP;(function(r){function e(t){let n=t;return n&&(n.documentSelector===null||Yg.is(n.documentSelector))}r.is=e})(YP=_.TextDocumentRegistrationOptions||(_.TextDocumentRegistrationOptions={}));var XP;(function(r){function e(n){let i=n;return Mn.objectLiteral(i)&&(i.workDoneProgress===void 0||Mn.boolean(i.workDoneProgress))}r.is=e;function t(n){let i=n;return i&&Mn.boolean(i.workDoneProgress)}r.hasWorkDoneProgress=t})(XP=_.WorkDoneProgressOptions||(_.WorkDoneProgressOptions={}));var QP;(function(r){r.type=new de.ProtocolRequestType("initialize")})(QP=_.InitializeRequest||(_.InitializeRequest={}));var JP;(function(r){r.unknownProtocolVersion=1})(JP=_.InitializeError||(_.InitializeError={}));var ZP;(function(r){r.type=new de.ProtocolNotificationType("initialized")})(ZP=_.InitializedNotification||(_.InitializedNotification={}));var eD;(function(r){r.type=new de.ProtocolRequestType0("shutdown")})(eD=_.ShutdownRequest||(_.ShutdownRequest={}));var tD;(function(r){r.type=new de.ProtocolNotificationType0("exit")})(tD=_.ExitNotification||(_.ExitNotification={}));var rD;(function(r){r.type=new de.ProtocolNotificationType("workspace/didChangeConfiguration")})(rD=_.DidChangeConfigurationNotification||(_.DidChangeConfigurationNotification={}));var nD;(function(r){r.Error=1,r.Warning=2,r.Info=3,r.Log=4})(nD=_.MessageType||(_.MessageType={}));var iD;(function(r){r.type=new de.ProtocolNotificationType("window/showMessage")})(iD=_.ShowMessageNotification||(_.ShowMessageNotification={}));var oD;(function(r){r.type=new de.ProtocolRequestType("window/showMessageRequest")})(oD=_.ShowMessageRequest||(_.ShowMessageRequest={}));var sD;(function(r){r.type=new de.ProtocolNotificationType("window/logMessage")})(sD=_.LogMessageNotification||(_.LogMessageNotification={}));var aD;(function(r){r.type=new de.ProtocolNotificationType("telemetry/event")})(aD=_.TelemetryEventNotification||(_.TelemetryEventNotification={}));var cD;(function(r){r.None=0,r.Full=1,r.Incremental=2})(cD=_.TextDocumentSyncKind||(_.TextDocumentSyncKind={}));var uD;(function(r){r.method="textDocument/didOpen",r.type=new de.ProtocolNotificationType(r.method)})(uD=_.DidOpenTextDocumentNotification||(_.DidOpenTextDocumentNotification={}));var lD;(function(r){function e(n){let i=n;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}r.isIncremental=e;function t(n){let i=n;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}r.isFull=t})(lD=_.TextDocumentContentChangeEvent||(_.TextDocumentContentChangeEvent={}));var dD;(function(r){r.method="textDocument/didChange",r.type=new de.ProtocolNotificationType(r.method)})(dD=_.DidChangeTextDocumentNotification||(_.DidChangeTextDocumentNotification={}));var fD;(function(r){r.method="textDocument/didClose",r.type=new de.ProtocolNotificationType(r.method)})(fD=_.DidCloseTextDocumentNotification||(_.DidCloseTextDocumentNotification={}));var hD;(function(r){r.method="textDocument/didSave",r.type=new de.ProtocolNotificationType(r.method)})(hD=_.DidSaveTextDocumentNotification||(_.DidSaveTextDocumentNotification={}));var pD;(function(r){r.Manual=1,r.AfterDelay=2,r.FocusOut=3})(pD=_.TextDocumentSaveReason||(_.TextDocumentSaveReason={}));var gD;(function(r){r.method="textDocument/willSave",r.type=new de.ProtocolNotificationType(r.method)})(gD=_.WillSaveTextDocumentNotification||(_.WillSaveTextDocumentNotification={}));var mD;(function(r){r.method="textDocument/willSaveWaitUntil",r.type=new de.ProtocolRequestType(r.method)})(mD=_.WillSaveTextDocumentWaitUntilRequest||(_.WillSaveTextDocumentWaitUntilRequest={}));var vD;(function(r){r.type=new de.ProtocolNotificationType("workspace/didChangeWatchedFiles")})(vD=_.DidChangeWatchedFilesNotification||(_.DidChangeWatchedFilesNotification={}));var yD;(function(r){r.Created=1,r.Changed=2,r.Deleted=3})(yD=_.FileChangeType||(_.FileChangeType={}));var bD;(function(r){r.Create=1,r.Change=2,r.Delete=4})(bD=_.WatchKind||(_.WatchKind={}));var wD;(function(r){r.type=new de.ProtocolNotificationType("textDocument/publishDiagnostics")})(wD=_.PublishDiagnosticsNotification||(_.PublishDiagnosticsNotification={}));var CD;(function(r){r.Invoked=1,r.TriggerCharacter=2,r.TriggerForIncompleteCompletions=3})(CD=_.CompletionTriggerKind||(_.CompletionTriggerKind={}));var RD;(function(r){r.method="textDocument/completion",r.type=new de.ProtocolRequestType(r.method)})(RD=_.CompletionRequest||(_.CompletionRequest={}));var _D;(function(r){r.method="completionItem/resolve",r.type=new de.ProtocolRequestType(r.method)})(_D=_.CompletionResolveRequest||(_.CompletionResolveRequest={}));var SD;(function(r){r.method="textDocument/hover",r.type=new de.ProtocolRequestType(r.method)})(SD=_.HoverRequest||(_.HoverRequest={}));var TD;(function(r){r.Invoked=1,r.TriggerCharacter=2,r.ContentChange=3})(TD=_.SignatureHelpTriggerKind||(_.SignatureHelpTriggerKind={}));var PD;(function(r){r.method="textDocument/signatureHelp",r.type=new de.ProtocolRequestType(r.method)})(PD=_.SignatureHelpRequest||(_.SignatureHelpRequest={}));var DD;(function(r){r.method="textDocument/definition",r.type=new de.ProtocolRequestType(r.method)})(DD=_.DefinitionRequest||(_.DefinitionRequest={}));var ED;(function(r){r.method="textDocument/references",r.type=new de.ProtocolRequestType(r.method)})(ED=_.ReferencesRequest||(_.ReferencesRequest={}));var xD;(function(r){r.method="textDocument/documentHighlight",r.type=new de.ProtocolRequestType(r.method)})(xD=_.DocumentHighlightRequest||(_.DocumentHighlightRequest={}));var kD;(function(r){r.method="textDocument/documentSymbol",r.type=new de.ProtocolRequestType(r.method)})(kD=_.DocumentSymbolRequest||(_.DocumentSymbolRequest={}));var qD;(function(r){r.method="textDocument/codeAction",r.type=new de.ProtocolRequestType(r.method)})(qD=_.CodeActionRequest||(_.CodeActionRequest={}));var OD;(function(r){r.method="codeAction/resolve",r.type=new de.ProtocolRequestType(r.method)})(OD=_.CodeActionResolveRequest||(_.CodeActionResolveRequest={}));var AD;(function(r){r.method="workspace/symbol",r.type=new de.ProtocolRequestType(r.method)})(AD=_.WorkspaceSymbolRequest||(_.WorkspaceSymbolRequest={}));var FD;(function(r){r.method="textDocument/codeLens",r.type=new de.ProtocolRequestType(r.method)})(FD=_.CodeLensRequest||(_.CodeLensRequest={}));var ID;(function(r){r.method="codeLens/resolve",r.type=new de.ProtocolRequestType(r.method)})(ID=_.CodeLensResolveRequest||(_.CodeLensResolveRequest={}));var LD;(function(r){r.method="workspace/codeLens/refresh",r.type=new de.ProtocolRequestType0(r.method)})(LD=_.CodeLensRefreshRequest||(_.CodeLensRefreshRequest={}));var ND;(function(r){r.method="textDocument/documentLink",r.type=new de.ProtocolRequestType(r.method)})(ND=_.DocumentLinkRequest||(_.DocumentLinkRequest={}));var MD;(function(r){r.method="documentLink/resolve",r.type=new de.ProtocolRequestType(r.method)})(MD=_.DocumentLinkResolveRequest||(_.DocumentLinkResolveRequest={}));var jD;(function(r){r.method="textDocument/formatting",r.type=new de.ProtocolRequestType(r.method)})(jD=_.DocumentFormattingRequest||(_.DocumentFormattingRequest={}));var $D;(function(r){r.method="textDocument/rangeFormatting",r.type=new de.ProtocolRequestType(r.method)})($D=_.DocumentRangeFormattingRequest||(_.DocumentRangeFormattingRequest={}));var WD;(function(r){r.method="textDocument/onTypeFormatting",r.type=new de.ProtocolRequestType(r.method)})(WD=_.DocumentOnTypeFormattingRequest||(_.DocumentOnTypeFormattingRequest={}));var HD;(function(r){r.Identifier=1})(HD=_.PrepareSupportDefaultBehavior||(_.PrepareSupportDefaultBehavior={}));var zD;(function(r){r.method="textDocument/rename",r.type=new de.ProtocolRequestType(r.method)})(zD=_.RenameRequest||(_.RenameRequest={}));var BD;(function(r){r.method="textDocument/prepareRename",r.type=new de.ProtocolRequestType(r.method)})(BD=_.PrepareRenameRequest||(_.PrepareRenameRequest={}));var UD;(function(r){r.type=new de.ProtocolRequestType("workspace/executeCommand")})(UD=_.ExecuteCommandRequest||(_.ExecuteCommandRequest={}));var KD;(function(r){r.type=new de.ProtocolRequestType("workspace/applyEdit")})(KD=_.ApplyWorkspaceEditRequest||(_.ApplyWorkspaceEditRequest={}))});var Jg=F(Da=>{"use strict";Object.defineProperty(Da,"__esModule",{value:!0});Da.createProtocolConnection=void 0;var Qg=ai();function GD(r,e,t,n){return Qg.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),Qg.createMessageConnection(r,e,t,n)}Da.createProtocolConnection=GD});var em=F(kt=>{"use strict";Object.defineProperty(kt,"__esModule",{value:!0});kt.DiagnosticRefreshRequest=kt.WorkspaceDiagnosticRequest=kt.DocumentDiagnosticRequest=kt.DocumentDiagnosticReportKind=kt.DiagnosticServerCancellationData=void 0;var Zg=ai(),VD=$u(),Uu=ht(),YD;(function(r){function e(t){let n=t;return n&&VD.boolean(n.retriggerRequest)}r.is=e})(YD=kt.DiagnosticServerCancellationData||(kt.DiagnosticServerCancellationData={}));var XD;(function(r){r.full="full",r.unChanged="unChanged"})(XD=kt.DocumentDiagnosticReportKind||(kt.DocumentDiagnosticReportKind={}));var QD;(function(r){r.method="textDocument/diagnostic",r.type=new Uu.ProtocolRequestType(r.method),r.partialResult=new Zg.ProgressType})(QD=kt.DocumentDiagnosticRequest||(kt.DocumentDiagnosticRequest={}));var JD;(function(r){r.method="workspace/diagnostic",r.type=new Uu.ProtocolRequestType(r.method),r.partialResult=new Zg.ProgressType})(JD=kt.WorkspaceDiagnosticRequest||(kt.WorkspaceDiagnosticRequest={}));var ZD;(function(r){r.method="workspace/diagnostic/refresh",r.type=new Uu.ProtocolRequestType0(r.method)})(ZD=kt.DiagnosticRefreshRequest||(kt.DiagnosticRefreshRequest={}))});var tm=F(bt=>{"use strict";var eE=bt&&bt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Ea=bt&&bt.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&eE(e,r,t)};Object.defineProperty(bt,"__esModule",{value:!0});bt.Proposed=bt.LSPErrorCodes=bt.createProtocolConnection=void 0;Ea(ai(),bt);Ea(wg(),bt);Ea(ht(),bt);Ea(Xg(),bt);var tE=Jg();Object.defineProperty(bt,"createProtocolConnection",{enumerable:!0,get:function(){return tE.createProtocolConnection}});var rE;(function(r){r.lspReservedErrorRangeStart=-32899,r.ServerCancelled=-32802,r.ContentModified=-32801,r.RequestCancelled=-32800,r.lspReservedErrorRangeEnd=-32800})(rE=bt.LSPErrorCodes||(bt.LSPErrorCodes={}));var rs=em(),nE;(function(r){r.DiagnosticServerCancellationData=rs.DiagnosticServerCancellationData,r.DocumentDiagnosticReportKind=rs.DocumentDiagnosticReportKind,r.DocumentDiagnosticRequest=rs.DocumentDiagnosticRequest,r.WorkspaceDiagnosticRequest=rs.WorkspaceDiagnosticRequest,r.DiagnosticRefreshRequest=rs.DiagnosticRefreshRequest})(nE=bt.Proposed||(bt.Proposed={}))});var Be=F(nn=>{"use strict";var iE=nn&&nn.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),rm=nn&&nn.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&iE(e,r,t)};Object.defineProperty(nn,"__esModule",{value:!0});nn.createProtocolConnection=void 0;var oE=ju();rm(ju(),nn);rm(tm(),nn);function sE(r,e,t,n){return oE.createMessageConnection(r,e,t,n)}nn.createProtocolConnection=sE});var Gu=F(Ki=>{"use strict";Object.defineProperty(Ki,"__esModule",{value:!0});Ki.toJSONObject=Ki.ConfigurationFeature=void 0;var Ku=require("vscode"),aE=Be(),nm=class{constructor(e){this._client=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.configuration=!0}initialize(){let e=this._client;e.onRequest(aE.ConfigurationRequest.type,(t,n)=>{let i=a=>{let l=[];for(let u of a.items){let g=u.scopeUri!==void 0&&u.scopeUri!==null?this._client.protocol2CodeConverter.asUri(u.scopeUri):void 0;l.push(this.getConfiguration(g,u.section!==null?u.section:void 0))}return l},s=e.clientOptions.middleware.workspace;return s&&s.configuration?s.configuration(t,n,i):i(t,n)})}getConfiguration(e,t){let n=null;if(t){let i=t.lastIndexOf(".");if(i===-1)n=Ui(Ku.workspace.getConfiguration(void 0,e).get(t));else{let s=Ku.workspace.getConfiguration(t.substr(0,i),e);s&&(n=Ui(s.get(t.substr(i+1))))}}else{let i=Ku.workspace.getConfiguration(void 0,e);n={};for(let s of Object.keys(i))i.has(s)&&(n[s]=Ui(i.get(s)))}return n===void 0&&(n=null),n}dispose(){}};Ki.ConfigurationFeature=nm;function Ui(r){if(r){if(Array.isArray(r))return r.map(Ui);if(typeof r=="object"){let e=Object.create(null);for(let t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=Ui(r[t]));return e}}return r}Ki.toJSONObject=Ui});var Yu=F(Vu=>{"use strict";Object.defineProperty(Vu,"__esModule",{value:!0});var cE=require("vscode"),im=class extends cE.CompletionItem{constructor(e){super(e)}};Vu.default=im});var Qu=F(Xu=>{"use strict";Object.defineProperty(Xu,"__esModule",{value:!0});var uE=require("vscode"),om=class extends uE.CodeLens{constructor(e){super(e)}};Xu.default=om});var Zu=F(Ju=>{"use strict";Object.defineProperty(Ju,"__esModule",{value:!0});var lE=require("vscode"),sm=class extends lE.DocumentLink{constructor(e,t){super(e,t)}};Ju.default=sm});var tl=F(el=>{"use strict";Object.defineProperty(el,"__esModule",{value:!0});var dE=require("vscode"),am=class extends dE.CodeAction{constructor(e,t){super(e);this.data=t}};el.default=am});var nl=F(ui=>{"use strict";Object.defineProperty(ui,"__esModule",{value:!0});ui.ProtocolDiagnostic=ui.DiagnosticCode=void 0;var fE=require("vscode"),rl=yn(),hE;(function(r){function e(t){let n=t;return n!=null&&(rl.number(n.value)||rl.string(n.value))&&rl.string(n.target)}r.is=e})(hE=ui.DiagnosticCode||(ui.DiagnosticCode={}));var cm=class extends fE.Diagnostic{constructor(e,t,n,i){super(e,t,n);this.data=i,this.hasDiagnosticCode=!1}};ui.ProtocolDiagnostic=cm});var ol=F(il=>{"use strict";Object.defineProperty(il,"__esModule",{value:!0});var pE=require("vscode"),um=class extends pE.CallHierarchyItem{constructor(e,t,n,i,s,a,l){super(e,t,n,i,s,a);l!==void 0&&(this.data=l)}};il.default=um});var dm=F(xa=>{"use strict";Object.defineProperty(xa,"__esModule",{value:!0});xa.createConverter=void 0;var wt=require("vscode"),xe=Be(),Gi=yn(),gE=Yu(),mE=Qu(),vE=Zu(),yE=tl(),lm=nl(),bE=ol(),ns=Be(),sl;(function(r){function e(t){let n=t;return n&&!!n.inserting&&!!n.replacing}r.is=e})(sl||(sl={}));function wE(r){let t=r||(f=>f.toString());function n(f){return t(f)}function i(f){return{uri:t(f.uri)}}function s(f){return{uri:t(f.uri),version:f.version}}function a(f){return{textDocument:{uri:t(f.uri),languageId:f.languageId,version:f.version,text:f.getText()}}}function l(f){let d=f;return!!d.document&&!!d.contentChanges}function u(f){let d=f;return!!d.uri&&!!d.version}function g(f){if(u(f))return{textDocument:{uri:t(f.uri),version:f.version},contentChanges:[{text:f.getText()}]};if(l(f)){let d=f.document;return{textDocument:{uri:t(d.uri),version:d.version},contentChanges:f.contentChanges.map(P=>{let y=P.range;return{range:{start:{line:y.start.line,character:y.start.character},end:{line:y.end.line,character:y.end.character}},rangeLength:P.rangeLength,text:P.text}})}}else throw Error("Unsupported text document change parameter")}function v(f){return{textDocument:i(f)}}function b(f,d=!1){let R={textDocument:i(f)};return d&&(R.text=f.getText()),R}function C(f){switch(f){case wt.TextDocumentSaveReason.Manual:return xe.TextDocumentSaveReason.Manual;case wt.TextDocumentSaveReason.AfterDelay:return xe.TextDocumentSaveReason.AfterDelay;case wt.TextDocumentSaveReason.FocusOut:return xe.TextDocumentSaveReason.FocusOut}return xe.TextDocumentSaveReason.Manual}function w(f){return{textDocument:i(f.document),reason:C(f.reason)}}function E(f){return{files:f.files.map(d=>({uri:t(d)}))}}function q(f){return{files:f.files.map(d=>({oldUri:t(d.oldUri),newUri:t(d.newUri)}))}}function N(f){return{files:f.files.map(d=>({uri:t(d)}))}}function A(f){return{files:f.files.map(d=>({uri:t(d)}))}}function H(f){return{files:f.files.map(d=>({oldUri:t(d.oldUri),newUri:t(d.newUri)}))}}function O(f){return{files:f.files.map(d=>({uri:t(d)}))}}function z(f,d){return{textDocument:i(f),position:St(d)}}function M(f){switch(f){case wt.CompletionTriggerKind.TriggerCharacter:return xe.CompletionTriggerKind.TriggerCharacter;case wt.CompletionTriggerKind.TriggerForIncompleteCompletions:return xe.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return xe.CompletionTriggerKind.Invoked}}function G(f,d,R){return{textDocument:i(f),position:St(d),context:{triggerKind:M(R.triggerKind),triggerCharacter:R.triggerCharacter}}}function X(f){switch(f){case wt.SignatureHelpTriggerKind.Invoke:return xe.SignatureHelpTriggerKind.Invoked;case wt.SignatureHelpTriggerKind.TriggerCharacter:return xe.SignatureHelpTriggerKind.TriggerCharacter;case wt.SignatureHelpTriggerKind.ContentChange:return xe.SignatureHelpTriggerKind.ContentChange}}function _e(f){return{label:f.label}}function Ae(f){return f.map(_e)}function Je(f){return{label:f.label,parameters:Ae(f.parameters)}}function je(f){return f.map(Je)}function Fe(f){return f===void 0?f:{signatures:je(f.signatures),activeSignature:f.activeSignature,activeParameter:f.activeParameter}}function ct(f,d,R){return{textDocument:i(f),position:St(d),context:{isRetrigger:R.isRetrigger,triggerCharacter:R.triggerCharacter,triggerKind:X(R.triggerKind),activeSignatureHelp:Fe(R.activeSignatureHelp)}}}function St(f){return{line:f.line,character:f.character}}function Tt(f){return f==null?f:{line:f.line>ns.uinteger.MAX_VALUE?ns.uinteger.MAX_VALUE:f.line,character:f.character>ns.uinteger.MAX_VALUE?ns.uinteger.MAX_VALUE:f.character}}function Wt(f){let d=[];for(let R of f)d.push(Tt(R));return d}function $e(f){return f==null?f:{start:Tt(f.start),end:Tt(f.end)}}function gt(f){return f==null?f:xe.Location.create(n(f.uri),$e(f.range))}function mt(f){switch(f){case wt.DiagnosticSeverity.Error:return xe.DiagnosticSeverity.Error;case wt.DiagnosticSeverity.Warning:return xe.DiagnosticSeverity.Warning;case wt.DiagnosticSeverity.Information:return xe.DiagnosticSeverity.Information;case wt.DiagnosticSeverity.Hint:return xe.DiagnosticSeverity.Hint}}function ut(f){if(!f)return;let d=[];for(let R of f){let P=Pt(R);P!==void 0&&d.push(P)}return d.length>0?d:void 0}function Pt(f){switch(f){case wt.DiagnosticTag.Unnecessary:return xe.DiagnosticTag.Unnecessary;case wt.DiagnosticTag.Deprecated:return xe.DiagnosticTag.Deprecated;default:return}}function Ot(f){return{message:f.message,location:gt(f.location)}}function Jr(f){return f.map(Ot)}function Zr(f){if(f!=null)return Gi.number(f)||Gi.string(f)?f:{value:f.value,target:n(f.target)}}function Or(f){let d=xe.Diagnostic.create($e(f.range),f.message),R=f instanceof lm.ProtocolDiagnostic?f:void 0;R!==void 0&&R.data!==void 0&&(d.data=R.data);let P=Zr(f.code);return lm.DiagnosticCode.is(P)?R!==void 0&&R.hasDiagnosticCode?d.code=P:(d.code=P.value,d.codeDescription={href:P.target}):d.code=P,Gi.number(f.severity)&&(d.severity=mt(f.severity)),Array.isArray(f.tags)&&(d.tags=ut(f.tags)),f.relatedInformation&&(d.relatedInformation=Jr(f.relatedInformation)),f.source&&(d.source=f.source),d}function nt(f){return f==null?f:f.map(Or)}function lt(f,d){switch(f){case"$string":return d;case xe.MarkupKind.PlainText:return{kind:f,value:d};case xe.MarkupKind.Markdown:return{kind:f,value:d.value};default:return`Unsupported Markup content received. Kind is: ${f}`}}function gr(f){switch(f){case wt.CompletionItemTag.Deprecated:return xe.CompletionItemTag.Deprecated}}function cr(f){if(f===void 0)return f;let d=[];for(let R of f){let P=gr(R);P!==void 0&&d.push(P)}return d}function dt(f,d){return d!==void 0?d:f+1}function mr(f,d=!1){let R,P;Gi.string(f.label)?R=f.label:(R=f.label.label,d&&(f.label.detail!==void 0||f.label.description!==void 0)&&(P={detail:f.label.detail,description:f.label.description}));let y={label:R};P!==void 0&&(y.labelDetails=P);let m=f instanceof gE.default?f:void 0;f.detail&&(y.detail=f.detail),f.documentation&&(!m||m.documentationFormat==="$string"?y.documentation=f.documentation:y.documentation=lt(m.documentationFormat,f.documentation)),f.filterText&&(y.filterText=f.filterText),Ar(y,f),Gi.number(f.kind)&&(y.kind=dt(f.kind,m&&m.originalItemKind)),f.sortText&&(y.sortText=f.sortText),f.additionalTextEdits&&(y.additionalTextEdits=At(f.additionalTextEdits)),f.commitCharacters&&(y.commitCharacters=f.commitCharacters.slice()),f.command&&(y.command=Ze(f.command)),(f.preselect===!0||f.preselect===!1)&&(y.preselect=f.preselect);let x=cr(f.tags);if(m){if(m.data!==void 0&&(y.data=m.data),m.deprecated===!0||m.deprecated===!1){if(m.deprecated===!0&&x!==void 0&&x.length>0){let I=x.indexOf(wt.CompletionItemTag.Deprecated);I!==-1&&x.splice(I,1)}y.deprecated=m.deprecated}m.insertTextMode!==void 0&&(y.insertTextMode=m.insertTextMode)}return x!==void 0&&x.length>0&&(y.tags=x),y.insertTextMode===void 0&&f.keepWhitespace===!0&&(y.insertTextMode=ns.InsertTextMode.adjustIndentation),y}function Ar(f,d){let R=xe.InsertTextFormat.PlainText,P,y;d.textEdit?(P=d.textEdit.newText,y=d.textEdit.range):d.insertText instanceof wt.SnippetString?(R=xe.InsertTextFormat.Snippet,P=d.insertText.value):P=d.insertText,d.range&&(y=d.range),f.insertTextFormat=R,d.fromEdit&&P!==void 0&&y!==void 0?f.textEdit=Ht(P,y):f.insertText=P}function Ht(f,d){return sl.is(d)?xe.InsertReplaceEdit.create(f,$e(d.inserting),$e(d.replacing)):{newText:f,range:$e(d)}}function Fr(f){return{range:$e(f.range),newText:f.newText}}function At(f){return f==null?f:f.map(Fr)}function vr(f){return f<=wt.SymbolKind.TypeParameter?f+1:xe.SymbolKind.Property}function ke(f){return f}function Dt(f){return f.map(ke)}function Ir(f,d,R){return{textDocument:i(f),position:St(d),context:{includeDeclaration:R.includeDeclaration}}}function yr(f){let d=xe.CodeAction.create(f.title);if(f instanceof yE.default&&f.data!==void 0&&(d.data=f.data),f.kind!==void 0&&(d.kind=Zt(f.kind)),f.diagnostics!==void 0&&(d.diagnostics=nt(f.diagnostics)),f.edit!==void 0)throw new Error("VS Code code actions can only be converted to a protocol code action without an edit.");return f.command!==void 0&&(d.command=Ze(f.command)),f.isPreferred!==void 0&&(d.isPreferred=f.isPreferred),f.disabled!==void 0&&(d.disabled={reason:f.disabled.reason}),d}function zt(f){if(f==null)return f;let d;return f.only&&Gi.string(f.only.value)&&(d=[f.only.value]),xe.CodeActionContext.create(nt(f.diagnostics),d)}function Zt(f){if(f!=null)return f.value}function Ze(f){let d=xe.Command.create(f.title,f.command);return f.arguments&&(d.arguments=f.arguments),d}function Bt(f){let d=xe.CodeLens.create($e(f.range));return f.command&&(d.command=Ze(f.command)),f instanceof mE.default&&f.data&&(d.data=f.data),d}function er(f,d){let R={tabSize:f.tabSize,insertSpaces:f.insertSpaces};return d.trimTrailingWhitespace&&(R.trimTrailingWhitespace=!0),d.trimFinalNewlines&&(R.trimFinalNewlines=!0),d.insertFinalNewline&&(R.insertFinalNewline=!0),R}function Ut(f){return{textDocument:i(f)}}function D(f){return{textDocument:i(f)}}function j(f){let d=xe.DocumentLink.create($e(f.range));f.target&&(d.target=n(f.target)),f.tooltip!==void 0&&(d.tooltip=f.tooltip);let R=f instanceof vE.default?f:void 0;return R&&R.data&&(d.data=R.data),d}function K(f){return{textDocument:i(f)}}function Q(f){let d={name:f.name,kind:vr(f.kind),uri:n(f.uri),range:$e(f.range),selectionRange:$e(f.selectionRange)};return f.detail!==void 0&&f.detail.length>0&&(d.detail=f.detail),f.tags!==void 0&&(d.tags=Dt(f.tags)),f instanceof bE.default&&f.data!==void 0&&(d.data=f.data),d}return{asUri:n,asTextDocumentIdentifier:i,asVersionedTextDocumentIdentifier:s,asOpenTextDocumentParams:a,asChangeTextDocumentParams:g,asCloseTextDocumentParams:v,asSaveTextDocumentParams:b,asWillSaveTextDocumentParams:w,asDidCreateFilesParams:E,asDidRenameFilesParams:q,asDidDeleteFilesParams:N,asWillCreateFilesParams:A,asWillRenameFilesParams:H,asWillDeleteFilesParams:O,asTextDocumentPositionParams:z,asCompletionParams:G,asSignatureHelpParams:ct,asWorkerPosition:St,asRange:$e,asPosition:Tt,asPositions:Wt,asLocation:gt,asDiagnosticSeverity:mt,asDiagnosticTag:Pt,asDiagnostic:Or,asDiagnostics:nt,asCompletionItem:mr,asTextEdit:Fr,asSymbolKind:vr,asSymbolTag:ke,asSymbolTags:Dt,asReferenceParams:Ir,asCodeAction:yr,asCodeActionContext:zt,asCommand:Ze,asCodeLens:Bt,asFormattingOptions:er,asDocumentSymbolParams:Ut,asCodeLensParams:D,asDocumentLink:j,asDocumentLinkParams:K,asCallHierarchyItem:Q}}xa.createConverter=wE});var hm=F(qa=>{"use strict";Object.defineProperty(qa,"__esModule",{value:!0});qa.createConverter=void 0;var re=require("vscode"),ve=Be(),Ur=yn(),CE=Yu(),RE=Qu(),_E=Zu(),SE=tl(),fm=nl(),TE=ol(),al=Be(),ka;(function(r){function e(t){let n=t;return n&&Ur.string(n.language)&&Ur.string(n.value)}r.is=e})(ka||(ka={}));function PE(r,e){let n=r||(h=>re.Uri.parse(h));function i(h){return n(h)}function s(h){return h.map(a)}function a(h){let L=new fm.ProtocolDiagnostic(C(h.range),h.message,E(h.severity),h.data);return h.code!==void 0&&(ve.CodeDescription.is(h.codeDescription)?L.code={value:h.code,target:i(h.codeDescription.href)}:fm.DiagnosticCode.is(h.code)?(L.hasDiagnosticCode=!0,L.code={value:h.code.value,target:i(h.code.target)}):L.code=h.code),h.source&&(L.source=h.source),h.relatedInformation&&(L.relatedInformation=l(h.relatedInformation)),Array.isArray(h.tags)&&(L.tags=g(h.tags)),L}function l(h){return h.map(u)}function u(h){return new re.DiagnosticRelatedInformation(gt(h.location),h.message)}function g(h){if(!h)return;let L=[];for(let pe of h){let ie=v(pe);ie!==void 0&&L.push(ie)}return L.length>0?L:void 0}function v(h){switch(h){case ve.DiagnosticTag.Unnecessary:return re.DiagnosticTag.Unnecessary;case ve.DiagnosticTag.Deprecated:return re.DiagnosticTag.Deprecated;default:return}}function b(h){if(!!h)return new re.Position(h.line,h.character)}function C(h){if(!!h)return new re.Range(b(h.start),b(h.end))}function w(h){return h.map(L=>C(L))}function E(h){if(h==null)return re.DiagnosticSeverity.Error;switch(h){case ve.DiagnosticSeverity.Error:return re.DiagnosticSeverity.Error;case ve.DiagnosticSeverity.Warning:return re.DiagnosticSeverity.Warning;case ve.DiagnosticSeverity.Information:return re.DiagnosticSeverity.Information;case ve.DiagnosticSeverity.Hint:return re.DiagnosticSeverity.Hint}return re.DiagnosticSeverity.Error}function q(h){if(Ur.string(h))return A(h);if(ka.is(h))return A().appendCodeblock(h.value,h.language);if(Array.isArray(h)){let L=[];for(let pe of h){let ie=A();ka.is(pe)?ie.appendCodeblock(pe.value,pe.language):ie.appendMarkdown(pe),L.push(ie)}return L}else{let L;switch(h.kind){case ve.MarkupKind.Markdown:return A(h.value);case ve.MarkupKind.PlainText:return L=A(),L.appendText(h.value),L;default:return L=A(),L.appendText(`Unsupported Markup content received. Kind is: ${h.kind}`),L}}}function N(h){if(Ur.string(h))return h;switch(h.kind){case ve.MarkupKind.Markdown:return A(h.value);case ve.MarkupKind.PlainText:return h.value;default:return`Unsupported Markup content received. Kind is: ${h.kind}`}}function A(h){let L=new re.MarkdownString(h);return e===!0&&(L.isTrusted=e),L}function H(h){if(!!h)return new re.Hover(q(h.contents),C(h.range))}function O(h){if(!h)return;if(Array.isArray(h))return h.map(X);let L=h;return new re.CompletionList(L.items.map(X),L.isIncomplete)}function z(h){return ve.CompletionItemKind.Text<=h&&h<=ve.CompletionItemKind.TypeParameter?[h-1,void 0]:[re.CompletionItemKind.Text,h]}function M(h){switch(h){case ve.CompletionItemTag.Deprecated:return re.CompletionItemTag.Deprecated}}function G(h){if(h==null)return[];let L=[];for(let pe of h){let ie=M(pe);ie!==void 0&&L.push(ie)}return L}function X(h){let L=G(h.tags),pe=_e(h),ie=new CE.default(pe);h.detail&&(ie.detail=h.detail),h.documentation&&(ie.documentation=N(h.documentation),ie.documentationFormat=Ur.string(h.documentation)?"$string":h.documentation.kind),h.filterText&&(ie.filterText=h.filterText);let Se=Ae(h);if(Se&&(ie.insertText=Se.text,ie.range=Se.range,ie.fromEdit=Se.fromEdit),Ur.number(h.kind)){let[hn,wr]=z(h.kind);ie.kind=hn,wr&&(ie.originalItemKind=wr)}return h.sortText&&(ie.sortText=h.sortText),h.additionalTextEdits&&(ie.additionalTextEdits=Fe(h.additionalTextEdits)),Ur.stringArray(h.commitCharacters)&&(ie.commitCharacters=h.commitCharacters.slice()),h.command&&(ie.command=At(h.command)),(h.deprecated===!0||h.deprecated===!1)&&(ie.deprecated=h.deprecated,h.deprecated===!0&&L.push(re.CompletionItemTag.Deprecated)),(h.preselect===!0||h.preselect===!1)&&(ie.preselect=h.preselect),h.data!==void 0&&(ie.data=h.data),L.length>0&&(ie.tags=L),h.insertTextMode!==void 0&&(ie.insertTextMode=h.insertTextMode,h.insertTextMode===al.InsertTextMode.asIs&&(ie.keepWhitespace=!0)),ie}function _e(h){return al.CompletionItemLabelDetails.is(h.labelDetails)?{label:h.label,detail:h.labelDetails.detail,description:h.labelDetails.description}:h.label}function Ae(h){return h.textEdit?h.insertTextFormat===ve.InsertTextFormat.Snippet?{text:new re.SnippetString(h.textEdit.newText),range:Je(h.textEdit),fromEdit:!0}:{text:h.textEdit.newText,range:Je(h.textEdit),fromEdit:!0}:h.insertText?h.insertTextFormat===ve.InsertTextFormat.Snippet?{text:new re.SnippetString(h.insertText),fromEdit:!1}:{text:h.insertText,fromEdit:!1}:void 0}function Je(h){return ve.InsertReplaceEdit.is(h)?{inserting:C(h.insert),replacing:C(h.replace)}:C(h.range)}function je(h){if(!!h)return new re.TextEdit(C(h.range),h.newText)}function Fe(h){if(!!h)return h.map(je)}function ct(h){if(!h)return;let L=new re.SignatureHelp;return Ur.number(h.activeSignature)?L.activeSignature=h.activeSignature:L.activeSignature=0,Ur.number(h.activeParameter)?L.activeParameter=h.activeParameter:L.activeParameter=0,h.signatures&&(L.signatures=St(h.signatures)),L}function St(h){return h.map(Tt)}function Tt(h){let L=new re.SignatureInformation(h.label);return h.documentation!==void 0&&(L.documentation=N(h.documentation)),h.parameters!==void 0&&(L.parameters=Wt(h.parameters)),h.activeParameter!==void 0&&(L.activeParameter=h.activeParameter),L}function Wt(h){return h.map($e)}function $e(h){let L=new re.ParameterInformation(h.label);return h.documentation&&(L.documentation=N(h.documentation)),L}function gt(h){if(!!h)return new re.Location(n(h.uri),C(h.range))}function mt(h){if(!!h)return Ot(h)}function ut(h){if(!!h)return Ot(h)}function Pt(h){if(!h)return;let L={targetUri:n(h.targetUri),targetRange:C(h.targetRange),originSelectionRange:C(h.originSelectionRange),targetSelectionRange:C(h.targetSelectionRange)};if(!L.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return L}function Ot(h){if(!!h)return Ur.array(h)?h.length===0?[]:ve.LocationLink.is(h[0])?h.map(pe=>Pt(pe)):h.map(pe=>gt(pe)):ve.LocationLink.is(h)?[Pt(h)]:gt(h)}function Jr(h){if(!!h)return h.map(L=>gt(L))}function Zr(h){if(!!h)return h.map(Or)}function Or(h){let L=new re.DocumentHighlight(C(h.range));return Ur.number(h.kind)&&(L.kind=nt(h.kind)),L}function nt(h){switch(h){case ve.DocumentHighlightKind.Text:return re.DocumentHighlightKind.Text;case ve.DocumentHighlightKind.Read:return re.DocumentHighlightKind.Read;case ve.DocumentHighlightKind.Write:return re.DocumentHighlightKind.Write}return re.DocumentHighlightKind.Text}function lt(h,L){if(!!h)return h.map(pe=>mr(pe,L))}function gr(h){return h<=ve.SymbolKind.TypeParameter?h-1:re.SymbolKind.Property}function cr(h){switch(h){case ve.SymbolTag.Deprecated:return re.SymbolTag.Deprecated;default:return}}function dt(h){if(h==null)return;let L=[];for(let pe of h){let ie=cr(pe);ie!==void 0&&L.push(ie)}return L.length===0?void 0:L}function mr(h,L){let pe=new re.SymbolInformation(h.name,gr(h.kind),C(h.location.range),h.location.uri?n(h.location.uri):L);return Fr(pe,h),h.containerName&&(pe.containerName=h.containerName),pe}function Ar(h){if(h!=null)return h.map(Ht)}function Ht(h){let L=new re.DocumentSymbol(h.name,h.detail||"",gr(h.kind),C(h.range),C(h.selectionRange));if(Fr(L,h),h.children!==void 0&&h.children.length>0){let pe=[];for(let ie of h.children)pe.push(Ht(ie));L.children=pe}return L}function Fr(h,L){h.tags=dt(L.tags),L.deprecated&&(h.tags?h.tags.includes(re.SymbolTag.Deprecated)||(h.tags=h.tags.concat(re.SymbolTag.Deprecated)):h.tags=[re.SymbolTag.Deprecated])}function At(h){let L={title:h.title,command:h.command};return h.arguments&&(L.arguments=h.arguments),L}function vr(h){if(!!h)return h.map(At)}let ke=new Map;ke.set(ve.CodeActionKind.Empty,re.CodeActionKind.Empty),ke.set(ve.CodeActionKind.QuickFix,re.CodeActionKind.QuickFix),ke.set(ve.CodeActionKind.Refactor,re.CodeActionKind.Refactor),ke.set(ve.CodeActionKind.RefactorExtract,re.CodeActionKind.RefactorExtract),ke.set(ve.CodeActionKind.RefactorInline,re.CodeActionKind.RefactorInline),ke.set(ve.CodeActionKind.RefactorRewrite,re.CodeActionKind.RefactorRewrite),ke.set(ve.CodeActionKind.Source,re.CodeActionKind.Source),ke.set(ve.CodeActionKind.SourceOrganizeImports,re.CodeActionKind.SourceOrganizeImports);function Dt(h){if(h==null)return;let L=ke.get(h);if(L)return L;let pe=h.split(".");L=re.CodeActionKind.Empty;for(let ie of pe)L=L.append(ie);return L}function Ir(h){if(h!=null)return h.map(L=>Dt(L))}function yr(h){if(h==null)return;let L=new SE.default(h.title,h.data);return h.kind!==void 0&&(L.kind=Dt(h.kind)),h.diagnostics!==void 0&&(L.diagnostics=s(h.diagnostics)),h.edit!==void 0&&(L.edit=Ze(h.edit)),h.command!==void 0&&(L.command=At(h.command)),h.isPreferred!==void 0&&(L.isPreferred=h.isPreferred),h.disabled!==void 0&&(L.disabled={reason:h.disabled.reason}),L}function zt(h){if(!h)return;let L=new RE.default(C(h.range));return h.command&&(L.command=At(h.command)),h.data!==void 0&&h.data!==null&&(L.data=h.data),L}function Zt(h){if(!!h)return h.map(L=>zt(L))}function Ze(h){if(!h)return;let L=new Map;if(h.changeAnnotations!==void 0)for(let Se of Object.keys(h.changeAnnotations)){let hn=Bt(h.changeAnnotations[Se]);L.set(Se,hn)}let pe=Se=>{if(Se!==void 0)return L.get(Se)},ie=new re.WorkspaceEdit;if(h.documentChanges)for(let Se of h.documentChanges)if(ve.CreateFile.is(Se))ie.createFile(n(Se.uri),Se.options,pe(Se.annotationId));else if(ve.RenameFile.is(Se))ie.renameFile(n(Se.oldUri),n(Se.newUri),Se.options,pe(Se.annotationId));else if(ve.DeleteFile.is(Se))ie.deleteFile(n(Se.uri),Se.options,pe(Se.annotationId));else if(ve.TextDocumentEdit.is(Se)){let hn=n(Se.textDocument.uri);for(let wr of Se.edits)al.AnnotatedTextEdit.is(wr)?ie.replace(hn,C(wr.range),wr.newText,pe(wr.annotationId)):ie.replace(hn,C(wr.range),wr.newText)}else throw new Error(`Unknown workspace edit change received:
${JSON.stringify(Se,void 0,4)}`);else h.changes&&Object.keys(h.changes).forEach(Se=>{ie.set(n(Se),Fe(h.changes[Se]))});return ie}function Bt(h){if(h!==void 0)return{label:h.label,needsConfirmation:!!h.needsConfirmation,description:h.description}}function er(h){let L=C(h.range),pe=h.target?i(h.target):void 0,ie=new _E.default(L,pe);return h.tooltip!==void 0&&(ie.tooltip=h.tooltip),h.data!==void 0&&h.data!==null&&(ie.data=h.data),ie}function Ut(h){if(!!h)return h.map(er)}function D(h){return new re.Color(h.red,h.green,h.blue,h.alpha)}function j(h){return new re.ColorInformation(C(h.range),D(h.color))}function K(h){if(Array.isArray(h))return h.map(j)}function Q(h){let L=new re.ColorPresentation(h.label);return L.additionalTextEdits=Fe(h.additionalTextEdits),h.textEdit&&(L.textEdit=je(h.textEdit)),L}function f(h){if(Array.isArray(h))return h.map(Q)}function d(h){if(h)switch(h){case ve.FoldingRangeKind.Comment:return re.FoldingRangeKind.Comment;case ve.FoldingRangeKind.Imports:return re.FoldingRangeKind.Imports;case ve.FoldingRangeKind.Region:return re.FoldingRangeKind.Region}}function R(h){return new re.FoldingRange(h.startLine,h.endLine,d(h.kind))}function P(h){if(Array.isArray(h))return h.map(R)}function y(h){return new re.SelectionRange(C(h.range),h.parent?y(h.parent):void 0)}function m(h){if(!Array.isArray(h))return[];let L=[];for(let pe of h)L.push(y(pe));return L}function x(h){if(h===null)return;let L=new TE.default(gr(h.kind),h.name,h.detail||"",i(h.uri),C(h.range),C(h.selectionRange),h.data);return h.tags!==void 0&&(L.tags=dt(h.tags)),L}function I(h){if(h!==null)return h.map(L=>x(L))}function Y(h){return new re.CallHierarchyIncomingCall(x(h.from),w(h.fromRanges))}function be(h){if(h!==null)return h.map(L=>Y(L))}function we(h){return new re.CallHierarchyOutgoingCall(x(h.to),w(h.fromRanges))}function Kt(h){if(h!==null)return h.map(L=>we(L))}function Ye(h){if(h!=null)return new re.SemanticTokens(new Uint32Array(h.data),h.resultId)}function vt(h){return new re.SemanticTokensEdit(h.start,h.deleteCount,h.data!==void 0?new Uint32Array(h.data):void 0)}function le(h){if(h!=null)return new re.SemanticTokensEdits(h.edits.map(vt),h.resultId)}function Ft(h){return h}function en(h){if(h!=null)return new re.LinkedEditingRanges(w(h.ranges),br(h.wordPattern))}function br(h){if(h!=null)return new RegExp(h)}return{asUri:i,asDiagnostics:s,asDiagnostic:a,asRange:C,asRanges:w,asPosition:b,asDiagnosticSeverity:E,asDiagnosticTag:v,asHover:H,asCompletionResult:O,asCompletionItem:X,asTextEdit:je,asTextEdits:Fe,asSignatureHelp:ct,asSignatureInformations:St,asSignatureInformation:Tt,asParameterInformations:Wt,asParameterInformation:$e,asDeclarationResult:mt,asDefinitionResult:ut,asLocation:gt,asReferences:Jr,asDocumentHighlights:Zr,asDocumentHighlight:Or,asDocumentHighlightKind:nt,asSymbolKind:gr,asSymbolTag:cr,asSymbolTags:dt,asSymbolInformations:lt,asSymbolInformation:mr,asDocumentSymbols:Ar,asDocumentSymbol:Ht,asCommand:At,asCommands:vr,asCodeAction:yr,asCodeActionKind:Dt,asCodeActionKinds:Ir,asCodeLens:zt,asCodeLenses:Zt,asWorkspaceEdit:Ze,asDocumentLink:er,asDocumentLinks:Ut,asFoldingRangeKind:d,asFoldingRange:R,asFoldingRanges:P,asColor:D,asColorInformation:j,asColorInformations:K,asColorPresentation:Q,asColorPresentations:f,asSelectionRange:y,asSelectionRanges:m,asSemanticTokensLegend:Ft,asSemanticTokens:Ye,asSemanticTokensEdit:vt,asSemanticTokensEdits:le,asCallHierarchyItem:x,asCallHierarchyItems:I,asCallHierarchyIncomingCall:Y,asCallHierarchyIncomingCalls:be,asCallHierarchyOutgoingCall:we,asCallHierarchyOutgoingCalls:Kt,asLinkedEditingRanges:en}}qa.createConverter=PE});var gm=F(Oa=>{"use strict";Object.defineProperty(Oa,"__esModule",{value:!0});Oa.Delayer=void 0;var DE=Be(),pm=class{constructor(e){this.defaultDelay=e,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(e,t=this.defaultDelay){return this.task=e,t>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(n=>{this.onSuccess=n}).then(()=>{this.completionPromise=void 0,this.onSuccess=void 0;var n=this.task();return this.task=void 0,n})),(t>=0||this.timeout===void 0)&&(this.timeout=DE.RAL().timer.setTimeout(()=>{this.timeout=void 0,this.onSuccess(void 0)},t>=0?t:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let e=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,e}isTriggered(){return this.timeout!==void 0}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){this.timeout!==void 0&&(this.timeout.dispose(),this.timeout=void 0)}};Oa.Delayer=pm});var is=F(Dr=>{"use strict";Object.defineProperty(Dr,"__esModule",{value:!0});Dr.generateUuid=Dr.parse=Dr.isUUID=Dr.v4=Dr.empty=void 0;var Aa=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},ye=class extends Aa{constructor(){super([ye._randomHex(),ye._randomHex(),ye._randomHex(),ye._randomHex(),ye._randomHex(),ye._randomHex(),ye._randomHex(),ye._randomHex(),"-",ye._randomHex(),ye._randomHex(),ye._randomHex(),ye._randomHex(),"-","4",ye._randomHex(),ye._randomHex(),ye._randomHex(),"-",ye._oneOf(ye._timeHighBits),ye._randomHex(),ye._randomHex(),ye._randomHex(),"-",ye._randomHex(),ye._randomHex(),ye._randomHex(),ye._randomHex(),ye._randomHex(),ye._randomHex(),ye._randomHex(),ye._randomHex(),ye._randomHex(),ye._randomHex(),ye._randomHex(),ye._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return ye._oneOf(ye._chars)}};ye._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];ye._timeHighBits=["8","9","a","b"];Dr.empty=new Aa("00000000-0000-0000-0000-000000000000");function mm(){return new ye}Dr.v4=mm;var EE=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function vm(r){return EE.test(r)}Dr.isUUID=vm;function xE(r){if(!vm(r))throw new Error("invalid uuid");return new Aa(r)}Dr.parse=xE;function kE(){return mm().asHex()}Dr.generateUuid=kE});var cl=F(Fa=>{"use strict";Object.defineProperty(Fa,"__esModule",{value:!0});Fa.ProgressPart=void 0;var ym=require("vscode"),bm=Be(),wm=yn(),Cm=class{constructor(e,t,n){this._client=e,this._token=t,this._reported=0,this._disposable=this._client.onProgress(bm.WorkDoneProgress.type,this._token,i=>{switch(i.kind){case"begin":this.begin(i);break;case"report":this.report(i);break;case"end":this.done(),n&&n(this);break}})}begin(e){ym.window.withProgress({location:ym.ProgressLocation.Window,cancellable:e.cancellable,title:e.title},async(t,n)=>(this._progress=t,this._infinite=e.percentage===void 0,this._cancellationToken=n,this._cancellationToken.onCancellationRequested(()=>{this._client.sendNotification(bm.WorkDoneProgressCancelNotification.type,{token:this._token})}),this.report(e),new Promise((i,s)=>{this._resolve=i,this._reject=s})))}report(e){if(this._infinite&&wm.string(e.message))this._progress.report({message:e.message});else if(wm.number(e.percentage)){let t=Math.max(0,Math.min(e.percentage,100)),n=Math.max(0,t-this._reported);this._progress.report({message:e.message,increment:n}),this._reported+=n}}cancel(){this._disposable&&(this._disposable.dispose(),this._disposable=void 0),this._reject&&(this._reject(),this._resolve=void 0,this._reject=void 0)}done(){this._disposable&&(this._disposable.dispose(),this._disposable=void 0),this._resolve&&(this._resolve(),this._resolve=void 0,this._reject=void 0)}};Fa.ProgressPart=Cm});var ir=F(Ne=>{"use strict";Object.defineProperty(Ne,"__esModule",{value:!0});Ne.BaseLanguageClient=Ne.LSPCancellationError=Ne.MessageTransports=Ne.TextDocumentFeature=Ne.State=Ne.RevealOutputChannelOn=Ne.DiagnosticPullMode=Ne.CloseAction=Ne.ErrorAction=void 0;var V=require("vscode"),T=Be(),qE=Gu(),OE=dm(),AE=hm(),qe=yn(),Rm=gm(),Oe=is(),FE=cl(),_m=class{error(e){T.RAL().console.error(e)}warn(e){T.RAL().console.warn(e)}info(e){T.RAL().console.info(e)}log(e){T.RAL().console.log(e)}};function IE(r,e,t,n,i){let s=new _m,a=T.createProtocolConnection(r,e,s,i);return a.onError(u=>{t(u[0],u[1],u[2])}),a.onClose(n),{listen:()=>a.listen(),sendRequest:(u,...g)=>a.sendRequest(u,...g),onRequest:(u,g)=>a.onRequest(u,g),sendNotification:(u,g)=>a.sendNotification(u,g),onNotification:(u,g)=>a.onNotification(u,g),onProgress:a.onProgress,sendProgress:a.sendProgress,trace:(u,g,v)=>{let b={sendNotification:!1,traceFormat:T.TraceFormat.Text};v===void 0?a.trace(u,g,b):(qe.boolean(v),a.trace(u,g,v))},initialize:u=>a.sendRequest(T.InitializeRequest.type,u),shutdown:()=>a.sendRequest(T.ShutdownRequest.type,void 0),exit:()=>a.sendNotification(T.ExitNotification.type),onLogMessage:u=>a.onNotification(T.LogMessageNotification.type,u),onShowMessage:u=>a.onNotification(T.ShowMessageNotification.type,u),onTelemetry:u=>a.onNotification(T.TelemetryEventNotification.type,u),didChangeConfiguration:u=>a.sendNotification(T.DidChangeConfigurationNotification.type,u),didChangeWatchedFiles:u=>a.sendNotification(T.DidChangeWatchedFilesNotification.type,u),didOpenTextDocument:u=>a.sendNotification(T.DidOpenTextDocumentNotification.type,u),didChangeTextDocument:u=>a.sendNotification(T.DidChangeTextDocumentNotification.type,u),didCloseTextDocument:u=>a.sendNotification(T.DidCloseTextDocumentNotification.type,u),didSaveTextDocument:u=>a.sendNotification(T.DidSaveTextDocumentNotification.type,u),onDiagnostics:u=>a.onNotification(T.PublishDiagnosticsNotification.type,u),end:()=>a.end(),dispose:()=>a.dispose()}}var Ia;(function(r){r[r.Continue=1]="Continue",r[r.Shutdown=2]="Shutdown"})(Ia=Ne.ErrorAction||(Ne.ErrorAction={}));var li;(function(r){r[r.DoNotRestart=1]="DoNotRestart",r[r.Restart=2]="Restart"})(li=Ne.CloseAction||(Ne.CloseAction={}));var Sm=class{constructor(e,t){this.name=e,this.maxRestartCount=t,this.restarts=[]}error(e,t,n){return n&&n<=3?Ia.Continue:Ia.Shutdown}closed(){return this.restarts.push(Date.now()),this.restarts.length<=this.maxRestartCount?li.Restart:this.restarts[this.restarts.length-1]-this.restarts[0]<=3*60*1e3?(V.window.showErrorMessage(`The ${this.name} server crashed ${this.maxRestartCount+1} times in the last 3 minutes. The server will not be restarted.`),li.DoNotRestart):(this.restarts.shift(),li.Restart)}},LE;(function(r){r.onType="onType",r.onSave="onSave"})(LE=Ne.DiagnosticPullMode||(Ne.DiagnosticPullMode={}));var os;(function(r){r[r.Info=1]="Info",r[r.Warn=2]="Warn",r[r.Error=3]="Error",r[r.Never=4]="Never"})(os=Ne.RevealOutputChannelOn||(Ne.RevealOutputChannelOn={}));var La;(function(r){r[r.Stopped=1]="Stopped",r[r.Starting=3]="Starting",r[r.Running=2]="Running"})(La=Ne.State||(Ne.State={}));var Ue;(function(r){r[r.Initial=0]="Initial",r[r.Starting=1]="Starting",r[r.StartFailed=2]="StartFailed",r[r.Running=3]="Running",r[r.Stopping=4]="Stopping",r[r.Stopped=5]="Stopped"})(Ue||(Ue={}));var Tm=[T.SymbolKind.File,T.SymbolKind.Module,T.SymbolKind.Namespace,T.SymbolKind.Package,T.SymbolKind.Class,T.SymbolKind.Method,T.SymbolKind.Property,T.SymbolKind.Field,T.SymbolKind.Constructor,T.SymbolKind.Enum,T.SymbolKind.Interface,T.SymbolKind.Function,T.SymbolKind.Variable,T.SymbolKind.Constant,T.SymbolKind.String,T.SymbolKind.Number,T.SymbolKind.Boolean,T.SymbolKind.Array,T.SymbolKind.Object,T.SymbolKind.Key,T.SymbolKind.Null,T.SymbolKind.EnumMember,T.SymbolKind.Struct,T.SymbolKind.Event,T.SymbolKind.Operator,T.SymbolKind.TypeParameter],NE=[T.CompletionItemKind.Text,T.CompletionItemKind.Method,T.CompletionItemKind.Function,T.CompletionItemKind.Constructor,T.CompletionItemKind.Field,T.CompletionItemKind.Variable,T.CompletionItemKind.Class,T.CompletionItemKind.Interface,T.CompletionItemKind.Module,T.CompletionItemKind.Property,T.CompletionItemKind.Unit,T.CompletionItemKind.Value,T.CompletionItemKind.Enum,T.CompletionItemKind.Keyword,T.CompletionItemKind.Snippet,T.CompletionItemKind.Color,T.CompletionItemKind.File,T.CompletionItemKind.Reference,T.CompletionItemKind.Folder,T.CompletionItemKind.EnumMember,T.CompletionItemKind.Constant,T.CompletionItemKind.Struct,T.CompletionItemKind.Event,T.CompletionItemKind.Operator,T.CompletionItemKind.TypeParameter],Pm=[T.SymbolTag.Deprecated];function ne(r,e){return r[e]===void 0&&(r[e]={}),r[e]}var ss;(function(r){function e(t){let n=V.workspace.getConfiguration("files",t);return{trimTrailingWhitespace:n.get("trimTrailingWhitespace"),trimFinalNewlines:n.get("trimFinalNewlines"),insertFinalNewline:n.get("insertFinalNewline")}}r.fromConfiguration=e})(ss||(ss={}));var ul;(function(r){function e(t){let n=t;return n&&qe.func(n.register)&&qe.func(n.unregister)&&qe.func(n.dispose)&&n.registrationType!==void 0}r.is=e})(ul||(ul={}));var on=class{constructor(e,t,n,i,s,a){this._client=e,this._event=t,this._type=n,this._middleware=i,this._createParams=s,this._selectorFilter=a,this._selectors=new Map,this._onNotificationSent=new V.EventEmitter}static textDocumentFilter(e,t){for(let n of e)if(V.languages.match(n,t))return!0;return!1}register(e){!e.registerOptions.documentSelector||(this._listener||(this._listener=this._event(this.callback,this)),this._selectors.set(e.id,e.registerOptions.documentSelector))}callback(e){let t=n=>{let i=this._createParams(n);this._client.sendNotification(this._type,i).catch(s=>{this._client.error(`Sending document notification ${this._type.method} failed.`,s)}),this.notificationSent(n,this._type,i)};(!this._selectorFilter||this._selectorFilter(this._selectors.values(),e))&&(this._middleware?this._middleware(e,n=>t(n)):t(e))}get onNotificationSent(){return this._onNotificationSent.event}notificationSent(e,t,n){this._onNotificationSent.fire({original:e,type:t,params:n})}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._onNotificationSent.dispose(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getProvider(e){for(let t of this._selectors.values())if(V.languages.match(t,e))return{send:n=>{this.callback(n)}}}},Dm=class extends on{constructor(e,t){super(e,V.workspace.onDidOpenTextDocument,T.DidOpenTextDocumentNotification.type,e.clientOptions.middleware.didOpen,n=>e.code2ProtocolConverter.asOpenTextDocumentParams(n),on.textDocumentFilter);this._syncedDocuments=t}get openDocuments(){return this._syncedDocuments.values()}fillClientCapabilities(e){ne(ne(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.openClose&&this.register({id:Oe.generateUuid(),registerOptions:{documentSelector:t}})}get registrationType(){return T.DidOpenTextDocumentNotification.type}register(e){if(super.register(e),!e.registerOptions.documentSelector)return;let t=e.registerOptions.documentSelector;V.workspace.textDocuments.forEach(n=>{let i=n.uri.toString();if(!this._syncedDocuments.has(i)&&V.languages.match(t,n)){let s=this._client.clientOptions.middleware,a=l=>{this._client.sendNotification(this._type,this._createParams(l)).catch(u=>{this._client.error(`Sending document notification ${this._type.method} failed`,u)})};s.didOpen?s.didOpen(n,a):a(n),this._syncedDocuments.set(i,n)}})}notificationSent(e,t,n){super.notificationSent(e,t,n),this._syncedDocuments.set(e.uri.toString(),e)}},Em=class extends on{constructor(e,t){super(e,V.workspace.onDidCloseTextDocument,T.DidCloseTextDocumentNotification.type,e.clientOptions.middleware.didClose,n=>e.code2ProtocolConverter.asCloseTextDocumentParams(n),on.textDocumentFilter);this._syncedDocuments=t}get registrationType(){return T.DidCloseTextDocumentNotification.type}fillClientCapabilities(e){ne(ne(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.openClose&&this.register({id:Oe.generateUuid(),registerOptions:{documentSelector:t}})}notificationSent(e,t,n){super.notificationSent(e,t,n),this._syncedDocuments.delete(e.uri.toString())}unregister(e){let t=this._selectors.get(e);super.unregister(e);let n=this._selectors.values();this._syncedDocuments.forEach(i=>{if(V.languages.match(t,i)&&!this._selectorFilter(n,i)){let s=this._client.clientOptions.middleware,a=l=>{this._client.sendNotification(this._type,this._createParams(l)).catch(u=>{this._client.error(`Sending document notification ${this._type.method} failed`,u)})};this._syncedDocuments.delete(i.uri.toString()),s.didClose?s.didClose(i,a):a(i)}})}},xm=class{constructor(e){this._client=e,this._changeData=new Map,this._forcingDelivery=!1,this._onNotificationSent=new V.EventEmitter}get registrationType(){return T.DidChangeTextDocumentNotification.type}fillClientCapabilities(e){ne(ne(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.change!==void 0&&n.change!==T.TextDocumentSyncKind.None&&this.register({id:Oe.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},{syncKind:n.change})})}register(e){!e.registerOptions.documentSelector||(this._listener||(this._listener=V.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(e.id,{documentSelector:e.registerOptions.documentSelector,syncKind:e.registerOptions.syncKind}))}callback(e){if(e.contentChanges.length!==0){for(let t of this._changeData.values())if(V.languages.match(t.documentSelector,e.document)){let n=this._client.clientOptions.middleware;if(t.syncKind===T.TextDocumentSyncKind.Incremental){let i=s=>{let a=this._client.code2ProtocolConverter.asChangeTextDocumentParams(s);this._client.sendNotification(T.DidChangeTextDocumentNotification.type,a).catch(l=>{this._client.error(`Sending document notification ${T.DidChangeTextDocumentNotification.type.method} failed`,l)}),this.notificationSent(s,T.DidChangeTextDocumentNotification.type,a)};n.didChange?n.didChange(e,s=>i(s)):i(e)}else if(t.syncKind===T.TextDocumentSyncKind.Full){let i=s=>{let a=l=>{let u=this._client.code2ProtocolConverter.asChangeTextDocumentParams(l.document);this._client.sendNotification(T.DidChangeTextDocumentNotification.type,u).catch(g=>{this._client.error(`Sending document notification ${T.DidChangeTextDocumentNotification.type.method} failed`,g)}),this.notificationSent(l,T.DidChangeTextDocumentNotification.type,u)};this._changeDelayer?(this._changeDelayer.uri!==s.document.uri.toString()&&(this.forceDelivery(),this._changeDelayer.uri=s.document.uri.toString()),this._changeDelayer.delayer.trigger(()=>a(s))):(this._changeDelayer={uri:s.document.uri.toString(),delayer:new Rm.Delayer(200)},this._changeDelayer.delayer.trigger(()=>a(s),-1))};n.didChange?n.didChange(e,s=>i(s)):i(e)}}}}get onNotificationSent(){return this._onNotificationSent.event}notificationSent(e,t,n){this._onNotificationSent.fire({original:e,type:t,params:n})}unregister(e){this._changeData.delete(e),this._changeData.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._changeDelayer=void 0,this._forcingDelivery=!1,this._changeData.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}forceDelivery(){if(!(this._forcingDelivery||!this._changeDelayer))try{this._forcingDelivery=!0,this._changeDelayer.delayer.forceDelivery()}finally{this._forcingDelivery=!1}}getProvider(e){for(let t of this._changeData.values())if(V.languages.match(t.documentSelector,e))return{send:n=>{this.callback(n)}}}},km=class extends on{constructor(e){super(e,V.workspace.onWillSaveTextDocument,T.WillSaveTextDocumentNotification.type,e.clientOptions.middleware.willSave,t=>e.code2ProtocolConverter.asWillSaveTextDocumentParams(t),(t,n)=>on.textDocumentFilter(t,n.document))}get registrationType(){return T.WillSaveTextDocumentNotification.type}fillClientCapabilities(e){let t=ne(ne(e,"textDocument"),"synchronization");t.willSave=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.willSave&&this.register({id:Oe.generateUuid(),registerOptions:{documentSelector:t}})}},qm=class{constructor(e){this._client=e,this._selectors=new Map}get registrationType(){return T.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(e){let t=ne(ne(e,"textDocument"),"synchronization");t.willSaveWaitUntil=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.willSaveWaitUntil&&this.register({id:Oe.generateUuid(),registerOptions:{documentSelector:t}})}register(e){!e.registerOptions.documentSelector||(this._listener||(this._listener=V.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(e.id,e.registerOptions.documentSelector))}callback(e){if(on.textDocumentFilter(this._selectors.values(),e.document)){let t=this._client.clientOptions.middleware,n=i=>this._client.sendRequest(T.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(i)).then(s=>{let a=this._client.protocol2CodeConverter.asTextEdits(s);return a===void 0?[]:a});e.waitUntil(t.willSaveWaitUntil?t.willSaveWaitUntil(e,n):n(e))}}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}},Om=class extends on{constructor(e){super(e,V.workspace.onDidSaveTextDocument,T.DidSaveTextDocumentNotification.type,e.clientOptions.middleware.didSave,t=>e.code2ProtocolConverter.asSaveTextDocumentParams(t,this._includeText),on.textDocumentFilter);this._includeText=!1}get registrationType(){return T.DidSaveTextDocumentNotification.type}fillClientCapabilities(e){ne(ne(e,"textDocument"),"synchronization").didSave=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;if(t&&n&&n.save){let i=typeof n.save=="boolean"?{includeText:!1}:{includeText:!!n.save.includeText};this.register({id:Oe.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},i)})}}register(e){this._includeText=!!e.registerOptions.includeText,super.register(e)}},Am=class{constructor(e,t){this._client=e,this._notifyFileEvent=t,this._watchers=new Map}get registrationType(){return T.DidChangeWatchedFilesNotification.type}fillClientCapabilities(e){ne(ne(e,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0}initialize(e,t){}register(e){if(!Array.isArray(e.registerOptions.watchers))return;let t=[];for(let n of e.registerOptions.watchers){if(!qe.string(n.globPattern))continue;let i=!0,s=!0,a=!0;n.kind!==void 0&&n.kind!==null&&(i=(n.kind&T.WatchKind.Create)!=0,s=(n.kind&T.WatchKind.Change)!=0,a=(n.kind&T.WatchKind.Delete)!=0);let l=V.workspace.createFileSystemWatcher(n.globPattern,!i,!s,!a);this.hookListeners(l,i,s,a),t.push(l)}this._watchers.set(e.id,t)}registerRaw(e,t){let n=[];for(let i of t)this.hookListeners(i,!0,!0,!0,n);this._watchers.set(e,n)}hookListeners(e,t,n,i,s){t&&e.onDidCreate(a=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(a),type:T.FileChangeType.Created}),null,s),n&&e.onDidChange(a=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(a),type:T.FileChangeType.Changed}),null,s),i&&e.onDidDelete(a=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(a),type:T.FileChangeType.Deleted}),null,s)}unregister(e){let t=this._watchers.get(e);if(t)for(let n of t)n.dispose()}dispose(){this._watchers.forEach(e=>{for(let t of e)t.dispose()}),this._watchers.clear()}},Mt=class{constructor(e,t){this._client=e,this._registrationType=t,this._registrations=new Map}get registrationType(){return this._registrationType}register(e){if(!e.registerOptions.documentSelector)return;let t=this.registerLanguageProvider(e.registerOptions,e.id);this._registrations.set(e.id,{disposable:t[0],data:e,provider:t[1]})}unregister(e){let t=this._registrations.get(e);t!==void 0&&t.disposable.dispose()}dispose(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getRegistration(e,t){if(t){if(T.TextDocumentRegistrationOptions.is(t)){let n=T.StaticRegistrationOptions.hasId(t)?t.id:Oe.generateUuid(),i=t.documentSelector||e;if(i)return[n,Object.assign({},t,{documentSelector:i})]}else if(qe.boolean(t)&&t===!0||T.WorkDoneProgressOptions.is(t)){if(!e)return[void 0,void 0];let n=qe.boolean(t)&&t===!0?{documentSelector:e}:Object.assign({},t,{documentSelector:e});return[Oe.generateUuid(),n]}}else return[void 0,void 0];return[void 0,void 0]}getRegistrationOptions(e,t){if(!(!e||!t))return qe.boolean(t)&&t===!0?{documentSelector:e}:Object.assign({},t,{documentSelector:e})}getProvider(e){for(let t of this._registrations.values()){let n=t.data.registerOptions.documentSelector;if(n!==null&&V.languages.match(n,e))return t.provider}}getAllProviders(){let e=[];for(let t of this._registrations.values())e.push(t.provider);return e}};Ne.TextDocumentFeature=Mt;var Fm=class{constructor(e,t){this._client=e,this._registrationType=t,this._registrations=new Map}get registrationType(){return this._registrationType}register(e){let t=this.registerLanguageProvider(e.registerOptions);this._registrations.set(e.id,{disposable:t[0],provider:t[1]})}unregister(e){let t=this._registrations.get(e);t!==void 0&&t.disposable.dispose()}dispose(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getProviders(){let e=[];for(let t of this._registrations.values())e.push(t.provider);return e}},Im=class extends Mt{constructor(e){super(e,T.CompletionRequest.type);this.labelDetailsSupport=new Map}fillClientCapabilities(e){let t=ne(ne(e,"textDocument"),"completion");t.dynamicRegistration=!0,t.contextSupport=!0,t.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[T.MarkupKind.Markdown,T.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0,tagSupport:{valueSet:[T.CompletionItemTag.Deprecated]},insertReplaceSupport:!0,resolveSupport:{properties:["documentation","detail","additionalTextEdits"]},insertTextModeSupport:{valueSet:[T.InsertTextMode.asIs,T.InsertTextMode.adjustIndentation]},labelDetailsSupport:!0},t.insertTextMode=T.InsertTextMode.adjustIndentation,t.completionItemKind={valueSet:NE}}initialize(e,t){let n=this.getRegistrationOptions(t,e.completionProvider);!n||this.register({id:Oe.generateUuid(),registerOptions:n})}registerLanguageProvider(e,t){var n;this.labelDetailsSupport.set(t,!!((n=e.completionItem)===null||n===void 0?void 0:n.labelDetailsSupport));let i=e.triggerCharacters||[],s={provideCompletionItems:(a,l,u,g)=>{let v=this._client,b=this._client.clientOptions.middleware,C=(w,E,q,N)=>v.sendRequest(T.CompletionRequest.type,v.code2ProtocolConverter.asCompletionParams(w,E,q),N).then(v.protocol2CodeConverter.asCompletionResult,A=>v.handleFailedRequest(T.CompletionRequest.type,N,A,null));return b.provideCompletionItem?b.provideCompletionItem(a,l,g,u,C):C(a,l,g,u)},resolveCompletionItem:e.resolveProvider?(a,l)=>{let u=this._client,g=this._client.clientOptions.middleware,v=(b,C)=>u.sendRequest(T.CompletionResolveRequest.type,u.code2ProtocolConverter.asCompletionItem(b,!!this.labelDetailsSupport.get(t)),C).then(u.protocol2CodeConverter.asCompletionItem,w=>u.handleFailedRequest(T.CompletionResolveRequest.type,C,w,b));return g.resolveCompletionItem?g.resolveCompletionItem(a,l,v):v(a,l)}:void 0};return[V.languages.registerCompletionItemProvider(e.documentSelector,s,...i),s]}},Lm=class extends Mt{constructor(e){super(e,T.HoverRequest.type)}fillClientCapabilities(e){let t=ne(ne(e,"textDocument"),"hover");t.dynamicRegistration=!0,t.contentFormat=[T.MarkupKind.Markdown,T.MarkupKind.PlainText]}initialize(e,t){let n=this.getRegistrationOptions(t,e.hoverProvider);!n||this.register({id:Oe.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let t={provideHover:(n,i,s)=>{let a=this._client,l=(g,v,b)=>a.sendRequest(T.HoverRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(g,v),b).then(a.protocol2CodeConverter.asHover,C=>a.handleFailedRequest(T.HoverRequest.type,b,C,null)),u=a.clientOptions.middleware;return u.provideHover?u.provideHover(n,i,s,l):l(n,i,s)}};return[V.languages.registerHoverProvider(e.documentSelector,t),t]}},Nm=class extends Mt{constructor(e){super(e,T.SignatureHelpRequest.type)}fillClientCapabilities(e){let t=ne(ne(e,"textDocument"),"signatureHelp");t.dynamicRegistration=!0,t.signatureInformation={documentationFormat:[T.MarkupKind.Markdown,T.MarkupKind.PlainText]},t.signatureInformation.parameterInformation={labelOffsetSupport:!0},t.signatureInformation.activeParameterSupport=!0,t.contextSupport=!0}initialize(e,t){let n=this.getRegistrationOptions(t,e.signatureHelpProvider);!n||this.register({id:Oe.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let t={provideSignatureHelp:(i,s,a,l)=>{let u=this._client,g=(b,C,w,E)=>u.sendRequest(T.SignatureHelpRequest.type,u.code2ProtocolConverter.asSignatureHelpParams(b,C,w),E).then(u.protocol2CodeConverter.asSignatureHelp,q=>u.handleFailedRequest(T.SignatureHelpRequest.type,E,q,null)),v=u.clientOptions.middleware;return v.provideSignatureHelp?v.provideSignatureHelp(i,s,l,a,g):g(i,s,l,a)}},n;if(e.retriggerCharacters===void 0){let i=e.triggerCharacters||[];n=V.languages.registerSignatureHelpProvider(e.documentSelector,t,...i)}else{let i={triggerCharacters:e.triggerCharacters||[],retriggerCharacters:e.retriggerCharacters||[]};n=V.languages.registerSignatureHelpProvider(e.documentSelector,t,i)}return[n,t]}},Mm=class extends Mt{constructor(e){super(e,T.DefinitionRequest.type)}fillClientCapabilities(e){let t=ne(ne(e,"textDocument"),"definition");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let n=this.getRegistrationOptions(t,e.definitionProvider);!n||this.register({id:Oe.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let t={provideDefinition:(n,i,s)=>{let a=this._client,l=(g,v,b)=>a.sendRequest(T.DefinitionRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(g,v),b).then(a.protocol2CodeConverter.asDefinitionResult,C=>a.handleFailedRequest(T.DefinitionRequest.type,b,C,null)),u=a.clientOptions.middleware;return u.provideDefinition?u.provideDefinition(n,i,s,l):l(n,i,s)}};return[V.languages.registerDefinitionProvider(e.documentSelector,t),t]}},jm=class extends Mt{constructor(e){super(e,T.ReferencesRequest.type)}fillClientCapabilities(e){ne(ne(e,"textDocument"),"references").dynamicRegistration=!0}initialize(e,t){let n=this.getRegistrationOptions(t,e.referencesProvider);!n||this.register({id:Oe.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let t={provideReferences:(n,i,s,a)=>{let l=this._client,u=(v,b,C,w)=>l.sendRequest(T.ReferencesRequest.type,l.code2ProtocolConverter.asReferenceParams(v,b,C),w).then(l.protocol2CodeConverter.asReferences,E=>l.handleFailedRequest(T.ReferencesRequest.type,w,E,null)),g=l.clientOptions.middleware;return g.provideReferences?g.provideReferences(n,i,s,a,u):u(n,i,s,a)}};return[V.languages.registerReferenceProvider(e.documentSelector,t),t]}},$m=class extends Mt{constructor(e){super(e,T.DocumentHighlightRequest.type)}fillClientCapabilities(e){ne(ne(e,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(e,t){let n=this.getRegistrationOptions(t,e.documentHighlightProvider);!n||this.register({id:Oe.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let t={provideDocumentHighlights:(n,i,s)=>{let a=this._client,l=(g,v,b)=>a.sendRequest(T.DocumentHighlightRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(g,v),b).then(a.protocol2CodeConverter.asDocumentHighlights,C=>a.handleFailedRequest(T.DocumentHighlightRequest.type,b,C,null)),u=a.clientOptions.middleware;return u.provideDocumentHighlights?u.provideDocumentHighlights(n,i,s,l):l(n,i,s)}};return[V.languages.registerDocumentHighlightProvider(e.documentSelector,t),t]}},Wm=class extends Mt{constructor(e){super(e,T.DocumentSymbolRequest.type)}fillClientCapabilities(e){let t=ne(ne(e,"textDocument"),"documentSymbol");t.dynamicRegistration=!0,t.symbolKind={valueSet:Tm},t.hierarchicalDocumentSymbolSupport=!0,t.tagSupport={valueSet:Pm},t.labelSupport=!0}initialize(e,t){let n=this.getRegistrationOptions(t,e.documentSymbolProvider);!n||this.register({id:Oe.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let t={provideDocumentSymbols:(i,s)=>{let a=this._client,l=(g,v)=>a.sendRequest(T.DocumentSymbolRequest.type,a.code2ProtocolConverter.asDocumentSymbolParams(g),v).then(b=>{if(b!==null){if(b.length===0)return[];{let C=b[0];return T.DocumentSymbol.is(C)?a.protocol2CodeConverter.asDocumentSymbols(b):a.protocol2CodeConverter.asSymbolInformations(b)}}},b=>a.handleFailedRequest(T.DocumentSymbolRequest.type,v,b,null)),u=a.clientOptions.middleware;return u.provideDocumentSymbols?u.provideDocumentSymbols(i,s,l):l(i,s)}},n=e.label!==void 0?{label:e.label}:void 0;return[V.languages.registerDocumentSymbolProvider(e.documentSelector,t,n),t]}},Hm=class extends Fm{constructor(e){super(e,T.WorkspaceSymbolRequest.type)}fillClientCapabilities(e){let t=ne(ne(e,"workspace"),"symbol");t.dynamicRegistration=!0,t.symbolKind={valueSet:Tm},t.tagSupport={valueSet:Pm}}initialize(e){!e.workspaceSymbolProvider||this.register({id:Oe.generateUuid(),registerOptions:e.workspaceSymbolProvider===!0?{workDoneProgress:!1}:e.workspaceSymbolProvider})}registerLanguageProvider(e){let t={provideWorkspaceSymbols:(n,i)=>{let s=this._client,a=(u,g)=>s.sendRequest(T.WorkspaceSymbolRequest.type,{query:u},g).then(s.protocol2CodeConverter.asSymbolInformations,v=>s.handleFailedRequest(T.WorkspaceSymbolRequest.type,g,v,null)),l=s.clientOptions.middleware;return l.provideWorkspaceSymbols?l.provideWorkspaceSymbols(n,i,a):a(n,i)}};return[V.languages.registerWorkspaceSymbolProvider(t),t]}},zm=class extends Mt{constructor(e){super(e,T.CodeActionRequest.type)}fillClientCapabilities(e){let t=ne(ne(e,"textDocument"),"codeAction");t.dynamicRegistration=!0,t.isPreferredSupport=!0,t.disabledSupport=!0,t.dataSupport=!0,t.resolveSupport={properties:["edit"]},t.codeActionLiteralSupport={codeActionKind:{valueSet:[T.CodeActionKind.Empty,T.CodeActionKind.QuickFix,T.CodeActionKind.Refactor,T.CodeActionKind.RefactorExtract,T.CodeActionKind.RefactorInline,T.CodeActionKind.RefactorRewrite,T.CodeActionKind.Source,T.CodeActionKind.SourceOrganizeImports]}},t.honorsChangeAnnotations=!1}initialize(e,t){let n=this.getRegistrationOptions(t,e.codeActionProvider);!n||this.register({id:Oe.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let t={provideCodeActions:(n,i,s,a)=>{let l=this._client,u=(v,b,C,w)=>{let E={textDocument:l.code2ProtocolConverter.asTextDocumentIdentifier(v),range:l.code2ProtocolConverter.asRange(b),context:l.code2ProtocolConverter.asCodeActionContext(C)};return l.sendRequest(T.CodeActionRequest.type,E,w).then(q=>{if(q===null)return;let N=[];for(let A of q)T.Command.is(A)?N.push(l.protocol2CodeConverter.asCommand(A)):N.push(l.protocol2CodeConverter.asCodeAction(A));return N},q=>l.handleFailedRequest(T.CodeActionRequest.type,w,q,null))},g=l.clientOptions.middleware;return g.provideCodeActions?g.provideCodeActions(n,i,s,a,u):u(n,i,s,a)},resolveCodeAction:e.resolveProvider?(n,i)=>{let s=this._client,a=this._client.clientOptions.middleware,l=(u,g)=>s.sendRequest(T.CodeActionResolveRequest.type,s.code2ProtocolConverter.asCodeAction(u),g).then(s.protocol2CodeConverter.asCodeAction,v=>s.handleFailedRequest(T.CodeActionResolveRequest.type,g,v,u));return a.resolveCodeAction?a.resolveCodeAction(n,i,l):l(n,i)}:void 0};return[V.languages.registerCodeActionsProvider(e.documentSelector,t,e.codeActionKinds?{providedCodeActionKinds:this._client.protocol2CodeConverter.asCodeActionKinds(e.codeActionKinds)}:void 0),t]}},Bm=class extends Mt{constructor(e){super(e,T.CodeLensRequest.type)}fillClientCapabilities(e){ne(ne(e,"textDocument"),"codeLens").dynamicRegistration=!0,ne(ne(e,"workspace"),"codeLens").refreshSupport=!0}initialize(e,t){this._client.onRequest(T.CodeLensRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeCodeLensEmitter.fire()});let i=this.getRegistrationOptions(t,e.codeLensProvider);!i||this.register({id:Oe.generateUuid(),registerOptions:i})}registerLanguageProvider(e){let t=new V.EventEmitter,n={onDidChangeCodeLenses:t.event,provideCodeLenses:(i,s)=>{let a=this._client,l=(g,v)=>a.sendRequest(T.CodeLensRequest.type,a.code2ProtocolConverter.asCodeLensParams(g),v).then(a.protocol2CodeConverter.asCodeLenses,b=>a.handleFailedRequest(T.CodeLensRequest.type,v,b,null)),u=a.clientOptions.middleware;return u.provideCodeLenses?u.provideCodeLenses(i,s,l):l(i,s)},resolveCodeLens:e.resolveProvider?(i,s)=>{let a=this._client,l=(g,v)=>a.sendRequest(T.CodeLensResolveRequest.type,a.code2ProtocolConverter.asCodeLens(g),v).then(a.protocol2CodeConverter.asCodeLens,b=>a.handleFailedRequest(T.CodeLensResolveRequest.type,v,b,g)),u=a.clientOptions.middleware;return u.resolveCodeLens?u.resolveCodeLens(i,s,l):l(i,s)}:void 0};return[V.languages.registerCodeLensProvider(e.documentSelector,n),{provider:n,onDidChangeCodeLensEmitter:t}]}},Um=class extends Mt{constructor(e){super(e,T.DocumentFormattingRequest.type)}fillClientCapabilities(e){ne(ne(e,"textDocument"),"formatting").dynamicRegistration=!0}initialize(e,t){let n=this.getRegistrationOptions(t,e.documentFormattingProvider);!n||this.register({id:Oe.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let t={provideDocumentFormattingEdits:(n,i,s)=>{let a=this._client,l=(g,v,b)=>{let C={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(g),options:a.code2ProtocolConverter.asFormattingOptions(v,ss.fromConfiguration(g))};return a.sendRequest(T.DocumentFormattingRequest.type,C,b).then(a.protocol2CodeConverter.asTextEdits,w=>a.handleFailedRequest(T.DocumentFormattingRequest.type,b,w,null))},u=a.clientOptions.middleware;return u.provideDocumentFormattingEdits?u.provideDocumentFormattingEdits(n,i,s,l):l(n,i,s)}};return[V.languages.registerDocumentFormattingEditProvider(e.documentSelector,t),t]}},Km=class extends Mt{constructor(e){super(e,T.DocumentRangeFormattingRequest.type)}fillClientCapabilities(e){ne(ne(e,"textDocument"),"rangeFormatting").dynamicRegistration=!0}initialize(e,t){let n=this.getRegistrationOptions(t,e.documentRangeFormattingProvider);!n||this.register({id:Oe.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let t={provideDocumentRangeFormattingEdits:(n,i,s,a)=>{let l=this._client,u=(v,b,C,w)=>{let E={textDocument:l.code2ProtocolConverter.asTextDocumentIdentifier(v),range:l.code2ProtocolConverter.asRange(b),options:l.code2ProtocolConverter.asFormattingOptions(C,ss.fromConfiguration(v))};return l.sendRequest(T.DocumentRangeFormattingRequest.type,E,w).then(l.protocol2CodeConverter.asTextEdits,q=>l.handleFailedRequest(T.DocumentRangeFormattingRequest.type,w,q,null))},g=l.clientOptions.middleware;return g.provideDocumentRangeFormattingEdits?g.provideDocumentRangeFormattingEdits(n,i,s,a,u):u(n,i,s,a)}};return[V.languages.registerDocumentRangeFormattingEditProvider(e.documentSelector,t),t]}},Gm=class extends Mt{constructor(e){super(e,T.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(e){ne(ne(e,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(e,t){let n=this.getRegistrationOptions(t,e.documentOnTypeFormattingProvider);!n||this.register({id:Oe.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let t={provideOnTypeFormattingEdits:(i,s,a,l,u)=>{let g=this._client,v=(C,w,E,q,N)=>{let A={textDocument:g.code2ProtocolConverter.asTextDocumentIdentifier(C),position:g.code2ProtocolConverter.asPosition(w),ch:E,options:g.code2ProtocolConverter.asFormattingOptions(q,ss.fromConfiguration(C))};return g.sendRequest(T.DocumentOnTypeFormattingRequest.type,A,N).then(g.protocol2CodeConverter.asTextEdits,H=>g.handleFailedRequest(T.DocumentOnTypeFormattingRequest.type,N,H,null))},b=g.clientOptions.middleware;return b.provideOnTypeFormattingEdits?b.provideOnTypeFormattingEdits(i,s,a,l,u,v):v(i,s,a,l,u)}},n=e.moreTriggerCharacter||[];return[V.languages.registerOnTypeFormattingEditProvider(e.documentSelector,t,e.firstTriggerCharacter,...n),t]}},Vm=class extends Mt{constructor(e){super(e,T.RenameRequest.type)}fillClientCapabilities(e){let t=ne(ne(e,"textDocument"),"rename");t.dynamicRegistration=!0,t.prepareSupport=!0,t.prepareSupportDefaultBehavior=T.PrepareSupportDefaultBehavior.Identifier,t.honorsChangeAnnotations=!0}initialize(e,t){let n=this.getRegistrationOptions(t,e.renameProvider);!n||(qe.boolean(e.renameProvider)&&(n.prepareProvider=!1),this.register({id:Oe.generateUuid(),registerOptions:n}))}registerLanguageProvider(e){let t={provideRenameEdits:(n,i,s,a)=>{let l=this._client,u=(v,b,C,w)=>{let E={textDocument:l.code2ProtocolConverter.asTextDocumentIdentifier(v),position:l.code2ProtocolConverter.asPosition(b),newName:C};return l.sendRequest(T.RenameRequest.type,E,w).then(l.protocol2CodeConverter.asWorkspaceEdit,q=>l.handleFailedRequest(T.RenameRequest.type,w,q,null))},g=l.clientOptions.middleware;return g.provideRenameEdits?g.provideRenameEdits(n,i,s,a,u):u(n,i,s,a)},prepareRename:e.prepareProvider?(n,i,s)=>{let a=this._client,l=(g,v,b)=>{let C={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(g),position:a.code2ProtocolConverter.asPosition(v)};return a.sendRequest(T.PrepareRenameRequest.type,C,b).then(w=>T.Range.is(w)?a.protocol2CodeConverter.asRange(w):this.isDefaultBehavior(w)?w.defaultBehavior===!0?null:Promise.reject(new Error("The element can't be renamed.")):w&&T.Range.is(w.range)?{range:a.protocol2CodeConverter.asRange(w.range),placeholder:w.placeholder}:Promise.reject(new Error("The element can't be renamed.")),w=>{throw typeof w.message=="string"?new Error(w.message):new Error("The element can't be renamed.")})},u=a.clientOptions.middleware;return u.prepareRename?u.prepareRename(n,i,s,l):l(n,i,s)}:void 0};return[V.languages.registerRenameProvider(e.documentSelector,t),t]}isDefaultBehavior(e){let t=e;return t&&qe.boolean(t.defaultBehavior)}},Ym=class extends Mt{constructor(e){super(e,T.DocumentLinkRequest.type)}fillClientCapabilities(e){let t=ne(ne(e,"textDocument"),"documentLink");t.dynamicRegistration=!0,t.tooltipSupport=!0}initialize(e,t){let n=this.getRegistrationOptions(t,e.documentLinkProvider);!n||this.register({id:Oe.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let t={provideDocumentLinks:(n,i)=>{let s=this._client,a=(u,g)=>s.sendRequest(T.DocumentLinkRequest.type,s.code2ProtocolConverter.asDocumentLinkParams(u),g).then(s.protocol2CodeConverter.asDocumentLinks,v=>s.handleFailedRequest(T.DocumentLinkRequest.type,g,v,null)),l=s.clientOptions.middleware;return l.provideDocumentLinks?l.provideDocumentLinks(n,i,a):a(n,i)},resolveDocumentLink:e.resolveProvider?(n,i)=>{let s=this._client,a=(u,g)=>s.sendRequest(T.DocumentLinkResolveRequest.type,s.code2ProtocolConverter.asDocumentLink(u),g).then(s.protocol2CodeConverter.asDocumentLink,v=>s.handleFailedRequest(T.DocumentLinkResolveRequest.type,g,v,u)),l=s.clientOptions.middleware;return l.resolveDocumentLink?l.resolveDocumentLink(n,i,a):a(n,i)}:void 0};return[V.languages.registerDocumentLinkProvider(e.documentSelector,t),t]}},Xm=class{constructor(e){this._client=e,this._listeners=new Map}get registrationType(){return T.DidChangeConfigurationNotification.type}fillClientCapabilities(e){ne(ne(e,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){let e=this._client.clientOptions.synchronize.configurationSection;e!==void 0&&this.register({id:Oe.generateUuid(),registerOptions:{section:e}})}register(e){let t=V.workspace.onDidChangeConfiguration(n=>{this.onDidChangeConfiguration(e.registerOptions.section,n)});this._listeners.set(e.id,t),e.registerOptions.section!==void 0&&this.onDidChangeConfiguration(e.registerOptions.section,void 0)}unregister(e){let t=this._listeners.get(e);t&&(this._listeners.delete(e),t.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}onDidChangeConfiguration(e,t){let n;if(qe.string(e)?n=[e]:n=e,n!==void 0&&t!==void 0&&!n.some(l=>t.affectsConfiguration(l)))return;let i=a=>{if(a===void 0){this._client.sendNotification(T.DidChangeConfigurationNotification.type,{settings:null}).catch(l=>{this._client.error(`Sending notification ${T.DidChangeConfigurationNotification.type.method} failed`,l)});return}this._client.sendNotification(T.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(a)}).catch(l=>{this._client.error(`Sending notification ${T.DidChangeConfigurationNotification.type.method} failed`,l)})},s=this.getMiddleware();s?s(n,i):i(n)}extractSettingsInformation(e){function t(s,a){let l=s;for(let u=0;u<a.length-1;u++){let g=l[a[u]];g||(g=Object.create(null),l[a[u]]=g),l=g}return l}let n=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,i=Object.create(null);for(let s=0;s<e.length;s++){let a=e[s],l=a.indexOf("."),u=null;if(l>=0?u=V.workspace.getConfiguration(a.substr(0,l),n).get(a.substr(l+1)):u=V.workspace.getConfiguration(void 0,n).get(a),u){let g=e[s].split(".");t(i,g)[g[g.length-1]]=qE.toJSONObject(u)}}return i}getMiddleware(){let e=this._client.clientOptions.middleware;if(e.workspace&&e.workspace.didChangeConfiguration)return e.workspace.didChangeConfiguration}},Qm=class{constructor(e){this._client=e,this._commands=new Map}get registrationType(){return T.ExecuteCommandRequest.type}fillClientCapabilities(e){ne(ne(e,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(e){!e.executeCommandProvider||this.register({id:Oe.generateUuid(),registerOptions:Object.assign({},e.executeCommandProvider)})}register(e){let t=this._client,n=t.clientOptions.middleware,i=(s,a)=>{let l={command:s,arguments:a};return t.sendRequest(T.ExecuteCommandRequest.type,l).then(void 0,u=>t.handleFailedRequest(T.ExecuteCommandRequest.type,void 0,u,void 0))};if(e.registerOptions.commands){let s=[];for(let a of e.registerOptions.commands)s.push(V.commands.registerCommand(a,(...l)=>n.executeCommand?n.executeCommand(a,l,i):i(a,l)));this._commands.set(e.id,s)}}unregister(e){let t=this._commands.get(e);t&&t.forEach(n=>n.dispose())}dispose(){this._commands.forEach(e=>{e.forEach(t=>t.dispose())}),this._commands.clear()}},ME;(function(r){function e(t){return t&&T.MessageReader.is(t.reader)&&T.MessageWriter.is(t.writer)}r.is=e})(ME=Ne.MessageTransports||(Ne.MessageTransports={}));var ll=class{constructor(e,t){this._resolve=e,this._reject=t,this._used=!1}get isUsed(){return this._used}resolve(){this._used=!0,this._resolve()}reject(e){this._used=!0,this._reject(e)}},dl=class extends V.CancellationError{constructor(e){super();this.data=e}};Ne.LSPCancellationError=dl;var Vi=class{constructor(e,t,n){var i,s,a,l,u,g,v,b,C;this._traceFormat=T.TraceFormat.Text,this._features=[],this._dynamicFeatures=new Map,this._id=e,this._name=t,n=n||{};let w={isTrusted:!1};n.markdown!==void 0&&n.markdown.isTrusted===!0&&(w.isTrusted=!0),this._clientOptions={documentSelector:(i=n.documentSelector)!==null&&i!==void 0?i:[],synchronize:(s=n.synchronize)!==null&&s!==void 0?s:{},diagnosticCollectionName:n.diagnosticCollectionName,outputChannelName:(a=n.outputChannelName)!==null&&a!==void 0?a:this._name,revealOutputChannelOn:(l=n.revealOutputChannelOn)!==null&&l!==void 0?l:os.Error,stdioEncoding:(u=n.stdioEncoding)!==null&&u!==void 0?u:"utf8",initializationOptions:n.initializationOptions,initializationFailedHandler:n.initializationFailedHandler,progressOnInitialization:!!n.progressOnInitialization,errorHandler:(g=n.errorHandler)!==null&&g!==void 0?g:this.createDefaultErrorHandler((v=n.connectionOptions)===null||v===void 0?void 0:v.maxRestartCount),middleware:(b=n.middleware)!==null&&b!==void 0?b:{},uriConverters:n.uriConverters,workspaceFolder:n.workspaceFolder,connectionOptions:n.connectionOptions,markdown:w,diagnosticPullOptions:(C=n.diagnosticPullOptions)!==null&&C!==void 0?C:{onChange:!0,onSave:!1}},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this._state=Ue.Initial,this._connectionPromise=void 0,this._resolvedConnection=void 0,this._initializeResult=void 0,n.outputChannel?(this._outputChannel=n.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._traceOutputChannel=n.traceOutputChannel,this._listeners=void 0,this._providers=void 0,this._diagnostics=void 0,this._fileEvents=[],this._fileEventDelayer=new Rm.Delayer(250),this._onReady=new Promise((E,q)=>{this._onReadyCallbacks=new ll(E,q)}),this._onStop=void 0,this._telemetryEmitter=new T.Emitter,this._stateChangeEmitter=new T.Emitter,this._trace=T.Trace.Off,this._tracer={log:(E,q)=>{qe.string(E)?this.logTrace(E,q):this.logObjectTrace(E)}},this._c2p=OE.createConverter(n.uriConverters?n.uriConverters.code2Protocol:void 0),this._p2c=AE.createConverter(n.uriConverters?n.uriConverters.protocol2Code:void 0,this._clientOptions.markdown.isTrusted),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get state(){return this._state}set state(e){let t=this.getPublicState();this._state=e;let n=this.getPublicState();n!==t&&this._stateChangeEmitter.fire({oldState:t,newState:n})}getPublicState(){return this.state===Ue.Running?La.Running:this.state===Ue.Starting?La.Starting:La.Stopped}get initializeResult(){return this._initializeResult}sendRequest(e,...t){if(!this.isConnectionActive())throw new Error(`Language client is not ready yet when handling ${qe.string(e)?e:e.method}`);this.forceDocumentSync();try{return this._resolvedConnection.sendRequest(e,...t)}catch(n){throw this.error(`Sending request ${qe.string(e)?e:e.method} failed.`,n),n}}onRequest(e,t){if(!this.isConnectionActive())throw new Error(`Language client is not ready yet when handling ${qe.string(e)?e:e.method}`);try{return this._resolvedConnection.onRequest(e,t)}catch(n){throw this.error(`Registering request handler ${qe.string(e)?e:e.method} failed.`,n),n}}sendNotification(e,t){if(!this.isConnectionActive())throw new Error(`Language client is not ready yet when handling ${qe.string(e)?e:e.method}`);this.forceDocumentSync();try{return this._resolvedConnection.sendNotification(e,t)}catch(n){throw this.error(`Sending notification ${qe.string(e)?e:e.method} failed.`,n),n}}onNotification(e,t){if(!this.isConnectionActive())throw new Error(`Language client is not ready yet when handling ${qe.string(e)?e:e.method}`);try{return this._resolvedConnection.onNotification(e,t)}catch(n){throw this.error(`Registering notification handler ${qe.string(e)?e:e.method} failed.`,n),n}}onProgress(e,t,n){if(!this.isConnectionActive())throw new Error("Language client is not ready yet when trying to send progress");try{if(T.WorkDoneProgress.is(e)){let i=this._clientOptions.middleware.handleWorkDoneProgress;if(i!==void 0)return this._resolvedConnection.onProgress(e,t,s=>{i(t,s,()=>n(s))})}return this._resolvedConnection.onProgress(e,t,n)}catch(i){throw this.error(`Registering progress handler for token ${t} failed.`,i),i}}sendProgress(e,t,n){if(!this.isConnectionActive())throw new Error("Language client is not ready yet when trying to send progress");this.forceDocumentSync();try{this._resolvedConnection.sendProgress(e,t,n)}catch(i){throw this.error(`Sending progress for token ${t} failed.`,i),i}}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=V.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get traceOutputChannel(){return this._traceOutputChannel?this._traceOutputChannel:this.outputChannel}get diagnostics(){return this._diagnostics}createDefaultErrorHandler(e){if(e!==void 0&&e<0)throw new Error(`Invalid maxRestartCount: ${e}`);return new Sm(this._name,e??4)}set trace(e){this._trace=e,this.onReady().then(()=>{this.resolveConnection().then(t=>{t.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})},()=>this.info("Setting trace value failed",void 0,!1))},()=>{})}data2String(e){if(e instanceof T.ResponseError){let t=e;return`  Message: ${t.message}
  Code: ${t.code} ${t.data?`
`+t.data.toString():""}`}return e instanceof Error?qe.string(e.stack)?e.stack:e.message:qe.string(e)?e:e.toString()}info(e,t,n=!0){this.outputChannel.appendLine(`[Info  - ${new Date().toLocaleTimeString()}] ${e}`),t!=null&&this.outputChannel.appendLine(this.data2String(t)),n&&this._clientOptions.revealOutputChannelOn<=os.Info&&this.showNotificationMessage()}warn(e,t,n=!0){this.outputChannel.appendLine(`[Warn  - ${new Date().toLocaleTimeString()}] ${e}`),t!=null&&this.outputChannel.appendLine(this.data2String(t)),n&&this._clientOptions.revealOutputChannelOn<=os.Warn&&this.showNotificationMessage()}error(e,t,n=!0){this.outputChannel.appendLine(`[Error - ${new Date().toLocaleTimeString()}] ${e}`),t!=null&&this.outputChannel.appendLine(this.data2String(t)),n&&this._clientOptions.revealOutputChannelOn<=os.Error&&this.showNotificationMessage()}showNotificationMessage(){V.window.showInformationMessage("A request has failed. See the output for more information.","Go to output").then(e=>{e!==void 0&&this.outputChannel.show(!0)})}logTrace(e,t){this.traceOutputChannel.appendLine(`[Trace - ${new Date().toLocaleTimeString()}] ${e}`),t&&this.traceOutputChannel.appendLine(this.data2String(t))}logObjectTrace(e){e.isLSPMessage&&e.type?this.traceOutputChannel.append(`[LSP   - ${new Date().toLocaleTimeString()}] `):this.traceOutputChannel.append(`[Trace - ${new Date().toLocaleTimeString()}] `),e&&this.traceOutputChannel.appendLine(`${JSON.stringify(e)}`)}needsStart(){return this.state===Ue.Initial||this.state===Ue.Stopping||this.state===Ue.Stopped}needsStop(){return this.state===Ue.Starting||this.state===Ue.Running}onReady(){return this._onReady}isConnectionActive(){return this.state===Ue.Running&&!!this._resolvedConnection}start(){return this._onReadyCallbacks.isUsed&&(this._onReady=new Promise((e,t)=>{this._onReadyCallbacks=new ll(e,t)})),this._listeners=[],this._providers=[],this._diagnostics||(this._diagnostics=this._clientOptions.diagnosticCollectionName?V.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):V.languages.createDiagnosticCollection()),this.state=Ue.Starting,this.resolveConnection().then(e=>(e.onLogMessage(t=>{switch(t.type){case T.MessageType.Error:this.error(t.message,void 0,!1);break;case T.MessageType.Warning:this.warn(t.message,void 0,!1);break;case T.MessageType.Info:this.info(t.message,void 0,!1);break;default:this.outputChannel.appendLine(t.message)}}),e.onShowMessage(t=>{switch(t.type){case T.MessageType.Error:V.window.showErrorMessage(t.message);break;case T.MessageType.Warning:V.window.showWarningMessage(t.message);break;case T.MessageType.Info:V.window.showInformationMessage(t.message);break;default:V.window.showInformationMessage(t.message)}}),e.onRequest(T.ShowMessageRequest.type,t=>{let n;switch(t.type){case T.MessageType.Error:n=V.window.showErrorMessage;break;case T.MessageType.Warning:n=V.window.showWarningMessage;break;case T.MessageType.Info:n=V.window.showInformationMessage;break;default:n=V.window.showInformationMessage}let i=t.actions||[];return n(t.message,...i)}),e.onTelemetry(t=>{this._telemetryEmitter.fire(t)}),e.onRequest(T.ShowDocumentRequest.type,async t=>{var n;let i=async a=>{let l=this.protocol2CodeConverter.asUri(a.uri);try{if(a.external===!0)return{success:await V.env.openExternal(l)};{let u={};return a.selection!==void 0&&(u.selection=this.protocol2CodeConverter.asRange(a.selection)),a.takeFocus===void 0||a.takeFocus===!1?u.preserveFocus=!0:a.takeFocus===!0&&(u.preserveFocus=!1),await V.window.showTextDocument(l,u),{success:!0}}}catch{return{success:!0}}},s=(n=this._clientOptions.middleware.window)===null||n===void 0?void 0:n.showDocument;return s!==void 0?s(t,i):i(t)}),e.listen(),this.initialize(e))).catch(e=>{this.state=Ue.StartFailed,this._onReadyCallbacks.reject(e),this.error("Starting client failed",e),V.window.showErrorMessage(`Couldn't start client ${this._name}`)}),new V.Disposable(()=>{this.needsStop()&&this.stop().catch(e=>{this.error("Stopping server failed.",e,!1)})})}resolveConnection(){return this._connectionPromise||(this._connectionPromise=this.createConnection()),this._connectionPromise}initialize(e){this.refreshTrace(e,!1);let t=this._clientOptions.initializationOptions,n=this._clientOptions.workspaceFolder?this._clientOptions.workspaceFolder.uri.fsPath:this._clientGetRootPath(),i={processId:null,clientInfo:{name:V.env.appName,version:V.version},locale:this.getLocale(),rootPath:n||null,rootUri:n?this._c2p.asUri(V.Uri.file(n)):null,capabilities:this.computeClientCapabilities(),initializationOptions:qe.func(t)?t():t,trace:T.Trace.toString(this._trace),workspaceFolders:null};if(this.fillInitializeParams(i),this._clientOptions.progressOnInitialization){let s=Oe.generateUuid(),a=new FE.ProgressPart(e,s);return i.workDoneToken=s,this.doInitialize(e,i).then(l=>(a.done(),l),l=>{throw a.cancel(),l})}else return this.doInitialize(e,i)}doInitialize(e,t){return e.initialize(t).then(n=>{this._resolvedConnection=e,this._initializeResult=n,this.state=Ue.Running;let i;return qe.number(n.capabilities.textDocumentSync)?n.capabilities.textDocumentSync===T.TextDocumentSyncKind.None?i={openClose:!1,change:T.TextDocumentSyncKind.None,save:void 0}:i={openClose:!0,change:n.capabilities.textDocumentSync,save:{includeText:!1}}:n.capabilities.textDocumentSync!==void 0&&n.capabilities.textDocumentSync!==null&&(i=n.capabilities.textDocumentSync),this._capabilities=Object.assign({},n.capabilities,{resolvedTextDocumentSync:i}),e.onDiagnostics(s=>this.handleDiagnostics(s)),e.onRequest(T.RegistrationRequest.type,s=>this.handleRegistrationRequest(s)),e.onRequest("client/registerFeature",s=>this.handleRegistrationRequest(s)),e.onRequest(T.UnregistrationRequest.type,s=>this.handleUnregistrationRequest(s)),e.onRequest("client/unregisterFeature",s=>this.handleUnregistrationRequest(s)),e.onRequest(T.ApplyWorkspaceEditRequest.type,s=>this.handleApplyWorkspaceEdit(s)),e.sendNotification(T.InitializedNotification.type,{}).then(()=>(this.hookFileEvents(e),this.hookConfigurationChanged(e),this.initializeFeatures(e),this._onReadyCallbacks.resolve(),n))}).then(void 0,n=>{throw this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(n)?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(n)):n instanceof T.ResponseError&&n.data&&n.data.retry?V.window.showErrorMessage(n.message,{title:"Retry",id:"retry"}).then(i=>{i&&i.id==="retry"?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(n))}):(n&&n.message&&V.window.showErrorMessage(n.message),this.error("Server initialization failed.",n),this.stop(),this._onReadyCallbacks.reject(n)),n})}_clientGetRootPath(){let e=V.workspace.workspaceFolders;if(!e||e.length===0)return;let t=e[0];if(t.uri.scheme==="file")return t.uri.fsPath}stop(){return this._initializeResult=void 0,this._connectionPromise?this.state===Ue.Stopping&&this._onStop?this._onStop:(this.state=Ue.Stopping,this.cleanUp(!1),this._onStop=this.resolveConnection().then(e=>e.shutdown().then(()=>e.exit().then(()=>{e.end(),e.dispose(),this.state=Ue.Stopped,this.cleanUpChannel(),this._onStop=void 0,this._connectionPromise=void 0,this._resolvedConnection=void 0})))):(this.state=Ue.Stopped,Promise.resolve())}cleanUp(e=!0,t=!0){this._listeners&&(this._listeners.forEach(n=>n.dispose()),this._listeners=void 0),this._providers&&(this._providers.forEach(n=>n.dispose()),this._providers=void 0),this._syncedDocuments&&this._syncedDocuments.clear();for(let n of this._features.values())n.dispose();e&&this.cleanUpChannel(),t&&this._diagnostics&&(this._diagnostics.dispose(),this._diagnostics=void 0)}cleanUpChannel(){this._outputChannel&&this._disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0)}notifyFileEvent(e){var t;let n=this;function i(a){n._fileEvents.push(a),n._fileEventDelayer.trigger(()=>{n.onReady().then(()=>{n.resolveConnection().then(l=>{n.isConnectionActive()&&(n.forceDocumentSync(),l.didChangeWatchedFiles({changes:n._fileEvents})),n._fileEvents=[]})},l=>{n.error("Notify file events failed.",l)})})}let s=(t=this.clientOptions.middleware)===null||t===void 0?void 0:t.workspace;(s==null?void 0:s.didChangeWatchedFile)?s.didChangeWatchedFile(e,i):i(e)}forceDocumentSync(){this._didChangeTextDocumentFeature===void 0&&(this._didChangeTextDocumentFeature=this._dynamicFeatures.get(T.DidChangeTextDocumentNotification.type.method)),this._didChangeTextDocumentFeature.forceDelivery()}handleDiagnostics(e){if(!this._diagnostics)return;let t=this._p2c.asUri(e.uri),n=this._p2c.asDiagnostics(e.diagnostics),i=this.clientOptions.middleware;i.handleDiagnostics?i.handleDiagnostics(t,n,(s,a)=>this.setDiagnostics(s,a)):this.setDiagnostics(t,n)}setDiagnostics(e,t){!this._diagnostics||this._diagnostics.set(e,t)}createConnection(){let e=(n,i,s)=>{this.handleConnectionError(n,i,s)},t=()=>{this.handleConnectionClosed()};return this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8").then(n=>IE(n.reader,n.writer,e,t,this._clientOptions.connectionOptions))}handleConnectionClosed(){if(this.state===Ue.Stopped)return;try{this._resolvedConnection&&this._resolvedConnection.dispose()}catch{}let e=li.DoNotRestart;if(this.state!==Ue.Stopping)try{e=this._clientOptions.errorHandler.closed()}catch{}this._connectionPromise=void 0,this._resolvedConnection=void 0,e===li.DoNotRestart?(this.error("Connection to server got closed. Server will not be restarted."),this.state===Ue.Starting?(this._onReadyCallbacks.reject(new Error("Connection to server got closed. Server will not be restarted.")),this.state=Ue.StartFailed):this.state=Ue.Stopped,this.cleanUp(!1,!0)):e===li.Restart&&(this.info("Connection to server got closed. Server will restart."),this.cleanUp(!1,!1),this.state=Ue.Initial,this.start())}handleConnectionError(e,t,n){this._clientOptions.errorHandler.error(e,t,n)===Ia.Shutdown&&(this.error("Connection to server is erroring. Shutting down server."),this.stop().catch(s=>{this.error("Stopping server failed",s,!1)}))}hookConfigurationChanged(e){V.workspace.onDidChangeConfiguration(()=>{this.refreshTrace(e,!0)})}refreshTrace(e,t=!1){let n=V.workspace.getConfiguration(this._id),i=T.Trace.Off,s=T.TraceFormat.Text;if(n){let a=n.get("trace.server","off");typeof a=="string"?i=T.Trace.fromString(a):(i=T.Trace.fromString(n.get("trace.server.verbosity","off")),s=T.TraceFormat.fromString(n.get("trace.server.format","text")))}this._trace=i,this._traceFormat=s,e.trace(this._trace,this._tracer,{sendNotification:t,traceFormat:this._traceFormat})}hookFileEvents(e){let t=this._clientOptions.synchronize.fileEvents;if(!t)return;let n;qe.array(t)?n=t:n=[t],!!n&&this._dynamicFeatures.get(T.DidChangeWatchedFilesNotification.type.method).registerRaw(Oe.generateUuid(),n)}registerFeatures(e){for(let t of e)this.registerFeature(t)}registerFeature(e){if(this._features.push(e),ul.is(e)){let t=e.registrationType;this._dynamicFeatures.set(t.method,e)}}getFeature(e){return this._dynamicFeatures.get(e)}registerBuiltinFeatures(){this.registerFeature(new Xm(this)),this.registerFeature(new Dm(this,this._syncedDocuments)),this.registerFeature(new xm(this)),this.registerFeature(new km(this)),this.registerFeature(new qm(this)),this.registerFeature(new Om(this)),this.registerFeature(new Em(this,this._syncedDocuments)),this.registerFeature(new Am(this,e=>this.notifyFileEvent(e))),this.registerFeature(new Im(this)),this.registerFeature(new Lm(this)),this.registerFeature(new Nm(this)),this.registerFeature(new Mm(this)),this.registerFeature(new jm(this)),this.registerFeature(new $m(this)),this.registerFeature(new Wm(this)),this.registerFeature(new Hm(this)),this.registerFeature(new zm(this)),this.registerFeature(new Bm(this)),this.registerFeature(new Um(this)),this.registerFeature(new Km(this)),this.registerFeature(new Gm(this)),this.registerFeature(new Vm(this)),this.registerFeature(new Ym(this)),this.registerFeature(new Qm(this))}fillInitializeParams(e){for(let t of this._features)qe.func(t.fillInitializeParams)&&t.fillInitializeParams(e)}computeClientCapabilities(){let e={};ne(e,"workspace").applyEdit=!0;let t=ne(ne(e,"workspace"),"workspaceEdit");t.documentChanges=!0,t.resourceOperations=[T.ResourceOperationKind.Create,T.ResourceOperationKind.Rename,T.ResourceOperationKind.Delete],t.failureHandling=T.FailureHandlingKind.TextOnlyTransactional,t.normalizesLineEndings=!0,t.changeAnnotationSupport={groupsOnLabel:!0};let n=ne(ne(e,"textDocument"),"publishDiagnostics");n.relatedInformation=!0,n.versionSupport=!1,n.tagSupport={valueSet:[T.DiagnosticTag.Unnecessary,T.DiagnosticTag.Deprecated]},n.codeDescriptionSupport=!0,n.dataSupport=!0;let i=ne(e,"window"),s=ne(i,"showMessage");s.messageActionItem={additionalPropertiesSupport:!0};let a=ne(i,"showDocument");a.support=!0;let l=ne(e,"general");l.staleRequestSupport={cancel:!0,retryOnContentModified:Array.from(Vi.RequestsToCancelOnContentModified)},l.regularExpressions={engine:"ECMAScript",version:"ES2020"},l.markdown={parser:"marked",version:"1.1.0"};for(let u of this._features)u.fillClientCapabilities(e);return e}initializeFeatures(e){let t=this._clientOptions.documentSelector;for(let n of this._features)n.initialize(this._capabilities,t)}handleRegistrationRequest(e){return new Promise((t,n)=>{for(let i of e.registrations){let s=this._dynamicFeatures.get(i.method);if(s===void 0){n(new Error(`No feature implementation for ${i.method} found. Registration failed.`));return}let a=i.registerOptions||{};a.documentSelector=a.documentSelector||this._clientOptions.documentSelector;let l={id:i.id,registerOptions:a};try{s.register(l)}catch(u){n(u);return}}t()})}handleUnregistrationRequest(e){return new Promise((t,n)=>{for(let i of e.unregisterations){let s=this._dynamicFeatures.get(i.method);if(!s){n(new Error(`No feature implementation for ${i.method} found. Unregistration failed.`));return}s.unregister(i.id)}t()})}handleApplyWorkspaceEdit(e){let t=e.edit,n=new Map;V.workspace.textDocuments.forEach(s=>n.set(s.uri.toString(),s));let i=!1;if(t.documentChanges){for(let s of t.documentChanges)if(T.TextDocumentEdit.is(s)&&s.textDocument.version&&s.textDocument.version>=0){let a=n.get(s.textDocument.uri);if(a&&a.version!==s.textDocument.version){i=!0;break}}}return i?Promise.resolve({applied:!1}):qe.asPromise(V.workspace.applyEdit(this._p2c.asWorkspaceEdit(e.edit)).then(s=>({applied:s})))}handleFailedRequest(e,t,n,i){if(n instanceof T.ResponseError){if(n.code===T.LSPErrorCodes.RequestCancelled||n.code===T.LSPErrorCodes.ServerCancelled){if(t!==void 0&&t.isCancellationRequested)return i;throw n.data!==void 0?new dl(n.data):new V.CancellationError}else if(n.code===T.LSPErrorCodes.ContentModified){if(Vi.RequestsToCancelOnContentModified.has(e.method))throw new V.CancellationError;return i}}throw this.error(`Request ${e.method} failed.`,n),n}};Ne.BaseLanguageClient=Vi;Vi.RequestsToCancelOnContentModified=new Set([T.SemanticTokensRequest.method,T.SemanticTokensRangeRequest.method,T.SemanticTokensDeltaRequest.method])});var ev=F(Ma=>{"use strict";Object.defineProperty(Ma,"__esModule",{value:!0});Ma.ColorProviderFeature=void 0;var Na=require("vscode"),as=Be(),jE=ir();function Jm(r,e){return r[e]===void 0&&(r[e]={}),r[e]}var Zm=class extends jE.TextDocumentFeature{constructor(e){super(e,as.DocumentColorRequest.type)}fillClientCapabilities(e){Jm(Jm(e,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(e,t){let[n,i]=this.getRegistration(t,e.colorProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let t={provideColorPresentations:(n,i,s)=>{let a=this._client,l=(g,v,b)=>{let C={color:g,textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(v.document),range:a.code2ProtocolConverter.asRange(v.range)};return a.sendRequest(as.ColorPresentationRequest.type,C,b).then(this.asColorPresentations.bind(this),w=>a.handleFailedRequest(as.ColorPresentationRequest.type,b,w,null))},u=a.clientOptions.middleware;return u.provideColorPresentations?u.provideColorPresentations(n,i,s,l):l(n,i,s)},provideDocumentColors:(n,i)=>{let s=this._client,a=(u,g)=>{let v={textDocument:s.code2ProtocolConverter.asTextDocumentIdentifier(u)};return s.sendRequest(as.DocumentColorRequest.type,v,g).then(this.asColorInformations.bind(this),b=>s.handleFailedRequest(as.ColorPresentationRequest.type,g,b,null))},l=s.clientOptions.middleware;return l.provideDocumentColors?l.provideDocumentColors(n,i,a):a(n,i)}};return[Na.languages.registerColorProvider(e.documentSelector,t),t]}asColor(e){return new Na.Color(e.red,e.green,e.blue,e.alpha)}asColorInformations(e){return Array.isArray(e)?e.map(t=>new Na.ColorInformation(this._client.protocol2CodeConverter.asRange(t.range),this.asColor(t.color))):[]}asColorPresentations(e){return Array.isArray(e)?e.map(t=>{let n=new Na.ColorPresentation(t.label);return n.additionalTextEdits=this._client.protocol2CodeConverter.asTextEdits(t.additionalTextEdits),n.textEdit=this._client.protocol2CodeConverter.asTextEdit(t.textEdit),n}):[]}};Ma.ColorProviderFeature=Zm});var nv=F(ja=>{"use strict";Object.defineProperty(ja,"__esModule",{value:!0});ja.ImplementationFeature=void 0;var $E=require("vscode"),fl=Be(),WE=ir();function tv(r,e){return r[e]===void 0&&(r[e]={}),r[e]}var rv=class extends WE.TextDocumentFeature{constructor(e){super(e,fl.ImplementationRequest.type)}fillClientCapabilities(e){let t=tv(tv(e,"textDocument"),"implementation");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[n,i]=this.getRegistration(t,e.implementationProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let t={provideImplementation:(n,i,s)=>{let a=this._client,l=(g,v,b)=>a.sendRequest(fl.ImplementationRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(g,v),b).then(a.protocol2CodeConverter.asDefinitionResult,C=>a.handleFailedRequest(fl.ImplementationRequest.type,b,C,null)),u=a.clientOptions.middleware;return u.provideImplementation?u.provideImplementation(n,i,s,l):l(n,i,s)}};return[$E.languages.registerImplementationProvider(e.documentSelector,t),t]}};ja.ImplementationFeature=rv});var ov=F(Wa=>{"use strict";Object.defineProperty(Wa,"__esModule",{value:!0});Wa.TypeDefinitionFeature=void 0;var HE=require("vscode"),hl=Be(),zE=ir();function $a(r,e){return r[e]===void 0&&(r[e]={}),r[e]}var iv=class extends zE.TextDocumentFeature{constructor(e){super(e,hl.TypeDefinitionRequest.type)}fillClientCapabilities(e){$a($a(e,"textDocument"),"typeDefinition").dynamicRegistration=!0;let t=$a($a(e,"textDocument"),"typeDefinition");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[n,i]=this.getRegistration(t,e.typeDefinitionProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let t={provideTypeDefinition:(n,i,s)=>{let a=this._client,l=(g,v,b)=>a.sendRequest(hl.TypeDefinitionRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(g,v),b).then(a.protocol2CodeConverter.asDefinitionResult,C=>a.handleFailedRequest(hl.TypeDefinitionRequest.type,b,C,null)),u=a.clientOptions.middleware;return u.provideTypeDefinition?u.provideTypeDefinition(n,i,s,l):l(n,i,s)}};return[HE.languages.registerTypeDefinitionProvider(e.documentSelector,t),t]}};Wa.TypeDefinitionFeature=iv});var av=F(Yi=>{"use strict";Object.defineProperty(Yi,"__esModule",{value:!0});Yi.WorkspaceFoldersFeature=Yi.arrayDiff=void 0;var BE=is(),Ha=require("vscode"),za=Be();function pl(r,e){if(r!==void 0)return r[e]}function gl(r,e){return r.filter(t=>e.indexOf(t)<0)}Yi.arrayDiff=gl;var sv=class{constructor(e){this._client=e,this._listeners=new Map}get registrationType(){return za.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){let t=Ha.workspace.workspaceFolders;this.initializeWithFolders(t),t===void 0?e.workspaceFolders=null:e.workspaceFolders=t.map(n=>this.asProtocol(n))}initializeWithFolders(e){this._initialFolders=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.workspaceFolders=!0}initialize(e){let t=this._client;t.onRequest(za.WorkspaceFoldersRequest.type,s=>{let a=()=>{let u=Ha.workspace.workspaceFolders;return u===void 0?null:u.map(v=>this.asProtocol(v))},l=t.clientOptions.middleware.workspace;return l&&l.workspaceFolders?l.workspaceFolders(s,a):a(s)});let n=pl(pl(pl(e,"workspace"),"workspaceFolders"),"changeNotifications"),i;typeof n=="string"?i=n:n===!0&&(i=BE.generateUuid()),i&&this.register({id:i,registerOptions:void 0})}sendInitialEvent(e){if(this._initialFolders&&e){let t=gl(this._initialFolders,e),n=gl(e,this._initialFolders);(n.length>0||t.length>0)&&this.doSendEvent(n,t)}else this._initialFolders?this.doSendEvent([],this._initialFolders):e&&this.doSendEvent(e,[])}doSendEvent(e,t){let n={event:{added:e.map(i=>this.asProtocol(i)),removed:t.map(i=>this.asProtocol(i))}};this._client.sendNotification(za.DidChangeWorkspaceFoldersNotification.type,n).catch(i=>{this._client.error(`Sending notification ${za.DidChangeWorkspaceFoldersNotification.type.method} failed`,i)})}register(e){let t=e.id,n=this._client,i=Ha.workspace.onDidChangeWorkspaceFolders(s=>{let a=u=>{this.doSendEvent(u.added,u.removed)},l=n.clientOptions.middleware.workspace;l&&l.didChangeWorkspaceFolders?l.didChangeWorkspaceFolders(s,a):a(s)});this._listeners.set(t,i),this.sendInitialEvent(Ha.workspace.workspaceFolders)}unregister(e){let t=this._listeners.get(e);t!==void 0&&(this._listeners.delete(e),t.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}asProtocol(e){return e===void 0?null:{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}};Yi.WorkspaceFoldersFeature=sv});var uv=F(Ba=>{"use strict";Object.defineProperty(Ba,"__esModule",{value:!0});Ba.FoldingRangeFeature=void 0;var cs=require("vscode"),Xi=Be(),UE=ir();function cv(r,e){return r[e]===void 0&&(r[e]={}),r[e]}var us=class extends UE.TextDocumentFeature{constructor(e){super(e,Xi.FoldingRangeRequest.type)}fillClientCapabilities(e){let t=cv(cv(e,"textDocument"),"foldingRange");t.dynamicRegistration=!0,t.rangeLimit=5e3,t.lineFoldingOnly=!0}initialize(e,t){let[n,i]=this.getRegistration(t,e.foldingRangeProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let t={provideFoldingRanges:(n,i,s)=>{let a=this._client,l=(g,v,b)=>{let C={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(g)};return a.sendRequest(Xi.FoldingRangeRequest.type,C,b).then(us.asFoldingRanges,w=>a.handleFailedRequest(Xi.FoldingRangeRequest.type,b,w,null))},u=a.clientOptions.middleware;return u.provideFoldingRanges?u.provideFoldingRanges(n,i,s,l):l(n,i,s)}};return[cs.languages.registerFoldingRangeProvider(e.documentSelector,t),t]}static asFoldingRangeKind(e){if(e)switch(e){case Xi.FoldingRangeKind.Comment:return cs.FoldingRangeKind.Comment;case Xi.FoldingRangeKind.Imports:return cs.FoldingRangeKind.Imports;case Xi.FoldingRangeKind.Region:return cs.FoldingRangeKind.Region}}static asFoldingRanges(e){return Array.isArray(e)?e.map(t=>new cs.FoldingRange(t.startLine,t.endLine,us.asFoldingRangeKind(t.kind))):[]}};Ba.FoldingRangeFeature=us});var fv=F(Ua=>{"use strict";Object.defineProperty(Ua,"__esModule",{value:!0});Ua.DeclarationFeature=void 0;var KE=require("vscode"),ml=Be(),GE=ir();function lv(r,e){return r[e]===void 0&&(r[e]={}),r[e]}var dv=class extends GE.TextDocumentFeature{constructor(e){super(e,ml.DeclarationRequest.type)}fillClientCapabilities(e){let t=lv(lv(e,"textDocument"),"declaration");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[n,i]=this.getRegistration(t,e.declarationProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let t={provideDeclaration:(n,i,s)=>{let a=this._client,l=(g,v,b)=>a.sendRequest(ml.DeclarationRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(g,v),b).then(a.protocol2CodeConverter.asDeclarationResult,C=>a.handleFailedRequest(ml.DeclarationRequest.type,b,C,null)),u=a.clientOptions.middleware;return u.provideDeclaration?u.provideDeclaration(n,i,s,l):l(n,i,s)}};return[KE.languages.registerDeclarationProvider(e.documentSelector,t),t]}};Ua.DeclarationFeature=dv});var gv=F(Ka=>{"use strict";Object.defineProperty(Ka,"__esModule",{value:!0});Ka.SelectionRangeFeature=void 0;var VE=require("vscode"),vl=Be(),YE=ir();function hv(r,e){return r[e]===void 0&&(r[e]=Object.create(null)),r[e]}var pv=class extends YE.TextDocumentFeature{constructor(e){super(e,vl.SelectionRangeRequest.type)}fillClientCapabilities(e){let t=hv(hv(e,"textDocument"),"selectionRange");t.dynamicRegistration=!0}initialize(e,t){let[n,i]=this.getRegistration(t,e.selectionRangeProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let t={provideSelectionRanges:(n,i,s)=>{let a=this._client,l=(g,v,b)=>{let C={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(g),positions:a.code2ProtocolConverter.asPositions(v)};return a.sendRequest(vl.SelectionRangeRequest.type,C,b).then(w=>a.protocol2CodeConverter.asSelectionRanges(w),w=>a.handleFailedRequest(vl.SelectionRangeRequest.type,b,w,null))},u=a.clientOptions.middleware;return u.provideSelectionRanges?u.provideSelectionRanges(n,i,s,l):l(n,i,s)}};return[VE.languages.registerSelectionRangeProvider(e.documentSelector,t),t]}};Ka.SelectionRangeFeature=pv});var vv=F(Ga=>{"use strict";Object.defineProperty(Ga,"__esModule",{value:!0});Ga.ProgressFeature=void 0;var XE=Be(),QE=cl();function JE(r,e){return r[e]===void 0&&(r[e]=Object.create(null)),r[e]}var mv=class{constructor(e){this._client=e,this.activeParts=new Set}fillClientCapabilities(e){JE(e,"window").workDoneProgress=!0}initialize(){let e=this._client,t=i=>{this.activeParts.delete(i)},n=i=>{this.activeParts.add(new QE.ProgressPart(this._client,i.token,t))};e.onRequest(XE.WorkDoneProgressCreateRequest.type,n)}dispose(){for(let e of this.activeParts)e.done();this.activeParts.clear()}};Ga.ProgressFeature=mv});var Cv=F(Va=>{"use strict";Object.defineProperty(Va,"__esModule",{value:!0});Va.CallHierarchyFeature=void 0;var ZE=require("vscode"),di=Be(),ex=ir();function yv(r,e){return r[e]===void 0&&(r[e]={}),r[e]}var bv=class{constructor(e){this.client=e,this.middleware=e.clientOptions.middleware}prepareCallHierarchy(e,t,n){let i=this.client,s=this.middleware,a=(l,u,g)=>{let v=i.code2ProtocolConverter.asTextDocumentPositionParams(l,u);return i.sendRequest(di.CallHierarchyPrepareRequest.type,v,g).then(b=>i.protocol2CodeConverter.asCallHierarchyItems(b),b=>i.handleFailedRequest(di.CallHierarchyPrepareRequest.type,g,b,null))};return s.prepareCallHierarchy?s.prepareCallHierarchy(e,t,n,a):a(e,t,n)}provideCallHierarchyIncomingCalls(e,t){let n=this.client,i=this.middleware,s=(a,l)=>{let u={item:n.code2ProtocolConverter.asCallHierarchyItem(a)};return n.sendRequest(di.CallHierarchyIncomingCallsRequest.type,u,l).then(g=>n.protocol2CodeConverter.asCallHierarchyIncomingCalls(g),g=>n.handleFailedRequest(di.CallHierarchyIncomingCallsRequest.type,l,g,null))};return i.provideCallHierarchyIncomingCalls?i.provideCallHierarchyIncomingCalls(e,t,s):s(e,t)}provideCallHierarchyOutgoingCalls(e,t){let n=this.client,i=this.middleware,s=(a,l)=>{let u={item:n.code2ProtocolConverter.asCallHierarchyItem(a)};return n.sendRequest(di.CallHierarchyOutgoingCallsRequest.type,u,l).then(g=>n.protocol2CodeConverter.asCallHierarchyOutgoingCalls(g),g=>n.handleFailedRequest(di.CallHierarchyOutgoingCallsRequest.type,l,g,null))};return i.provideCallHierarchyOutgoingCalls?i.provideCallHierarchyOutgoingCalls(e,t,s):s(e,t)}},wv=class extends ex.TextDocumentFeature{constructor(e){super(e,di.CallHierarchyPrepareRequest.type)}fillClientCapabilities(e){let n=yv(yv(e,"textDocument"),"callHierarchy");n.dynamicRegistration=!0}initialize(e,t){let[n,i]=this.getRegistration(t,e.callHierarchyProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let t=this._client,n=new bv(t);return[ZE.languages.registerCallHierarchyProvider(e.documentSelector,n),n]}};Va.CallHierarchyFeature=wv});var _v=F(Qa=>{"use strict";Object.defineProperty(Qa,"__esModule",{value:!0});Qa.SemanticTokensFeature=void 0;var Ya=require("vscode"),tx=ir(),fe=Be(),rx=yn();function Xa(r,e){return r[e]===void 0&&(r[e]={}),r[e]}var Rv=class extends tx.TextDocumentFeature{constructor(e){super(e,fe.SemanticTokensRegistrationType.type)}fillClientCapabilities(e){let t=Xa(Xa(e,"textDocument"),"semanticTokens");t.dynamicRegistration=!0,t.tokenTypes=[fe.SemanticTokenTypes.namespace,fe.SemanticTokenTypes.type,fe.SemanticTokenTypes.class,fe.SemanticTokenTypes.enum,fe.SemanticTokenTypes.interface,fe.SemanticTokenTypes.struct,fe.SemanticTokenTypes.typeParameter,fe.SemanticTokenTypes.parameter,fe.SemanticTokenTypes.variable,fe.SemanticTokenTypes.property,fe.SemanticTokenTypes.enumMember,fe.SemanticTokenTypes.event,fe.SemanticTokenTypes.function,fe.SemanticTokenTypes.method,fe.SemanticTokenTypes.macro,fe.SemanticTokenTypes.keyword,fe.SemanticTokenTypes.modifier,fe.SemanticTokenTypes.comment,fe.SemanticTokenTypes.string,fe.SemanticTokenTypes.number,fe.SemanticTokenTypes.regexp,fe.SemanticTokenTypes.operator],t.tokenModifiers=[fe.SemanticTokenModifiers.declaration,fe.SemanticTokenModifiers.definition,fe.SemanticTokenModifiers.readonly,fe.SemanticTokenModifiers.static,fe.SemanticTokenModifiers.deprecated,fe.SemanticTokenModifiers.abstract,fe.SemanticTokenModifiers.async,fe.SemanticTokenModifiers.modification,fe.SemanticTokenModifiers.documentation,fe.SemanticTokenModifiers.defaultLibrary],t.formats=[fe.TokenFormat.Relative],t.requests={range:!0,full:{delta:!0}},t.multilineTokenSupport=!1,t.overlappingTokenSupport=!1,Xa(Xa(e,"workspace"),"semanticTokens").refreshSupport=!0}initialize(e,t){this._client.onRequest(fe.SemanticTokensRefreshRequest.type,async()=>{for(let a of this.getAllProviders())a.onDidChangeSemanticTokensEmitter.fire()});let[i,s]=this.getRegistration(t,e.semanticTokensProvider);!i||!s||this.register({id:i,registerOptions:s})}registerLanguageProvider(e){let t=rx.boolean(e.full)?e.full:e.full!==void 0,n=e.full!==void 0&&typeof e.full!="boolean"&&e.full.delta===!0,i=new Ya.EventEmitter,s=t?{onDidChangeSemanticTokens:i.event,provideDocumentSemanticTokens:(b,C)=>{let w=this._client,E=w.clientOptions.middleware,q=(N,A)=>{let H={textDocument:w.code2ProtocolConverter.asTextDocumentIdentifier(N)};return w.sendRequest(fe.SemanticTokensRequest.type,H,A).then(O=>w.protocol2CodeConverter.asSemanticTokens(O),O=>w.handleFailedRequest(fe.SemanticTokensRequest.type,A,O,null))};return E.provideDocumentSemanticTokens?E.provideDocumentSemanticTokens(b,C,q):q(b,C)},provideDocumentSemanticTokensEdits:n?(b,C,w)=>{let E=this._client,q=E.clientOptions.middleware,N=(A,H,O)=>{let z={textDocument:E.code2ProtocolConverter.asTextDocumentIdentifier(A),previousResultId:H};return E.sendRequest(fe.SemanticTokensDeltaRequest.type,z,O).then(M=>fe.SemanticTokens.is(M)?E.protocol2CodeConverter.asSemanticTokens(M):E.protocol2CodeConverter.asSemanticTokensEdits(M),M=>E.handleFailedRequest(fe.SemanticTokensDeltaRequest.type,O,M,null))};return q.provideDocumentSemanticTokensEdits?q.provideDocumentSemanticTokensEdits(b,C,w,N):N(b,C,w)}:void 0}:void 0,l=e.range===!0?{provideDocumentRangeSemanticTokens:(b,C,w)=>{let E=this._client,q=E.clientOptions.middleware,N=(A,H,O)=>{let z={textDocument:E.code2ProtocolConverter.asTextDocumentIdentifier(A),range:E.code2ProtocolConverter.asRange(H)};return E.sendRequest(fe.SemanticTokensRangeRequest.type,z,O).then(M=>E.protocol2CodeConverter.asSemanticTokens(M),M=>E.handleFailedRequest(fe.SemanticTokensRangeRequest.type,O,M,null))};return q.provideDocumentRangeSemanticTokens?q.provideDocumentRangeSemanticTokens(b,C,w,N):N(b,C,w)}}:void 0,u=[],v=this._client.protocol2CodeConverter.asSemanticTokensLegend(e.legend);return s!==void 0&&u.push(Ya.languages.registerDocumentSemanticTokensProvider(e.documentSelector,s,v)),l!==void 0&&u.push(Ya.languages.registerDocumentRangeSemanticTokensProvider(e.documentSelector,l,v)),[new Ya.Disposable(()=>u.forEach(b=>b.dispose())),{range:l,full:s,onDidChangeSemanticTokensEmitter:i}]}};Qa.SemanticTokensFeature=Rv});var Tv=F((BO,Sv)=>{Sv.exports=function(r,e){for(var t=[],n=0;n<r.length;n++){var i=e(r[n],n);nx(i)?t.push.apply(t,i):t.push(i)}return t};var nx=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"}});var kv=F((UO,xv)=>{"use strict";xv.exports=Pv;function Pv(r,e,t){r instanceof RegExp&&(r=Dv(r,t)),e instanceof RegExp&&(e=Dv(e,t));var n=Ev(r,e,t);return n&&{start:n[0],end:n[1],pre:t.slice(0,n[0]),body:t.slice(n[0]+r.length,n[1]),post:t.slice(n[1]+e.length)}}function Dv(r,e){var t=e.match(r);return t?t[0]:null}Pv.range=Ev;function Ev(r,e,t){var n,i,s,a,l,u=t.indexOf(r),g=t.indexOf(e,u+1),v=u;if(u>=0&&g>0){if(r===e)return[u,g];for(n=[],s=t.length;v>=0&&!l;)v==u?(n.push(v),u=t.indexOf(r,v+1)):n.length==1?l=[n.pop(),g]:(i=n.pop(),i<s&&(s=i,a=g),g=t.indexOf(e,v+1)),v=u<g&&u>=0?u:g;n.length&&(l=[s,a])}return l}});var Mv=F((KO,Nv)=>{var ix=Tv(),qv=kv();Nv.exports=ax;var Ov="\0SLASH"+Math.random()+"\0",Av="\0OPEN"+Math.random()+"\0",yl="\0CLOSE"+Math.random()+"\0",Fv="\0COMMA"+Math.random()+"\0",Iv="\0PERIOD"+Math.random()+"\0";function bl(r){return parseInt(r,10)==r?parseInt(r,10):r.charCodeAt(0)}function ox(r){return r.split("\\\\").join(Ov).split("\\{").join(Av).split("\\}").join(yl).split("\\,").join(Fv).split("\\.").join(Iv)}function sx(r){return r.split(Ov).join("\\").split(Av).join("{").split(yl).join("}").split(Fv).join(",").split(Iv).join(".")}function Lv(r){if(!r)return[""];var e=[],t=qv("{","}",r);if(!t)return r.split(",");var n=t.pre,i=t.body,s=t.post,a=n.split(",");a[a.length-1]+="{"+i+"}";var l=Lv(s);return s.length&&(a[a.length-1]+=l.shift(),a.push.apply(a,l)),e.push.apply(e,a),e}function ax(r){return r?(r.substr(0,2)==="{}"&&(r="\\{\\}"+r.substr(2)),Qi(ox(r),!0).map(sx)):[]}function cx(r){return"{"+r+"}"}function ux(r){return/^-?0\d/.test(r)}function lx(r,e){return r<=e}function dx(r,e){return r>=e}function Qi(r,e){var t=[],n=qv("{","}",r);if(!n||/\$$/.test(n.pre))return[r];var i=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),s=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),a=i||s,l=n.body.indexOf(",")>=0;if(!a&&!l)return n.post.match(/,.*\}/)?(r=n.pre+"{"+n.body+yl+n.post,Qi(r)):[r];var u;if(a)u=n.body.split(/\.\./);else if(u=Lv(n.body),u.length===1&&(u=Qi(u[0],!1).map(cx),u.length===1)){var v=n.post.length?Qi(n.post,!1):[""];return v.map(function(je){return n.pre+u[0]+je})}var g=n.pre,v=n.post.length?Qi(n.post,!1):[""],b;if(a){var C=bl(u[0]),w=bl(u[1]),E=Math.max(u[0].length,u[1].length),q=u.length==3?Math.abs(bl(u[2])):1,N=lx,A=w<C;A&&(q*=-1,N=dx);var H=u.some(ux);b=[];for(var O=C;N(O,w);O+=q){var z;if(s)z=String.fromCharCode(O),z==="\\"&&(z="");else if(z=String(O),H){var M=E-z.length;if(M>0){var G=new Array(M+1).join("0");O<0?z="-"+G+z.slice(1):z=G+z}}b.push(z)}}else b=ix(u,function(Je){return Qi(Je,!1)});for(var X=0;X<b.length;X++)for(var _e=0;_e<v.length;_e++){var Ae=g+b[X]+v[_e];(!e||a||Ae)&&t.push(Ae)}return t}});var Uv=F((GO,Bv)=>{Bv.exports=Er;Er.Minimatch=Ct;var ls={sep:"/"};try{ls=require("path")}catch{}var wl=Er.GLOBSTAR=Ct.GLOBSTAR={},fx=Mv(),jv={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},Cl="[^/]",Rl=Cl+"*?",hx="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",px="(?:(?!(?:\\/|^)\\.).)*?",$v=gx("().*{}+?[]^$\\!");function gx(r){return r.split("").reduce(function(e,t){return e[t]=!0,e},{})}var Wv=/\/+/;Er.filter=mx;function mx(r,e){return e=e||{},function(t,n,i){return Er(t,r,e)}}function Hv(r,e){r=r||{},e=e||{};var t={};return Object.keys(e).forEach(function(n){t[n]=e[n]}),Object.keys(r).forEach(function(n){t[n]=r[n]}),t}Er.defaults=function(r){if(!r||!Object.keys(r).length)return Er;var e=Er,t=function(i,s,a){return e.minimatch(i,s,Hv(r,a))};return t.Minimatch=function(i,s){return new e.Minimatch(i,Hv(r,s))},t};Ct.defaults=function(r){return!r||!Object.keys(r).length?Ct:Er.defaults(r).Minimatch};function Er(r,e,t){if(typeof e!="string")throw new TypeError("glob pattern string required");return t||(t={}),!t.nocomment&&e.charAt(0)==="#"?!1:e.trim()===""?r==="":new Ct(e,t).match(r)}function Ct(r,e){if(!(this instanceof Ct))return new Ct(r,e);if(typeof r!="string")throw new TypeError("glob pattern string required");e||(e={}),r=r.trim(),ls.sep!=="/"&&(r=r.split(ls.sep).join("/")),this.options=e,this.set=[],this.pattern=r,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}Ct.prototype.debug=function(){};Ct.prototype.make=vx;function vx(){if(!this._made){var r=this.pattern,e=this.options;if(!e.nocomment&&r.charAt(0)==="#"){this.comment=!0;return}if(!r){this.empty=!0;return}this.parseNegate();var t=this.globSet=this.braceExpand();e.debug&&(this.debug=console.error),this.debug(this.pattern,t),t=this.globParts=t.map(function(n){return n.split(Wv)}),this.debug(this.pattern,t),t=t.map(function(n,i,s){return n.map(this.parse,this)},this),this.debug(this.pattern,t),t=t.filter(function(n){return n.indexOf(!1)===-1}),this.debug(this.pattern,t),this.set=t}}Ct.prototype.parseNegate=yx;function yx(){var r=this.pattern,e=!1,t=this.options,n=0;if(!t.nonegate){for(var i=0,s=r.length;i<s&&r.charAt(i)==="!";i++)e=!e,n++;n&&(this.pattern=r.substr(n)),this.negate=e}}Er.braceExpand=function(r,e){return zv(r,e)};Ct.prototype.braceExpand=zv;function zv(r,e){if(e||(this instanceof Ct?e=this.options:e={}),r=typeof r=="undefined"?this.pattern:r,typeof r=="undefined")throw new TypeError("undefined pattern");return e.nobrace||!r.match(/\{.*\}/)?[r]:fx(r)}Ct.prototype.parse=bx;var Ja={};function bx(r,e){if(r.length>1024*64)throw new TypeError("pattern is too long");var t=this.options;if(!t.noglobstar&&r==="**")return wl;if(r==="")return"";var n="",i=!!t.nocase,s=!1,a=[],l=[],u,g=!1,v=-1,b=-1,C=r.charAt(0)==="."?"":t.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",w=this;function E(){if(u){switch(u){case"*":n+=Rl,i=!0;break;case"?":n+=Cl,i=!0;break;default:n+="\\"+u;break}w.debug("clearStateChar %j %j",u,n),u=!1}}for(var q=0,N=r.length,A;q<N&&(A=r.charAt(q));q++){if(this.debug("%s	%s %s %j",r,q,n,A),s&&$v[A]){n+="\\"+A,s=!1;continue}switch(A){case"/":return!1;case"\\":E(),s=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",r,q,n,A),g){this.debug("  in class"),A==="!"&&q===b+1&&(A="^"),n+=A;continue}w.debug("call clearStateChar %j",u),E(),u=A,t.noext&&E();continue;case"(":if(g){n+="(";continue}if(!u){n+="\\(";continue}a.push({type:u,start:q-1,reStart:n.length,open:jv[u].open,close:jv[u].close}),n+=u==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",u,n),u=!1;continue;case")":if(g||!a.length){n+="\\)";continue}E(),i=!0;var H=a.pop();n+=H.close,H.type==="!"&&l.push(H),H.reEnd=n.length;continue;case"|":if(g||!a.length||s){n+="\\|",s=!1;continue}E(),n+="|";continue;case"[":if(E(),g){n+="\\"+A;continue}g=!0,b=q,v=n.length,n+=A;continue;case"]":if(q===b+1||!g){n+="\\"+A,s=!1;continue}if(g){var O=r.substring(b+1,q);try{RegExp("["+O+"]")}catch{var z=this.parse(O,Ja);n=n.substr(0,v)+"\\["+z[0]+"\\]",i=i||z[1],g=!1;continue}}i=!0,g=!1,n+=A;continue;default:E(),s?s=!1:$v[A]&&!(A==="^"&&g)&&(n+="\\"),n+=A}}for(g&&(O=r.substr(b+1),z=this.parse(O,Ja),n=n.substr(0,v)+"\\["+z[0],i=i||z[1]),H=a.pop();H;H=a.pop()){var M=n.slice(H.reStart+H.open.length);this.debug("setting tail",n,H),M=M.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(ut,Pt,Ot){return Ot||(Ot="\\"),Pt+Pt+Ot+"|"}),this.debug(`tail=%j
   %s`,M,M,H,n);var G=H.type==="*"?Rl:H.type==="?"?Cl:"\\"+H.type;i=!0,n=n.slice(0,H.reStart)+G+"\\("+M}E(),s&&(n+="\\\\");var X=!1;switch(n.charAt(0)){case".":case"[":case"(":X=!0}for(var _e=l.length-1;_e>-1;_e--){var Ae=l[_e],Je=n.slice(0,Ae.reStart),je=n.slice(Ae.reStart,Ae.reEnd-8),Fe=n.slice(Ae.reEnd-8,Ae.reEnd),ct=n.slice(Ae.reEnd);Fe+=ct;var St=Je.split("(").length-1,Tt=ct;for(q=0;q<St;q++)Tt=Tt.replace(/\)[+*?]?/,"");ct=Tt;var Wt="";ct===""&&e!==Ja&&(Wt="$");var $e=Je+je+ct+Wt+Fe;n=$e}if(n!==""&&i&&(n="(?=.)"+n),X&&(n=C+n),e===Ja)return[n,i];if(!i)return Rx(r);var gt=t.nocase?"i":"";try{var mt=new RegExp("^"+n+"$",gt)}catch{return new RegExp("$.")}return mt._glob=r,mt._src=n,mt}Er.makeRe=function(r,e){return new Ct(r,e||{}).makeRe()};Ct.prototype.makeRe=wx;function wx(){if(this.regexp||this.regexp===!1)return this.regexp;var r=this.set;if(!r.length)return this.regexp=!1,this.regexp;var e=this.options,t=e.noglobstar?Rl:e.dot?hx:px,n=e.nocase?"i":"",i=r.map(function(s){return s.map(function(a){return a===wl?t:typeof a=="string"?_x(a):a._src}).join("\\/")}).join("|");i="^(?:"+i+")$",this.negate&&(i="^(?!"+i+").*$");try{this.regexp=new RegExp(i,n)}catch{this.regexp=!1}return this.regexp}Er.match=function(r,e,t){t=t||{};var n=new Ct(e,t);return r=r.filter(function(i){return n.match(i)}),n.options.nonull&&!r.length&&r.push(e),r};Ct.prototype.match=Cx;function Cx(r,e){if(this.debug("match",r,this.pattern),this.comment)return!1;if(this.empty)return r==="";if(r==="/"&&e)return!0;var t=this.options;ls.sep!=="/"&&(r=r.split(ls.sep).join("/")),r=r.split(Wv),this.debug(this.pattern,"split",r);var n=this.set;this.debug(this.pattern,"set",n);var i,s;for(s=r.length-1;s>=0&&(i=r[s],!i);s--);for(s=0;s<n.length;s++){var a=n[s],l=r;t.matchBase&&a.length===1&&(l=[i]);var u=this.matchOne(l,a,e);if(u)return t.flipNegate?!0:!this.negate}return t.flipNegate?!1:this.negate}Ct.prototype.matchOne=function(r,e,t){var n=this.options;this.debug("matchOne",{this:this,file:r,pattern:e}),this.debug("matchOne",r.length,e.length);for(var i=0,s=0,a=r.length,l=e.length;i<a&&s<l;i++,s++){this.debug("matchOne loop");var u=e[s],g=r[i];if(this.debug(e,u,g),u===!1)return!1;if(u===wl){this.debug("GLOBSTAR",[e,u,g]);var v=i,b=s+1;if(b===l){for(this.debug("** at the end");i<a;i++)if(r[i]==="."||r[i]===".."||!n.dot&&r[i].charAt(0)===".")return!1;return!0}for(;v<a;){var C=r[v];if(this.debug(`
globstar while`,r,v,e,b,C),this.matchOne(r.slice(v),e.slice(b),t))return this.debug("globstar found match!",v,a,C),!0;if(C==="."||C===".."||!n.dot&&C.charAt(0)==="."){this.debug("dot detected!",r,v,e,b);break}this.debug("globstar swallow a segment, and continue"),v++}return!!(t&&(this.debug(`
>>> no match, partial?`,r,v,e,b),v===a))}var w;if(typeof u=="string"?(n.nocase?w=g.toLowerCase()===u.toLowerCase():w=g===u,this.debug("string match",u,g,w)):(w=g.match(u),this.debug("pattern match",u,g,w)),!w)return!1}if(i===a&&s===l)return!0;if(i===a)return t;if(s===l){var E=i===a-1&&r[i]==="";return E}throw new Error("wtf?")};function Rx(r){return r.replace(/\\(.)/g,"$1")}function _x(r){return r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}});var ey=F(or=>{"use strict";Object.defineProperty(or,"__esModule",{value:!0});or.WillDeleteFilesFeature=or.WillRenameFilesFeature=or.WillCreateFilesFeature=or.DidDeleteFilesFeature=or.DidRenameFilesFeature=or.DidCreateFilesFeature=void 0;var sn=require("vscode"),Sx=Uv(),_n=Be(),Tx=is();function Kv(r,e){return r[e]===void 0&&(r[e]={}),r[e]}function Px(r,e){return r[e]}function Gv(r,e,t){r[e]=t}var fi=class{constructor(e,t,n,i,s){this._filters=new Map,this._client=e,this._event=t,this._registrationType=n,this._clientCapability=i,this._serverCapability=s}get registrationType(){return this._registrationType}fillClientCapabilities(e){let t=Kv(Kv(e,"workspace"),"fileOperations");Gv(t,"dynamicRegistration",!0),Gv(t,this._clientCapability,!0)}initialize(e){var t;let n=(t=e.workspace)===null||t===void 0?void 0:t.fileOperations,i=n!==void 0?Px(n,this._serverCapability):void 0;if((i==null?void 0:i.filters)!==void 0)try{this.register({id:Tx.generateUuid(),registerOptions:{filters:i.filters}})}catch(s){this._client.warn(`Ignoring invalid glob pattern for ${this._serverCapability} registration: ${s}`)}}register(e){this._listener||(this._listener=this._event(this.send,this));let t=e.registerOptions.filters.map(n=>{let i=new Sx.Minimatch(n.pattern.glob,fi.asMinimatchOptions(n.pattern.options));if(!i.makeRe())throw new Error(`Invalid pattern ${n.pattern.glob}!`);return{scheme:n.scheme,matcher:i,kind:n.pattern.matches}});this._filters.set(e.id,t)}unregister(e){this._filters.delete(e),this._filters.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._filters.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}async filter(e,t){let n=await Promise.all(e.files.map(async s=>{let a=t(s),l=a.fsPath.replace(/\\/g,"/");for(let u of this._filters.values())for(let g of u)if(!(g.scheme!==void 0&&g.scheme!==a.scheme)){if(g.matcher.match(l)){if(g.kind===void 0)return!0;let v=await fi.getFileType(a);if(v===void 0)return this._client.error(`Failed to determine file type for ${a.toString()}.`),!0;if(v===sn.FileType.File&&g.kind===_n.FileOperationPatternKind.file||v===sn.FileType.Directory&&g.kind===_n.FileOperationPatternKind.folder)return!0}else if(g.kind===_n.FileOperationPatternKind.folder&&await fi.getFileType(a)===sn.FileType.Directory&&g.matcher.match(`${l}/`))return!0}return!1})),i=e.files.filter((s,a)=>n[a]);return Object.assign(Object.assign({},e),{files:i})}static async getFileType(e){try{return(await sn.workspace.fs.stat(e)).type}catch{return}}static asMinimatchOptions(e){if(e!==void 0&&e.ignoreCase===!0)return{nocase:!0}}},Za=class extends fi{constructor(e,t,n,i,s,a,l){super(e,t,n,i,s);this._notificationType=n,this._accessUri=a,this._createParams=l}async send(e){let t=await this.filter(e,this._accessUri);if(t.files.length){let n=async i=>this._client.sendNotification(this._notificationType,this._createParams(i));this.doSend(t,n)}}},Vv=class extends Za{constructor(e){super(e,sn.workspace.onDidCreateFiles,_n.DidCreateFilesNotification.type,"didCreate","didCreate",t=>t,e.code2ProtocolConverter.asDidCreateFilesParams)}doSend(e,t){var n;let i=(n=this._client.clientOptions.middleware)===null||n===void 0?void 0:n.workspace;return(i==null?void 0:i.didCreateFiles)?i.didCreateFiles(e,t):t(e)}};or.DidCreateFilesFeature=Vv;var Yv=class extends Za{constructor(e){super(e,sn.workspace.onDidRenameFiles,_n.DidRenameFilesNotification.type,"didRename","didRename",t=>t.oldUri,e.code2ProtocolConverter.asDidRenameFilesParams)}doSend(e,t){var n;let i=(n=this._client.clientOptions.middleware)===null||n===void 0?void 0:n.workspace;return(i==null?void 0:i.didRenameFiles)?i.didRenameFiles(e,t):t(e)}};or.DidRenameFilesFeature=Yv;var Xv=class extends Za{constructor(e){super(e,sn.workspace.onDidDeleteFiles,_n.DidDeleteFilesNotification.type,"didDelete","didDelete",t=>t,e.code2ProtocolConverter.asDidDeleteFilesParams)}doSend(e,t){var n;let i=(n=this._client.clientOptions.middleware)===null||n===void 0?void 0:n.workspace;return(i==null?void 0:i.didDeleteFiles)?i.didDeleteFiles(e,t):t(e)}};or.DidDeleteFilesFeature=Xv;var ec=class extends fi{constructor(e,t,n,i,s,a,l){super(e,t,n,i,s);this._requestType=n,this._accessUri=a,this._createParams=l}async send(e){let t=this.waitUntil(e);e.waitUntil(t)}async waitUntil(e){let t=await this.filter(e,this._accessUri);if(t.files.length){let n=i=>this._client.sendRequest(this._requestType,this._createParams(i)).then(this._client.protocol2CodeConverter.asWorkspaceEdit);return this.doSend(t,n)}else return}},Qv=class extends ec{constructor(e){super(e,sn.workspace.onWillCreateFiles,_n.WillCreateFilesRequest.type,"willCreate","willCreate",t=>t,e.code2ProtocolConverter.asWillCreateFilesParams)}doSend(e,t){var n;let i=(n=this._client.clientOptions.middleware)===null||n===void 0?void 0:n.workspace;return(i==null?void 0:i.willCreateFiles)?i.willCreateFiles(e,t):t(e)}};or.WillCreateFilesFeature=Qv;var Jv=class extends ec{constructor(e){super(e,sn.workspace.onWillRenameFiles,_n.WillRenameFilesRequest.type,"willRename","willRename",t=>t.oldUri,e.code2ProtocolConverter.asWillRenameFilesParams)}doSend(e,t){var n;let i=(n=this._client.clientOptions.middleware)===null||n===void 0?void 0:n.workspace;return(i==null?void 0:i.willRenameFiles)?i.willRenameFiles(e,t):t(e)}};or.WillRenameFilesFeature=Jv;var Zv=class extends ec{constructor(e){super(e,sn.workspace.onWillDeleteFiles,_n.WillDeleteFilesRequest.type,"willDelete","willDelete",t=>t,e.code2ProtocolConverter.asWillDeleteFilesParams)}doSend(e,t){var n;let i=(n=this._client.clientOptions.middleware)===null||n===void 0?void 0:n.workspace;return(i==null?void 0:i.willDeleteFiles)?i.willDeleteFiles(e,t):t(e)}};or.WillDeleteFilesFeature=Zv});var ny=F(tc=>{"use strict";Object.defineProperty(tc,"__esModule",{value:!0});tc.LinkedEditingFeature=void 0;var Dx=require("vscode"),_l=Be(),Ex=ir();function ty(r,e){return r[e]===void 0&&(r[e]={}),r[e]}var ry=class extends Ex.TextDocumentFeature{constructor(e){super(e,_l.LinkedEditingRangeRequest.type)}fillClientCapabilities(e){let t=ty(ty(e,"textDocument"),"linkedEditingRange");t.dynamicRegistration=!0}initialize(e,t){let[n,i]=this.getRegistration(t,e.linkedEditingRangeProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let t={provideLinkedEditingRanges:(n,i,s)=>{let a=this._client,l=(g,v,b)=>a.sendRequest(_l.LinkedEditingRangeRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(g,v),b).then(a.protocol2CodeConverter.asLinkedEditingRanges,C=>a.handleFailedRequest(_l.LinkedEditingRangeRequest.type,b,C,null)),u=a.clientOptions.middleware;return u.provideLinkedEditingRange?u.provideLinkedEditingRange(n,i,s,l):l(n,i,s)}};return[Dx.languages.registerLinkedEditingRangeProvider(e.documentSelector,t),t]}};tc.LinkedEditingFeature=ry});var dy=F(hi=>{"use strict";Object.defineProperty(hi,"__esModule",{value:!0});hi.DiagnosticFeature=hi.vsdiag=void 0;var Xt=require("vscode"),tt=Be(),xx=is(),ds=ir();function iy(r,e){return r[e]===void 0&&(r[e]={}),r[e]}var an;(function(r){let e;(function(t){t.full="full",t.unChanged="unChanged"})(e=r.DocumentDiagnosticReportKind||(r.DocumentDiagnosticReportKind={}))})(an=hi.vsdiag||(hi.vsdiag={}));var jt;(function(r){r.active="open",r.reschedule="reschedule",r.outDated="drop"})(jt||(jt={}));var oy=class{constructor(){this.open=new Set;let e=()=>{this.open.clear();for(let t of Xt.window.openEditors)this.open.add(t.resource.toString())};e(),this.disposable=Xt.window.onDidChangeOpenEditors(e)}dispose(){this.disposable.dispose()}isActive(e){var t;return((t=Xt.window.activeTextEditor)===null||t===void 0?void 0:t.document)===e}isVisible(e){return this.open.has(e.uri.toString())}},lr;(function(r){r[r.document=1]="document",r[r.workspace=2]="workspace"})(lr||(lr={}));var sy=class{constructor(){this.documentPullStates=new Map,this.workspacePullStates=new Map}track(e,t,n,i){let s=e===lr.document?this.documentPullStates:this.workspacePullStates,[a,l,u,g]=typeof t=="string"?[t,Xt.Uri.parse(t),n,i]:[t.uri.toString(),t.uri,t.version,n],v=s.get(a);return v===void 0?(v={document:l,pulledVersion:u,resultId:g},s.set(a,v)):(v.pulledVersion=u,v.resultId=g),v}unTrack(e,t){(e===lr.document?this.documentPullStates:this.workspacePullStates).delete(t.uri.toString())}tracks(e,t){let n=typeof t=="string"?t:t.uri.toString();return(e===lr.document?this.documentPullStates:this.workspacePullStates).has(n)}getResultId(e,t){var n;return(n=(e===lr.document?this.documentPullStates:this.workspacePullStates).get(t.uri.toString()))===null||n===void 0?void 0:n.resultId}getAllResultIds(){let e=[];for(let[t,n]of this.workspacePullStates)this.documentPullStates.has(t)&&(n=this.documentPullStates.get(t)),n.resultId!==void 0&&e.push({uri:t,value:n.resultId});return e}},ay=class{constructor(e,t,n){this.client=e,this.editorTracker=t,this.options=n,this.isDisposed=!1,this.onDidChangeDiagnosticsEmitter=new Xt.EventEmitter,this.provider=this.createProvider(),this.diagnostics=Xt.languages.createDiagnosticCollection(n.identifier),this.openRequests=new Map,this.documentStates=new sy,this.workspaceErrorCounter=0}knows(e,t){return this.documentStates.tracks(e,t)}pull(e,t){this.pullAsync(e).then(()=>{t&&t()},n=>{this.client.error(`Document pull failed for text document ${e.uri.toString()}`,n,!1)})}async pullAsync(e){var t;let n=e.uri.toString(),i=this.openRequests.get(n),s=this.documentStates.track(lr.document,e);if(i===void 0){let a=new Xt.CancellationTokenSource;this.openRequests.set(n,{state:jt.active,version:e.version,textDocument:e,tokenSource:a});let l,u;try{l=(t=await this.provider.provideDiagnostics(e,this.documentStates.getResultId(lr.document,e),a.token))!==null&&t!==void 0?t:{kind:an.DocumentDiagnosticReportKind.full,items:[]}}catch(g){if(g instanceof ds.LSPCancellationError&&tt.Proposed.DiagnosticServerCancellationData.is(g.data)&&g.data.retriggerRequest===!1&&(u={state:jt.outDated,textDocument:e}),u===void 0&&g instanceof Xt.CancellationError)u={state:jt.reschedule,textDocument:e};else throw g}if(u=u??this.openRequests.get(n),u===void 0){this.client.error(`Lost request state in diagnostic pull model. Clearing diagnostics for ${n}`),this.diagnostics.delete(e.uri);return}if(this.openRequests.delete(n),!this.editorTracker.isVisible(e)){this.documentStates.unTrack(lr.document,e);return}if(u.state===jt.outDated)return;l!==void 0&&(l.kind===an.DocumentDiagnosticReportKind.full&&this.diagnostics.set(e.uri,l.items),s.resultId=l.resultId),u.state===jt.reschedule&&this.pull(e)}else i.state===jt.active?(i.tokenSource.cancel(),this.openRequests.set(n,{state:jt.reschedule,textDocument:i.textDocument})):i.state===jt.outDated&&this.openRequests.set(n,{state:jt.reschedule,textDocument:i.textDocument})}cleanupPull(e){let t=e.uri.toString(),n=this.openRequests.get(t);this.options.workspaceDiagnostics||this.options.interFileDependencies?n!==void 0?this.openRequests.set(t,{state:jt.reschedule,textDocument:e}):this.pull(e):(n!==void 0&&(n.state===jt.active&&n.tokenSource.cancel(),this.openRequests.set(t,{state:jt.outDated,textDocument:e})),this.diagnostics.delete(e.uri))}pullWorkspace(){this.pullWorkspaceAsync().then(()=>{this.workspaceTimeout=tt.RAL().timer.setTimeout(()=>{this.pullWorkspace()},2e3)},e=>{!(e instanceof ds.LSPCancellationError)&&!tt.Proposed.DiagnosticServerCancellationData.is(e.data)&&(this.client.error("Workspace diagnostic pull failed.",e,!1),this.workspaceErrorCounter++),this.workspaceErrorCounter<=5&&(this.workspaceTimeout=tt.RAL().timer.setTimeout(()=>{this.pullWorkspace()},2e3))})}async pullWorkspaceAsync(){if(!this.provider.provideWorkspaceDiagnostics)return;this.workspaceCancellation!==void 0&&(this.workspaceCancellation.cancel(),this.workspaceCancellation=void 0),this.workspaceCancellation=new Xt.CancellationTokenSource;let e=this.documentStates.getAllResultIds().map(t=>({uri:this.client.protocol2CodeConverter.asUri(t.uri),value:t.value}));await this.provider.provideWorkspaceDiagnostics(e,this.workspaceCancellation.token,t=>{var n;if(!(!t||this.isDisposed))for(let i of t.items)i.kind===an.DocumentDiagnosticReportKind.full&&(this.documentStates.tracks(lr.document,i.uri.toString())||this.diagnostics.set(i.uri,i.items)),this.documentStates.track(lr.workspace,i.uri.toString(),(n=i.version)!==null&&n!==void 0?n:void 0,i.resultId)})}createProvider(){let e={onDidChangeDiagnostics:this.onDidChangeDiagnosticsEmitter.event,provideDiagnostics:(t,n,i)=>{let s=(l,u,g)=>{let v={identifier:this.options.identifier,textDocument:{uri:this.client.code2ProtocolConverter.asUri(l.uri)},previousResultId:u};return this.client.sendRequest(tt.Proposed.DocumentDiagnosticRequest.type,v,g).then(b=>b==null||this.isDisposed?{kind:an.DocumentDiagnosticReportKind.full,items:[]}:b.kind===tt.Proposed.DocumentDiagnosticReportKind.full?{kind:an.DocumentDiagnosticReportKind.full,resultId:b.resultId,items:this.client.protocol2CodeConverter.asDiagnostics(b.items)}:{kind:an.DocumentDiagnosticReportKind.unChanged,resultId:b.resultId},b=>this.client.handleFailedRequest(tt.Proposed.DocumentDiagnosticRequest.type,g,b,{kind:an.DocumentDiagnosticReportKind.full,items:[]}))},a=this.client.clientOptions.middleware;return a.provideDiagnostics?a.provideDiagnostics(t,n,i,s):s(t,n,i)}};return this.options.workspaceDiagnostics&&(e.provideWorkspaceDiagnostics=(t,n,i)=>{let s=g=>g.kind===tt.Proposed.DocumentDiagnosticReportKind.full?{kind:an.DocumentDiagnosticReportKind.full,uri:this.client.protocol2CodeConverter.asUri(g.uri),resultId:g.resultId,version:g.version,items:this.client.protocol2CodeConverter.asDiagnostics(g.items)}:{kind:an.DocumentDiagnosticReportKind.unChanged,uri:this.client.protocol2CodeConverter.asUri(g.uri),resultId:g.resultId,version:g.version},a=g=>{let v=[];for(let b of g)v.push({uri:this.client.code2ProtocolConverter.asUri(b.uri),value:b.value});return v},l=(g,v)=>{let b=xx.generateUuid(),C=this.client.onProgress(tt.Proposed.WorkspaceDiagnosticRequest.partialResult,b,E=>{if(E==null){i(null);return}let q={items:[]};for(let N of E.items)q.items.push(s(N));i(q)}),w={identifier:this.options.identifier,previousResultIds:a(g),partialResultToken:b};return this.client.sendRequest(tt.Proposed.WorkspaceDiagnosticRequest.type,w,v).then(E=>{let q={items:[]};for(let N of E.items)q.items.push(s(N));return C.dispose(),i(q),{items:[]}},E=>(C.dispose(),this.client.handleFailedRequest(tt.Proposed.DocumentDiagnosticRequest.type,v,E,{items:[]})))},u=this.client.clientOptions.middleware;return u.provideWorkspaceDiagnostics?u.provideWorkspaceDiagnostics(t,n,i,l):l(t,n,i)}),e}dispose(){var e,t;this.isDisposed=!0,(e=this.workspaceCancellation)===null||e===void 0||e.cancel(),(t=this.workspaceTimeout)===null||t===void 0||t.dispose();for(let[n,i]of this.openRequests)i.state===jt.active&&i.tokenSource.cancel(),this.openRequests.set(n,{state:jt.outDated,textDocument:i.textDocument})}},cy=class{constructor(e){this.diagnosticRequestor=e,this.documents=new tt.LinkedMap}add(e){let t=e.uri.toString();this.documents.has(t)||(this.documents.set(e.uri.toString(),e,tt.Touch.Last),this.trigger())}remove(e){let t=e.uri.toString();this.documents.has(t)&&(this.documents.delete(t),this.diagnosticRequestor.pull(e)),this.documents.size===0?this.stop():e===this.endDocument&&(this.endDocument=this.documents.last)}trigger(){if(this.intervalHandle!==void 0){this.endDocument=this.documents.last;return}this.endDocument=this.documents.last,this.intervalHandle=tt.RAL().timer.setInterval(()=>{let e=this.documents.first;e!==void 0&&(this.diagnosticRequestor.pull(e),this.documents.set(e.uri.toString(),e,tt.Touch.Last),e===this.endDocument&&this.stop())},200)}dispose(){this.stop(),this.documents.clear()}stop(){var e;(e=this.intervalHandle)===null||e===void 0||e.dispose(),this.intervalHandle=void 0,this.endDocument=void 0}},uy=class{constructor(e,t,n){var i,s;let a=(i=e.clientOptions.diagnosticPullOptions)!==null&&i!==void 0?i:{onChange:!0,onSave:!1},l=n.documentSelector,u=[],g=w=>Xt.languages.match(l,w)>0&&t.isVisible(w);this.diagnosticRequestor=new ay(e,t,n),this.backgroundScheduler=new cy(this.diagnosticRequestor);let v=w=>{!g(w)||!n.interFileDependencies||this.activeTextDocument===w||this.backgroundScheduler.add(w)};this.activeTextDocument=(s=Xt.window.activeTextEditor)===null||s===void 0?void 0:s.document,Xt.window.onDidChangeActiveTextEditor(w=>{let E=this.activeTextDocument;this.activeTextDocument=w==null?void 0:w.document,E!==void 0&&v(E),this.activeTextDocument!==void 0&&this.backgroundScheduler.remove(this.activeTextDocument)});let b=e.getFeature(tt.DidOpenTextDocumentNotification.method);u.push(b.onNotificationSent(w=>{let E=w.original;g(E)&&this.diagnosticRequestor.pull(E,()=>{v(E)})}));for(let w of Xt.workspace.textDocuments)g(w)&&this.diagnosticRequestor.pull(w,()=>{v(w)});if(a.onChange){let w=e.getFeature(tt.DidChangeTextDocumentNotification.method);u.push(w.onNotificationSent(async E=>{let q=E.original.document;(a.filter===void 0||!a.filter(q,ds.DiagnosticPullMode.onType))&&this.diagnosticRequestor.knows(lr.document,q)&&E.original.contentChanges.length>0&&this.diagnosticRequestor.pull(q,()=>{this.backgroundScheduler.trigger()})}))}if(a.onSave){let w=e.getFeature(tt.DidSaveTextDocumentNotification.method);u.push(w.onNotificationSent(E=>{let q=E.original;(a.filter===void 0||!a.filter(q,ds.DiagnosticPullMode.onSave))&&this.diagnosticRequestor.knows(lr.document,q)&&this.diagnosticRequestor.pull(E.original,()=>{this.backgroundScheduler.trigger()})}))}let C=e.getFeature(tt.DidCloseTextDocumentNotification.method);u.push(C.onNotificationSent(w=>{let E=w.original;this.diagnosticRequestor.cleanupPull(E),this.backgroundScheduler.remove(E)})),this.diagnosticRequestor.onDidChangeDiagnosticsEmitter.event(()=>{for(let w of Xt.workspace.textDocuments)g(w)&&this.diagnosticRequestor.pull(w)}),n.workspaceDiagnostics===!0&&n.identifier!=="da348dc5-c30a-4515-9d98-31ff3be38d14"&&this.diagnosticRequestor.pullWorkspace(),this.disposable=Xt.Disposable.from(...u,this.backgroundScheduler,this.diagnosticRequestor)}get onDidChangeDiagnosticsEmitter(){return this.diagnosticRequestor.onDidChangeDiagnosticsEmitter}get diagnostics(){return this.diagnosticRequestor.provider}},ly=class extends ds.TextDocumentFeature{constructor(e){super(e,tt.Proposed.DocumentDiagnosticRequest.type);this.editorTracker=new oy}fillClientCapabilities(e){let t=iy(iy(e,"textDocument"),"diagnostic");t.dynamicRegistration=!0,t.relatedDocumentSupport=!1}initialize(e,t){this._client.onRequest(tt.Proposed.DiagnosticRefreshRequest.type,async()=>{for(let a of this.getAllProviders())a.onDidChangeDiagnosticsEmitter.fire()});let[i,s]=this.getRegistration(t,e.diagnosticProvider);!i||!s||this.register({id:i,registerOptions:s})}dispose(){this.editorTracker.dispose(),super.dispose()}registerLanguageProvider(e){let t=new uy(this._client,this.editorTracker,e);return[t.disposable,t]}};hi.DiagnosticFeature=ly});var Sl=F(pi=>{"use strict";Object.defineProperty(pi,"__esModule",{value:!0});pi.ProposedFeatures=pi.CommonLanguageClient=void 0;var kx=ir(),qx=ev(),Ox=Gu(),Ax=nv(),Fx=ov(),Ix=av(),Lx=uv(),Nx=fv(),Mx=gv(),jx=vv(),$x=Cv(),Wx=_v(),Ji=ey(),Hx=ny(),fy=class extends kx.BaseLanguageClient{constructor(e,t,n){super(e,t,n)}registerProposedFeatures(){this.registerFeatures(hy.createAll(this))}registerBuiltinFeatures(){super.registerBuiltinFeatures(),this.registerFeature(new Ox.ConfigurationFeature(this)),this.registerFeature(new Fx.TypeDefinitionFeature(this)),this.registerFeature(new Ax.ImplementationFeature(this)),this.registerFeature(new qx.ColorProviderFeature(this)),this.registerFeature(new Ix.WorkspaceFoldersFeature(this)),this.registerFeature(new Lx.FoldingRangeFeature(this)),this.registerFeature(new Nx.DeclarationFeature(this)),this.registerFeature(new Mx.SelectionRangeFeature(this)),this.registerFeature(new jx.ProgressFeature(this)),this.registerFeature(new $x.CallHierarchyFeature(this)),this.registerFeature(new Wx.SemanticTokensFeature(this)),this.registerFeature(new Hx.LinkedEditingFeature(this)),this.registerFeature(new Ji.DidCreateFilesFeature(this)),this.registerFeature(new Ji.DidRenameFilesFeature(this)),this.registerFeature(new Ji.DidDeleteFilesFeature(this)),this.registerFeature(new Ji.WillCreateFilesFeature(this)),this.registerFeature(new Ji.WillRenameFilesFeature(this)),this.registerFeature(new Ji.WillDeleteFilesFeature(this))}};pi.CommonLanguageClient=fy;var zx=dy(),hy;(function(r){function e(t){return[new zx.DiagnosticFeature(t)]}r.createAll=e})(hy=pi.ProposedFeatures||(pi.ProposedFeatures={}))});var gy=F(rc=>{"use strict";Object.defineProperty(rc,"__esModule",{value:!0});rc.terminate=void 0;var py=require("child_process"),Bx=require("path"),Ux=process.platform==="win32",Kx=process.platform==="darwin",Gx=process.platform==="linux";function Vx(r,e){if(Ux)try{let i={stdio:["pipe","pipe","ignore"]};return e&&(i.cwd=e),py.execFileSync("taskkill",["/T","/F","/PID",r.pid.toString()],i),!0}catch{return!1}else if(Gx||Kx)try{var t=Bx.join(__dirname,"terminateProcess.sh"),n=py.spawnSync(t,[r.pid.toString()]);return!n.error}catch{return!1}else return r.kill("SIGKILL"),!0}rc.terminate=Vx});var Tl=F((ZO,my)=>{"use strict";my.exports=Be()});var vy=F(Sn=>{"use strict";var Yx=Sn&&Sn.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Pl=Sn&&Sn.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Yx(e,r,t)};Object.defineProperty(Sn,"__esModule",{value:!0});Pl(Be(),Sn);Pl(ir(),Sn);Pl(Sl(),Sn)});var nc=F(Qt=>{"use strict";var Xx=Qt&&Qt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),yy=Qt&&Qt.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Xx(e,r,t)};Object.defineProperty(Qt,"__esModule",{value:!0});Qt.SettingMonitor=Qt.LanguageClient=Qt.TransportKind=void 0;var Tn=require("child_process"),Dl=require("fs"),El=require("path"),by=lp(),jn=require("vscode"),Ke=yn(),Qx=Sl(),Jx=ir(),Zx=gy(),Ve=Tl();yy(Tl(),Qt);yy(vy(),Qt);var wy="^1.58.0",Qe;(function(r){r[r.stdio=0]="stdio",r[r.ipc=1]="ipc",r[r.pipe=2]="pipe",r[r.socket=3]="socket"})(Qe=Qt.TransportKind||(Qt.TransportKind={}));var $n;(function(r){function e(t){let n=t;return n&&n.kind===Qe.socket&&Ke.number(n.port)}r.isSocket=e})($n||($n={}));var xl;(function(r){function e(t){return Ke.string(t.command)}r.is=e})(xl||(xl={}));var kl;(function(r){function e(t){return Ke.string(t.module)}r.is=e})(kl||(kl={}));var ql;(function(r){function e(t){let n=t;return n&&n.writer!==void 0&&n.reader!==void 0}r.is=e})(ql||(ql={}));var Ol;(function(r){function e(t){let n=t;return n&&n.process!==void 0&&typeof n.detached=="boolean"}r.is=e})(Ol||(Ol={}));var Cy=class extends Qx.CommonLanguageClient{constructor(e,t,n,i,s){let a,l,u,g,v;Ke.string(t)?(a=e,l=t,u=n,g=i,v=!!s):(a=e.toLowerCase(),l=e,u=t,g=n,v=i),v===void 0&&(v=!1);super(a,l,g);this._serverOptions=u,this._forceDebug=v,this._isInDebugMode=v;try{this.checkVersion()}catch(b){throw Ke.string(b.message)&&this.outputChannel.appendLine(b.message),b}}checkVersion(){let e=by.parse(jn.version);if(!e)throw new Error(`No valid VS Code version detected. Version string is: ${jn.version}`);if(e.prerelease&&e.prerelease.length>0&&(e.prerelease=[]),!by.satisfies(e,wy))throw new Error(`The language client requires VS Code version ${wy} but received version ${jn.version}`)}get isInDebugMode(){return this._isInDebugMode}stop(){return super.stop().then(()=>{if(this._serverProcess){let e=this._serverProcess;this._serverProcess=void 0,(this._isDetached===void 0||!this._isDetached)&&this.checkProcessDied(e),this._isDetached=void 0}})}checkProcessDied(e){!e||setTimeout(()=>{try{process.kill(e.pid,0),Zx.terminate(e)}catch{}},2e3)}handleConnectionClosed(){this._serverProcess=void 0,super.handleConnectionClosed()}fillInitializeParams(e){super.fillInitializeParams(e),e.processId===null&&(e.processId=process.pid)}createMessageTransports(e){function t(v,b){if(!v&&!b)return;let C=Object.create(null);return Object.keys(process.env).forEach(w=>C[w]=process.env[w]),b&&(C.ELECTRON_RUN_AS_NODE="1",C.ELECTRON_NO_ASAR="1"),v&&Object.keys(v).forEach(w=>C[w]=v[w]),C}let n=["--debug=","--debug-brk=","--inspect=","--inspect-brk="],i=["--debug","--debug-brk","--inspect","--inspect-brk"];function s(){let v=process.execArgv;return v?v.some(b=>n.some(C=>b.startsWith(C))||i.some(C=>b===C)):!1}function a(v){if(v.stdin===null||v.stdout===null||v.stderr===null)throw new Error("Process created without stdio streams")}let l=this._serverOptions;if(Ke.func(l))return l().then(v=>{if(Jx.MessageTransports.is(v))return this._isDetached=!!v.detached,v;if(ql.is(v))return this._isDetached=!!v.detached,{reader:new Ve.StreamMessageReader(v.reader),writer:new Ve.StreamMessageWriter(v.writer)};{let b;return Ol.is(v)?(b=v.process,this._isDetached=v.detached):(b=v,this._isDetached=!1),b.stderr.on("data",C=>this.outputChannel.append(Ke.string(C)?C:C.toString(e))),{reader:new Ve.StreamMessageReader(b.stdout),writer:new Ve.StreamMessageWriter(b.stdin)}}});let u,g=l;return g.run||g.debug?this._forceDebug||s()?(u=g.debug,this._isInDebugMode=!0):(u=g.run,this._isInDebugMode=!1):u=l,this._getServerWorkingDir(u.options).then(v=>{var b;if(kl.is(u)&&u.module){let C=u,w=C.transport||Qe.stdio;if(C.runtime){let E=[],q=(b=C.options)!==null&&b!==void 0?b:Object.create(null);q.execArgv&&q.execArgv.forEach(O=>E.push(O)),E.push(C.module),C.args&&C.args.forEach(O=>E.push(O));let N=Object.create(null);N.cwd=v,N.env=t(q.env,!1);let A=this._getRuntimePath(C.runtime,v),H;if(w===Qe.ipc?(N.stdio=[null,null,null,"ipc"],E.push("--node-ipc")):w===Qe.stdio?E.push("--stdio"):w===Qe.pipe?(H=Ve.generateRandomPipeName(),E.push(`--pipe=${H}`)):$n.isSocket(w)&&E.push(`--socket=${w.port}`),E.push(`--clientProcessId=${process.pid.toString()}`),w===Qe.ipc||w===Qe.stdio){let O=Tn.spawn(A,E,N);return!O||!O.pid?Promise.reject(`Launching server using runtime ${A} failed.`):(this._serverProcess=O,O.stderr.on("data",z=>this.outputChannel.append(Ke.string(z)?z:z.toString(e))),w===Qe.ipc?(O.stdout.on("data",z=>this.outputChannel.append(Ke.string(z)?z:z.toString(e))),Promise.resolve({reader:new Ve.IPCMessageReader(O),writer:new Ve.IPCMessageWriter(O)})):Promise.resolve({reader:new Ve.StreamMessageReader(O.stdout),writer:new Ve.StreamMessageWriter(O.stdin)}))}else{if(w===Qe.pipe)return Ve.createClientPipeTransport(H).then(O=>{let z=Tn.spawn(A,E,N);return!z||!z.pid?Promise.reject(`Launching server using runtime ${A} failed.`):(this._serverProcess=z,z.stderr.on("data",M=>this.outputChannel.append(Ke.string(M)?M:M.toString(e))),z.stdout.on("data",M=>this.outputChannel.append(Ke.string(M)?M:M.toString(e))),O.onConnected().then(M=>({reader:M[0],writer:M[1]})))});if($n.isSocket(w))return Ve.createClientSocketTransport(w.port).then(O=>{let z=Tn.spawn(A,E,N);return!z||!z.pid?Promise.reject(`Launching server using runtime ${A} failed.`):(this._serverProcess=z,z.stderr.on("data",M=>this.outputChannel.append(Ke.string(M)?M:M.toString(e))),z.stdout.on("data",M=>this.outputChannel.append(Ke.string(M)?M:M.toString(e))),O.onConnected().then(M=>({reader:M[0],writer:M[1]})))})}}else{let E;return new Promise((q,N)=>{var A,H;let O=(A=C.args&&C.args.slice())!==null&&A!==void 0?A:[];w===Qe.ipc?O.push("--node-ipc"):w===Qe.stdio?O.push("--stdio"):w===Qe.pipe?(E=Ve.generateRandomPipeName(),O.push(`--pipe=${E}`)):$n.isSocket(w)&&O.push(`--socket=${w.port}`),O.push(`--clientProcessId=${process.pid.toString()}`);let z=(H=C.options)!==null&&H!==void 0?H:Object.create(null);if(z.env=t(z.env,!0),z.execArgv=z.execArgv||[],z.cwd=v,z.silent=!0,w===Qe.ipc||w===Qe.stdio){let M=Tn.fork(C.module,O||[],z);a(M),this._serverProcess=M,M.stderr.on("data",G=>this.outputChannel.append(Ke.string(G)?G:G.toString(e))),w===Qe.ipc?(M.stdout.on("data",G=>this.outputChannel.append(Ke.string(G)?G:G.toString(e))),q({reader:new Ve.IPCMessageReader(this._serverProcess),writer:new Ve.IPCMessageWriter(this._serverProcess)})):q({reader:new Ve.StreamMessageReader(M.stdout),writer:new Ve.StreamMessageWriter(M.stdin)})}else w===Qe.pipe?Ve.createClientPipeTransport(E).then(M=>{let G=Tn.fork(C.module,O||[],z);a(G),this._serverProcess=G,G.stderr.on("data",X=>this.outputChannel.append(Ke.string(X)?X:X.toString(e))),G.stdout.on("data",X=>this.outputChannel.append(Ke.string(X)?X:X.toString(e))),M.onConnected().then(X=>{q({reader:X[0],writer:X[1]})},N)},N):$n.isSocket(w)&&Ve.createClientSocketTransport(w.port).then(M=>{let G=Tn.fork(C.module,O||[],z);a(G),this._serverProcess=G,G.stderr.on("data",X=>this.outputChannel.append(Ke.string(X)?X:X.toString(e))),G.stdout.on("data",X=>this.outputChannel.append(Ke.string(X)?X:X.toString(e))),M.onConnected().then(X=>{q({reader:X[0],writer:X[1]})},N)},N)})}}else if(xl.is(u)&&u.command){let C=u,w=u.args!==void 0?u.args.slice(0):[],E,q=u.transport;if(q===Qe.stdio)w.push("--stdio");else if(q===Qe.pipe)E=Ve.generateRandomPipeName(),w.push(`--pipe=${E}`);else if($n.isSocket(q))w.push(`--socket=${q.port}`);else if(q===Qe.ipc)throw new Error("Transport kind ipc is not support for command executable");let N=Object.assign({},C.options);if(N.cwd=N.cwd||v,q===void 0||q===Qe.stdio){let A=Tn.spawn(C.command,w,N);return!A||!A.pid?Promise.reject(`Launching server using command ${C.command} failed.`):(A.stderr.on("data",H=>this.outputChannel.append(Ke.string(H)?H:H.toString(e))),this._serverProcess=A,this._isDetached=!!N.detached,Promise.resolve({reader:new Ve.StreamMessageReader(A.stdout),writer:new Ve.StreamMessageWriter(A.stdin)}))}else{if(q===Qe.pipe)return Ve.createClientPipeTransport(E).then(A=>{let H=Tn.spawn(C.command,w,N);if(!H||!H.pid)throw new Error(`Launching server using command ${C.command} failed.`);return this._serverProcess=H,this._isDetached=!!N.detached,H.stderr.on("data",O=>this.outputChannel.append(Ke.string(O)?O:O.toString(e))),H.stdout.on("data",O=>this.outputChannel.append(Ke.string(O)?O:O.toString(e))),A.onConnected().then(O=>({reader:O[0],writer:O[1]}))});if($n.isSocket(q))return Ve.createClientSocketTransport(q.port).then(A=>{let H=Tn.spawn(C.command,w,N);if(!H||!H.pid)throw new Error(`Launching server using command ${C.command} failed.`);return this._serverProcess=H,this._isDetached=!!N.detached,H.stderr.on("data",O=>this.outputChannel.append(Ke.string(O)?O:O.toString(e))),H.stdout.on("data",O=>this.outputChannel.append(Ke.string(O)?O:O.toString(e))),A.onConnected().then(O=>({reader:O[0],writer:O[1]}))})}}return Promise.reject(new Error("Unsupported server configuration "+JSON.stringify(l,null,4)))})}_getRuntimePath(e,t){if(El.isAbsolute(e))return e;let n=this._mainGetRootPath();if(n!==void 0){let i=El.join(n,e);if(Dl.existsSync(i))return i}if(t!==void 0){let i=El.join(t,e);if(Dl.existsSync(i))return i}return e}_mainGetRootPath(){let e=jn.workspace.workspaceFolders;if(!e||e.length===0)return;let t=e[0];if(t.uri.scheme==="file")return t.uri.fsPath}_getServerWorkingDir(e){let t=e&&e.cwd;return t||(t=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()),t?new Promise(n=>{Dl.lstat(t,(i,s)=>{n(!i&&s.isDirectory()?t:void 0)})}):Promise.resolve(void 0)}getLocale(){let e=process.env.VSCODE_NLS_CONFIG;if(e===void 0)return"en";let t;try{t=JSON.parse(e)}catch{}return t===void 0||typeof t.locale!="string"?"en":t.locale}};Qt.LanguageClient=Cy;var Ry=class{constructor(e,t){this._client=e,this._setting=t,this._listeners=[]}start(){return jn.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new jn.Disposable(()=>{this._client.needsStop()&&this._client.stop()})}onDidChangeConfiguration(){let e=this._setting.indexOf("."),t=e>=0?this._setting.substr(0,e):this._setting,n=e>=0?this._setting.substr(e+1):void 0,i=n?jn.workspace.getConfiguration(t).get(n,!1):jn.workspace.getConfiguration(t);i&&this._client.needsStart()?this._client.start():!i&&this._client.needsStop()&&this._client.stop()}};Qt.SettingMonitor=Ry});var Fl=F((rA,By)=>{"use strict";By.exports=nc()});var tw=F((hc,ew)=>{(function(r,e){typeof hc=="object"&&typeof ew!="undefined"?e(hc):typeof define=="function"&&define.amd?define(["exports"],e):(r=typeof globalThis!="undefined"?globalThis:r||self,e(r.WebStreamsPolyfill={}))})(hc,function(r){"use strict";let e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:o=>`Symbol(${o})`;function t(){}function n(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global}let i=n();function s(o){return typeof o=="object"&&o!==null||typeof o=="function"}let a=t,l=Promise,u=Promise.prototype.then,g=Promise.resolve.bind(l),v=Promise.reject.bind(l);function b(o){return new l(o)}function C(o){return g(o)}function w(o){return v(o)}function E(o,c,p){return u.call(o,c,p)}function q(o,c,p){E(E(o,c,p),void 0,a)}function N(o,c){q(o,c)}function A(o,c){q(o,void 0,c)}function H(o,c,p){return E(o,c,p)}function O(o){E(o,void 0,a)}let z=(()=>{let o=i&&i.queueMicrotask;if(typeof o=="function")return o;let c=C(void 0);return p=>E(c,p)})();function M(o,c,p){if(typeof o!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(o,c,p)}function G(o,c,p){try{return C(M(o,c,p))}catch(S){return w(S)}}let X=16384;class _e{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(c){let p=this._back,S=p;p._elements.length===X-1&&(S={_elements:[],_next:void 0}),p._elements.push(c),S!==p&&(this._back=S,p._next=S),++this._size}shift(){let c=this._front,p=c,S=this._cursor,k=S+1,$=c._elements,B=$[S];return k===X&&(p=c._next,k=0),--this._size,this._cursor=k,c!==p&&(this._front=p),$[S]=void 0,B}forEach(c){let p=this._cursor,S=this._front,k=S._elements;for(;(p!==k.length||S._next!==void 0)&&!(p===k.length&&(S=S._next,k=S._elements,p=0,k.length===0));)c(k[p]),++p}peek(){let c=this._front,p=this._cursor;return c._elements[p]}}function Ae(o,c){o._ownerReadableStream=c,c._reader=o,c._state==="readable"?ct(o):c._state==="closed"?Tt(o):St(o,c._storedError)}function Je(o,c){let p=o._ownerReadableStream;return Nr(p,c)}function je(o){o._ownerReadableStream._state==="readable"?Wt(o,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):$e(o,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),o._ownerReadableStream._reader=void 0,o._ownerReadableStream=void 0}function Fe(o){return new TypeError("Cannot "+o+" a stream using a released reader")}function ct(o){o._closedPromise=b((c,p)=>{o._closedPromise_resolve=c,o._closedPromise_reject=p})}function St(o,c){ct(o),Wt(o,c)}function Tt(o){ct(o),gt(o)}function Wt(o,c){o._closedPromise_reject!==void 0&&(O(o._closedPromise),o._closedPromise_reject(c),o._closedPromise_resolve=void 0,o._closedPromise_reject=void 0)}function $e(o,c){St(o,c)}function gt(o){o._closedPromise_resolve!==void 0&&(o._closedPromise_resolve(void 0),o._closedPromise_resolve=void 0,o._closedPromise_reject=void 0)}let mt=e("[[AbortSteps]]"),ut=e("[[ErrorSteps]]"),Pt=e("[[CancelSteps]]"),Ot=e("[[PullSteps]]"),Jr=Number.isFinite||function(o){return typeof o=="number"&&isFinite(o)},Zr=Math.trunc||function(o){return o<0?Math.ceil(o):Math.floor(o)};function Or(o){return typeof o=="object"||typeof o=="function"}function nt(o,c){if(o!==void 0&&!Or(o))throw new TypeError(`${c} is not an object.`)}function lt(o,c){if(typeof o!="function")throw new TypeError(`${c} is not a function.`)}function gr(o){return typeof o=="object"&&o!==null||typeof o=="function"}function cr(o,c){if(!gr(o))throw new TypeError(`${c} is not an object.`)}function dt(o,c,p){if(o===void 0)throw new TypeError(`Parameter ${c} is required in '${p}'.`)}function mr(o,c,p){if(o===void 0)throw new TypeError(`${c} is required in '${p}'.`)}function Ar(o){return Number(o)}function Ht(o){return o===0?0:o}function Fr(o){return Ht(Zr(o))}function At(o,c){let p=0,S=Number.MAX_SAFE_INTEGER,k=Number(o);if(k=Ht(k),!Jr(k))throw new TypeError(`${c} is not a finite number`);if(k=Fr(k),k<p||k>S)throw new TypeError(`${c} is outside the accepted range of ${p} to ${S}, inclusive`);return!Jr(k)||k===0?0:k}function vr(o,c){if(!qn(o))throw new TypeError(`${c} is not a ReadableStream.`)}function ke(o){return new Zt(o)}function Dt(o,c){o._reader._readRequests.push(c)}function Ir(o,c,p){let k=o._reader._readRequests.shift();p?k._closeSteps():k._chunkSteps(c)}function yr(o){return o._reader._readRequests.length}function zt(o){let c=o._reader;return!(c===void 0||!Ze(c))}class Zt{constructor(c){if(dt(c,1,"ReadableStreamDefaultReader"),vr(c,"First parameter"),On(c))throw new TypeError("This stream has already been locked for exclusive reading by another reader");Ae(this,c),this._readRequests=new _e}get closed(){return Ze(this)?this._closedPromise:w(er("closed"))}cancel(c=void 0){return Ze(this)?this._ownerReadableStream===void 0?w(Fe("cancel")):Je(this,c):w(er("cancel"))}read(){if(!Ze(this))return w(er("read"));if(this._ownerReadableStream===void 0)return w(Fe("read from"));let c,p,S=b(($,B)=>{c=$,p=B});return Bt(this,{_chunkSteps:$=>c({value:$,done:!1}),_closeSteps:()=>c({value:void 0,done:!0}),_errorSteps:$=>p($)}),S}releaseLock(){if(!Ze(this))throw er("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");je(this)}}}Object.defineProperties(Zt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Zt.prototype,e.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function Ze(o){return!s(o)||!Object.prototype.hasOwnProperty.call(o,"_readRequests")?!1:o instanceof Zt}function Bt(o,c){let p=o._ownerReadableStream;p._disturbed=!0,p._state==="closed"?c._closeSteps():p._state==="errored"?c._errorSteps(p._storedError):p._readableStreamController[Ot](c)}function er(o){return new TypeError(`ReadableStreamDefaultReader.prototype.${o} can only be used on a ReadableStreamDefaultReader`)}let Ut=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class D{constructor(c,p){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=c,this._preventCancel=p}next(){let c=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?H(this._ongoingPromise,c,c):c(),this._ongoingPromise}return(c){let p=()=>this._returnSteps(c);return this._ongoingPromise?H(this._ongoingPromise,p,p):p()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let c=this._reader;if(c._ownerReadableStream===void 0)return w(Fe("iterate"));let p,S,k=b((B,J)=>{p=B,S=J});return Bt(c,{_chunkSteps:B=>{this._ongoingPromise=void 0,z(()=>p({value:B,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,je(c),p({value:void 0,done:!0})},_errorSteps:B=>{this._ongoingPromise=void 0,this._isFinished=!0,je(c),S(B)}}),k}_returnSteps(c){if(this._isFinished)return Promise.resolve({value:c,done:!0});this._isFinished=!0;let p=this._reader;if(p._ownerReadableStream===void 0)return w(Fe("finish iterating"));if(!this._preventCancel){let S=Je(p,c);return je(p),H(S,()=>({value:c,done:!0}))}return je(p),C({value:c,done:!0})}}let j={next(){return Q(this)?this._asyncIteratorImpl.next():w(f("next"))},return(o){return Q(this)?this._asyncIteratorImpl.return(o):w(f("return"))}};Ut!==void 0&&Object.setPrototypeOf(j,Ut);function K(o,c){let p=ke(o),S=new D(p,c),k=Object.create(j);return k._asyncIteratorImpl=S,k}function Q(o){if(!s(o)||!Object.prototype.hasOwnProperty.call(o,"_asyncIteratorImpl"))return!1;try{return o._asyncIteratorImpl instanceof D}catch{return!1}}function f(o){return new TypeError(`ReadableStreamAsyncIterator.${o} can only be used on a ReadableSteamAsyncIterator`)}let d=Number.isNaN||function(o){return o!==o};function R(o){return o.slice()}function P(o,c,p,S,k){new Uint8Array(o).set(new Uint8Array(p,S,k),c)}function y(o){return o}function m(o){return!1}function x(o,c,p){if(o.slice)return o.slice(c,p);let S=p-c,k=new ArrayBuffer(S);return P(k,0,o,c,S),k}function I(o){return!(typeof o!="number"||d(o)||o<0)}function Y(o){let c=x(o.buffer,o.byteOffset,o.byteOffset+o.byteLength);return new Uint8Array(c)}function be(o){let c=o._queue.shift();return o._queueTotalSize-=c.size,o._queueTotalSize<0&&(o._queueTotalSize=0),c.value}function we(o,c,p){if(!I(p)||p===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");o._queue.push({value:c,size:p}),o._queueTotalSize+=p}function Kt(o){return o._queue.peek().value}function Ye(o){o._queue=new _e,o._queueTotalSize=0}class vt{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!en(this))throw Oc("view");return this._view}respond(c){if(!en(this))throw Oc("respond");if(dt(c,1,"respond"),c=At(c,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");m(this._view.buffer),Is(this._associatedReadableByteStreamController,c)}respondWithNewView(c){if(!en(this))throw Oc("respondWithNewView");if(dt(c,1,"respondWithNewView"),!ArrayBuffer.isView(c))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");m(c.buffer),Ls(this._associatedReadableByteStreamController,c)}}Object.defineProperties(vt.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(vt.prototype,e.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class le{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!Ft(this))throw yo("byobRequest");return qc(this)}get desiredSize(){if(!Ft(this))throw yo("desiredSize");return yd(this)}close(){if(!Ft(this))throw yo("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let c=this._controlledReadableByteStream._state;if(c!=="readable")throw new TypeError(`The stream (in ${c} state) is not in the readable state and cannot be closed`);vo(this)}enqueue(c){if(!Ft(this))throw yo("enqueue");if(dt(c,1,"enqueue"),!ArrayBuffer.isView(c))throw new TypeError("chunk must be an array buffer view");if(c.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(c.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let p=this._controlledReadableByteStream._state;if(p!=="readable")throw new TypeError(`The stream (in ${p} state) is not in the readable state and cannot be enqueued to`);Fs(this,c)}error(c=void 0){if(!Ft(this))throw yo("error");Lr(this,c)}[Pt](c){h(this),Ye(this);let p=this._cancelAlgorithm(c);return As(this),p}[Ot](c){let p=this._controlledReadableByteStream;if(this._queueTotalSize>0){let k=this._queue.shift();this._queueTotalSize-=k.byteLength,wr(this);let $=new Uint8Array(k.buffer,k.byteOffset,k.byteLength);c._chunkSteps($);return}let S=this._autoAllocateChunkSize;if(S!==void 0){let k;try{k=new ArrayBuffer(S)}catch(B){c._errorSteps(B);return}let $={buffer:k,bufferByteLength:S,byteOffset:0,byteLength:S,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push($)}Dt(p,c),br(this)}}Object.defineProperties(le.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(le.prototype,e.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function Ft(o){return!s(o)||!Object.prototype.hasOwnProperty.call(o,"_controlledReadableByteStream")?!1:o instanceof le}function en(o){return!s(o)||!Object.prototype.hasOwnProperty.call(o,"_associatedReadableByteStreamController")?!1:o instanceof vt}function br(o){if(!vC(o))return;if(o._pulling){o._pullAgain=!0;return}o._pulling=!0;let p=o._pullAlgorithm();q(p,()=>{o._pulling=!1,o._pullAgain&&(o._pullAgain=!1,br(o))},S=>{Lr(o,S)})}function h(o){kc(o),o._pendingPullIntos=new _e}function L(o,c){let p=!1;o._state==="closed"&&(p=!0);let S=pe(c);c.readerType==="default"?Ir(o,S,p):wC(o,S,p)}function pe(o){let c=o.bytesFilled,p=o.elementSize;return new o.viewConstructor(o.buffer,o.byteOffset,c/p)}function ie(o,c,p,S){o._queue.push({buffer:c,byteOffset:p,byteLength:S}),o._queueTotalSize+=S}function Se(o,c){let p=c.elementSize,S=c.bytesFilled-c.bytesFilled%p,k=Math.min(o._queueTotalSize,c.byteLength-c.bytesFilled),$=c.bytesFilled+k,B=$-$%p,J=k,ge=!1;B>S&&(J=B-c.bytesFilled,ge=!0);let Re=o._queue;for(;J>0;){let Te=Re.peek(),Pe=Math.min(J,Te.byteLength),it=c.byteOffset+c.bytesFilled;P(c.buffer,it,Te.buffer,Te.byteOffset,Pe),Te.byteLength===Pe?Re.shift():(Te.byteOffset+=Pe,Te.byteLength-=Pe),o._queueTotalSize-=Pe,hn(o,Pe,c),J-=Pe}return ge}function hn(o,c,p){p.bytesFilled+=c}function wr(o){o._queueTotalSize===0&&o._closeRequested?(As(o),Po(o._controlledReadableByteStream)):br(o)}function kc(o){o._byobRequest!==null&&(o._byobRequest._associatedReadableByteStreamController=void 0,o._byobRequest._view=null,o._byobRequest=null)}function md(o){for(;o._pendingPullIntos.length>0;){if(o._queueTotalSize===0)return;let c=o._pendingPullIntos.peek();Se(o,c)&&(Os(o),L(o._controlledReadableByteStream,c))}}function pC(o,c,p){let S=o._controlledReadableByteStream,k=1;c.constructor!==DataView&&(k=c.constructor.BYTES_PER_ELEMENT);let $=c.constructor,B=y(c.buffer),J={buffer:B,bufferByteLength:B.byteLength,byteOffset:c.byteOffset,byteLength:c.byteLength,bytesFilled:0,elementSize:k,viewConstructor:$,readerType:"byob"};if(o._pendingPullIntos.length>0){o._pendingPullIntos.push(J),Cd(S,p);return}if(S._state==="closed"){let ge=new $(J.buffer,J.byteOffset,0);p._closeSteps(ge);return}if(o._queueTotalSize>0){if(Se(o,J)){let ge=pe(J);wr(o),p._chunkSteps(ge);return}if(o._closeRequested){let ge=new TypeError("Insufficient bytes to fill elements in the given buffer");Lr(o,ge),p._errorSteps(ge);return}}o._pendingPullIntos.push(J),Cd(S,p),br(o)}function gC(o,c){let p=o._controlledReadableByteStream;if(Ac(p))for(;Rd(p)>0;){let S=Os(o);L(p,S)}}function mC(o,c,p){if(hn(o,c,p),p.bytesFilled<p.elementSize)return;Os(o);let S=p.bytesFilled%p.elementSize;if(S>0){let k=p.byteOffset+p.bytesFilled,$=x(p.buffer,k-S,k);ie(o,$,0,$.byteLength)}p.bytesFilled-=S,L(o._controlledReadableByteStream,p),md(o)}function vd(o,c){let p=o._pendingPullIntos.peek();kc(o),o._controlledReadableByteStream._state==="closed"?gC(o):mC(o,c,p),br(o)}function Os(o){return o._pendingPullIntos.shift()}function vC(o){let c=o._controlledReadableByteStream;return c._state!=="readable"||o._closeRequested||!o._started?!1:!!(zt(c)&&yr(c)>0||Ac(c)&&Rd(c)>0||yd(o)>0)}function As(o){o._pullAlgorithm=void 0,o._cancelAlgorithm=void 0}function vo(o){let c=o._controlledReadableByteStream;if(!(o._closeRequested||c._state!=="readable")){if(o._queueTotalSize>0){o._closeRequested=!0;return}if(o._pendingPullIntos.length>0&&o._pendingPullIntos.peek().bytesFilled>0){let S=new TypeError("Insufficient bytes to fill elements in the given buffer");throw Lr(o,S),S}As(o),Po(c)}}function Fs(o,c){let p=o._controlledReadableByteStream;if(o._closeRequested||p._state!=="readable")return;let S=c.buffer,k=c.byteOffset,$=c.byteLength,B=y(S);if(o._pendingPullIntos.length>0){let J=o._pendingPullIntos.peek();m(J.buffer),J.buffer=y(J.buffer)}if(kc(o),zt(p))if(yr(p)===0)ie(o,B,k,$);else{o._pendingPullIntos.length>0&&Os(o);let J=new Uint8Array(B,k,$);Ir(p,J,!1)}else Ac(p)?(ie(o,B,k,$),md(o)):ie(o,B,k,$);br(o)}function Lr(o,c){let p=o._controlledReadableByteStream;p._state==="readable"&&(h(o),Ye(o),As(o),Kd(p,c))}function qc(o){if(o._byobRequest===null&&o._pendingPullIntos.length>0){let c=o._pendingPullIntos.peek(),p=new Uint8Array(c.buffer,c.byteOffset+c.bytesFilled,c.byteLength-c.bytesFilled),S=Object.create(vt.prototype);bC(S,o,p),o._byobRequest=S}return o._byobRequest}function yd(o){let c=o._controlledReadableByteStream._state;return c==="errored"?null:c==="closed"?0:o._strategyHWM-o._queueTotalSize}function Is(o,c){let p=o._pendingPullIntos.peek();if(o._controlledReadableByteStream._state==="closed"){if(c!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(c===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(p.bytesFilled+c>p.byteLength)throw new RangeError("bytesWritten out of range")}p.buffer=y(p.buffer),vd(o,c)}function Ls(o,c){let p=o._pendingPullIntos.peek();if(o._controlledReadableByteStream._state==="closed"){if(c.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(c.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(p.byteOffset+p.bytesFilled!==c.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(p.bufferByteLength!==c.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(p.bytesFilled+c.byteLength>p.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let k=c.byteLength;p.buffer=y(c.buffer),vd(o,k)}function bd(o,c,p,S,k,$,B){c._controlledReadableByteStream=o,c._pullAgain=!1,c._pulling=!1,c._byobRequest=null,c._queue=c._queueTotalSize=void 0,Ye(c),c._closeRequested=!1,c._started=!1,c._strategyHWM=$,c._pullAlgorithm=S,c._cancelAlgorithm=k,c._autoAllocateChunkSize=B,c._pendingPullIntos=new _e,o._readableStreamController=c;let J=p();q(C(J),()=>{c._started=!0,br(c)},ge=>{Lr(c,ge)})}function yC(o,c,p){let S=Object.create(le.prototype),k=()=>{},$=()=>C(void 0),B=()=>C(void 0);c.start!==void 0&&(k=()=>c.start(S)),c.pull!==void 0&&($=()=>c.pull(S)),c.cancel!==void 0&&(B=ge=>c.cancel(ge));let J=c.autoAllocateChunkSize;if(J===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");bd(o,S,k,$,B,p,J)}function bC(o,c,p){o._associatedReadableByteStreamController=c,o._view=p}function Oc(o){return new TypeError(`ReadableStreamBYOBRequest.prototype.${o} can only be used on a ReadableStreamBYOBRequest`)}function yo(o){return new TypeError(`ReadableByteStreamController.prototype.${o} can only be used on a ReadableByteStreamController`)}function wd(o){return new bo(o)}function Cd(o,c){o._reader._readIntoRequests.push(c)}function wC(o,c,p){let k=o._reader._readIntoRequests.shift();p?k._closeSteps(c):k._chunkSteps(c)}function Rd(o){return o._reader._readIntoRequests.length}function Ac(o){let c=o._reader;return!(c===void 0||!Kn(c))}class bo{constructor(c){if(dt(c,1,"ReadableStreamBYOBReader"),vr(c,"First parameter"),On(c))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!Ft(c._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");Ae(this,c),this._readIntoRequests=new _e}get closed(){return Kn(this)?this._closedPromise:w(Ns("closed"))}cancel(c=void 0){return Kn(this)?this._ownerReadableStream===void 0?w(Fe("cancel")):Je(this,c):w(Ns("cancel"))}read(c){if(!Kn(this))return w(Ns("read"));if(!ArrayBuffer.isView(c))return w(new TypeError("view must be an array buffer view"));if(c.byteLength===0)return w(new TypeError("view must have non-zero byteLength"));if(c.buffer.byteLength===0)return w(new TypeError("view's buffer must have non-zero byteLength"));if(m(c.buffer),this._ownerReadableStream===void 0)return w(Fe("read from"));let p,S,k=b((B,J)=>{p=B,S=J});return _d(this,c,{_chunkSteps:B=>p({value:B,done:!1}),_closeSteps:B=>p({value:B,done:!0}),_errorSteps:B=>S(B)}),k}releaseLock(){if(!Kn(this))throw Ns("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");je(this)}}}Object.defineProperties(bo.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(bo.prototype,e.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function Kn(o){return!s(o)||!Object.prototype.hasOwnProperty.call(o,"_readIntoRequests")?!1:o instanceof bo}function _d(o,c,p){let S=o._ownerReadableStream;S._disturbed=!0,S._state==="errored"?p._errorSteps(S._storedError):pC(S._readableStreamController,c,p)}function Ns(o){return new TypeError(`ReadableStreamBYOBReader.prototype.${o} can only be used on a ReadableStreamBYOBReader`)}function wo(o,c){let{highWaterMark:p}=o;if(p===void 0)return c;if(d(p)||p<0)throw new RangeError("Invalid highWaterMark");return p}function Ms(o){let{size:c}=o;return c||(()=>1)}function js(o,c){nt(o,c);let p=o==null?void 0:o.highWaterMark,S=o==null?void 0:o.size;return{highWaterMark:p===void 0?void 0:Ar(p),size:S===void 0?void 0:CC(S,`${c} has member 'size' that`)}}function CC(o,c){return lt(o,c),p=>Ar(o(p))}function RC(o,c){nt(o,c);let p=o==null?void 0:o.abort,S=o==null?void 0:o.close,k=o==null?void 0:o.start,$=o==null?void 0:o.type,B=o==null?void 0:o.write;return{abort:p===void 0?void 0:_C(p,o,`${c} has member 'abort' that`),close:S===void 0?void 0:SC(S,o,`${c} has member 'close' that`),start:k===void 0?void 0:TC(k,o,`${c} has member 'start' that`),write:B===void 0?void 0:PC(B,o,`${c} has member 'write' that`),type:$}}function _C(o,c,p){return lt(o,p),S=>G(o,c,[S])}function SC(o,c,p){return lt(o,p),()=>G(o,c,[])}function TC(o,c,p){return lt(o,p),S=>M(o,c,[S])}function PC(o,c,p){return lt(o,p),(S,k)=>G(o,c,[S,k])}function Sd(o,c){if(!Si(o))throw new TypeError(`${c} is not a WritableStream.`)}function DC(o){if(typeof o!="object"||o===null)return!1;try{return typeof o.aborted=="boolean"}catch{return!1}}let EC=typeof AbortController=="function";function xC(){if(EC)return new AbortController}class Co{constructor(c={},p={}){c===void 0?c=null:cr(c,"First parameter");let S=js(p,"Second parameter"),k=RC(c,"First parameter");if(Pd(this),k.type!==void 0)throw new RangeError("Invalid type is specified");let B=Ms(S),J=wo(S,1);zC(this,k,J,B)}get locked(){if(!Si(this))throw Bs("locked");return Ti(this)}abort(c=void 0){return Si(this)?Ti(this)?w(new TypeError("Cannot abort a stream that already has a writer")):$s(this,c):w(Bs("abort"))}close(){return Si(this)?Ti(this)?w(new TypeError("Cannot close a stream that already has a writer")):tn(this)?w(new TypeError("Cannot close an already-closing stream")):Dd(this):w(Bs("close"))}getWriter(){if(!Si(this))throw Bs("getWriter");return Td(this)}}Object.defineProperties(Co.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Co.prototype,e.toStringTag,{value:"WritableStream",configurable:!0});function Td(o){return new Ro(o)}function kC(o,c,p,S,k=1,$=()=>1){let B=Object.create(Co.prototype);Pd(B);let J=Object.create(Pi.prototype);return Ad(B,J,o,c,p,S,k,$),B}function Pd(o){o._state="writable",o._storedError=void 0,o._writer=void 0,o._writableStreamController=void 0,o._writeRequests=new _e,o._inFlightWriteRequest=void 0,o._closeRequest=void 0,o._inFlightCloseRequest=void 0,o._pendingAbortRequest=void 0,o._backpressure=!1}function Si(o){return!s(o)||!Object.prototype.hasOwnProperty.call(o,"_writableStreamController")?!1:o instanceof Co}function Ti(o){return o._writer!==void 0}function $s(o,c){var p;if(o._state==="closed"||o._state==="errored")return C(void 0);o._writableStreamController._abortReason=c,(p=o._writableStreamController._abortController)===null||p===void 0||p.abort();let S=o._state;if(S==="closed"||S==="errored")return C(void 0);if(o._pendingAbortRequest!==void 0)return o._pendingAbortRequest._promise;let k=!1;S==="erroring"&&(k=!0,c=void 0);let $=b((B,J)=>{o._pendingAbortRequest={_promise:void 0,_resolve:B,_reject:J,_reason:c,_wasAlreadyErroring:k}});return o._pendingAbortRequest._promise=$,k||Ic(o,c),$}function Dd(o){let c=o._state;if(c==="closed"||c==="errored")return w(new TypeError(`The stream (in ${c} state) is not in the writable state and cannot be closed`));let p=b((k,$)=>{let B={_resolve:k,_reject:$};o._closeRequest=B}),S=o._writer;return S!==void 0&&o._backpressure&&c==="writable"&&Bc(S),BC(o._writableStreamController),p}function qC(o){return b((p,S)=>{let k={_resolve:p,_reject:S};o._writeRequests.push(k)})}function Fc(o,c){if(o._state==="writable"){Ic(o,c);return}Lc(o)}function Ic(o,c){let p=o._writableStreamController;o._state="erroring",o._storedError=c;let S=o._writer;S!==void 0&&xd(S,c),!LC(o)&&p._started&&Lc(o)}function Lc(o){o._state="errored",o._writableStreamController[ut]();let c=o._storedError;if(o._writeRequests.forEach(k=>{k._reject(c)}),o._writeRequests=new _e,o._pendingAbortRequest===void 0){Ws(o);return}let p=o._pendingAbortRequest;if(o._pendingAbortRequest=void 0,p._wasAlreadyErroring){p._reject(c),Ws(o);return}let S=o._writableStreamController[mt](p._reason);q(S,()=>{p._resolve(),Ws(o)},k=>{p._reject(k),Ws(o)})}function OC(o){o._inFlightWriteRequest._resolve(void 0),o._inFlightWriteRequest=void 0}function AC(o,c){o._inFlightWriteRequest._reject(c),o._inFlightWriteRequest=void 0,Fc(o,c)}function FC(o){o._inFlightCloseRequest._resolve(void 0),o._inFlightCloseRequest=void 0,o._state==="erroring"&&(o._storedError=void 0,o._pendingAbortRequest!==void 0&&(o._pendingAbortRequest._resolve(),o._pendingAbortRequest=void 0)),o._state="closed";let p=o._writer;p!==void 0&&Nd(p)}function IC(o,c){o._inFlightCloseRequest._reject(c),o._inFlightCloseRequest=void 0,o._pendingAbortRequest!==void 0&&(o._pendingAbortRequest._reject(c),o._pendingAbortRequest=void 0),Fc(o,c)}function tn(o){return!(o._closeRequest===void 0&&o._inFlightCloseRequest===void 0)}function LC(o){return!(o._inFlightWriteRequest===void 0&&o._inFlightCloseRequest===void 0)}function NC(o){o._inFlightCloseRequest=o._closeRequest,o._closeRequest=void 0}function MC(o){o._inFlightWriteRequest=o._writeRequests.shift()}function Ws(o){o._closeRequest!==void 0&&(o._closeRequest._reject(o._storedError),o._closeRequest=void 0);let c=o._writer;c!==void 0&&Hc(c,o._storedError)}function Nc(o,c){let p=o._writer;p!==void 0&&c!==o._backpressure&&(c?QC(p):Bc(p)),o._backpressure=c}class Ro{constructor(c){if(dt(c,1,"WritableStreamDefaultWriter"),Sd(c,"First parameter"),Ti(c))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=c,c._writer=this;let p=c._state;if(p==="writable")!tn(c)&&c._backpressure?Ks(this):Md(this),Us(this);else if(p==="erroring")zc(this,c._storedError),Us(this);else if(p==="closed")Md(this),YC(this);else{let S=c._storedError;zc(this,S),Ld(this,S)}}get closed(){return Gn(this)?this._closedPromise:w(Vn("closed"))}get desiredSize(){if(!Gn(this))throw Vn("desiredSize");if(this._ownerWritableStream===void 0)throw _o("desiredSize");return HC(this)}get ready(){return Gn(this)?this._readyPromise:w(Vn("ready"))}abort(c=void 0){return Gn(this)?this._ownerWritableStream===void 0?w(_o("abort")):jC(this,c):w(Vn("abort"))}close(){if(!Gn(this))return w(Vn("close"));let c=this._ownerWritableStream;return c===void 0?w(_o("close")):tn(c)?w(new TypeError("Cannot close an already-closing stream")):Ed(this)}releaseLock(){if(!Gn(this))throw Vn("releaseLock");this._ownerWritableStream!==void 0&&kd(this)}write(c=void 0){return Gn(this)?this._ownerWritableStream===void 0?w(_o("write to")):qd(this,c):w(Vn("write"))}}Object.defineProperties(Ro.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Ro.prototype,e.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function Gn(o){return!s(o)||!Object.prototype.hasOwnProperty.call(o,"_ownerWritableStream")?!1:o instanceof Ro}function jC(o,c){let p=o._ownerWritableStream;return $s(p,c)}function Ed(o){let c=o._ownerWritableStream;return Dd(c)}function $C(o){let c=o._ownerWritableStream,p=c._state;return tn(c)||p==="closed"?C(void 0):p==="errored"?w(c._storedError):Ed(o)}function WC(o,c){o._closedPromiseState==="pending"?Hc(o,c):XC(o,c)}function xd(o,c){o._readyPromiseState==="pending"?jd(o,c):JC(o,c)}function HC(o){let c=o._ownerWritableStream,p=c._state;return p==="errored"||p==="erroring"?null:p==="closed"?0:Fd(c._writableStreamController)}function kd(o){let c=o._ownerWritableStream,p=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");xd(o,p),WC(o,p),c._writer=void 0,o._ownerWritableStream=void 0}function qd(o,c){let p=o._ownerWritableStream,S=p._writableStreamController,k=UC(S,c);if(p!==o._ownerWritableStream)return w(_o("write to"));let $=p._state;if($==="errored")return w(p._storedError);if(tn(p)||$==="closed")return w(new TypeError("The stream is closing or closed and cannot be written to"));if($==="erroring")return w(p._storedError);let B=qC(p);return KC(S,c,k),B}let Od={};class Pi{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!Mc(this))throw Wc("abortReason");return this._abortReason}get signal(){if(!Mc(this))throw Wc("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(c=void 0){if(!Mc(this))throw Wc("error");this._controlledWritableStream._state==="writable"&&Id(this,c)}[mt](c){let p=this._abortAlgorithm(c);return Hs(this),p}[ut](){Ye(this)}}Object.defineProperties(Pi.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Pi.prototype,e.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function Mc(o){return!s(o)||!Object.prototype.hasOwnProperty.call(o,"_controlledWritableStream")?!1:o instanceof Pi}function Ad(o,c,p,S,k,$,B,J){c._controlledWritableStream=o,o._writableStreamController=c,c._queue=void 0,c._queueTotalSize=void 0,Ye(c),c._abortReason=void 0,c._abortController=xC(),c._started=!1,c._strategySizeAlgorithm=J,c._strategyHWM=B,c._writeAlgorithm=S,c._closeAlgorithm=k,c._abortAlgorithm=$;let ge=$c(c);Nc(o,ge);let Re=p(),Te=C(Re);q(Te,()=>{c._started=!0,zs(c)},Pe=>{c._started=!0,Fc(o,Pe)})}function zC(o,c,p,S){let k=Object.create(Pi.prototype),$=()=>{},B=()=>C(void 0),J=()=>C(void 0),ge=()=>C(void 0);c.start!==void 0&&($=()=>c.start(k)),c.write!==void 0&&(B=Re=>c.write(Re,k)),c.close!==void 0&&(J=()=>c.close()),c.abort!==void 0&&(ge=Re=>c.abort(Re)),Ad(o,k,$,B,J,ge,p,S)}function Hs(o){o._writeAlgorithm=void 0,o._closeAlgorithm=void 0,o._abortAlgorithm=void 0,o._strategySizeAlgorithm=void 0}function BC(o){we(o,Od,0),zs(o)}function UC(o,c){try{return o._strategySizeAlgorithm(c)}catch(p){return jc(o,p),1}}function Fd(o){return o._strategyHWM-o._queueTotalSize}function KC(o,c,p){try{we(o,c,p)}catch(k){jc(o,k);return}let S=o._controlledWritableStream;if(!tn(S)&&S._state==="writable"){let k=$c(o);Nc(S,k)}zs(o)}function zs(o){let c=o._controlledWritableStream;if(!o._started||c._inFlightWriteRequest!==void 0)return;if(c._state==="erroring"){Lc(c);return}if(o._queue.length===0)return;let S=Kt(o);S===Od?GC(o):VC(o,S)}function jc(o,c){o._controlledWritableStream._state==="writable"&&Id(o,c)}function GC(o){let c=o._controlledWritableStream;NC(c),be(o);let p=o._closeAlgorithm();Hs(o),q(p,()=>{FC(c)},S=>{IC(c,S)})}function VC(o,c){let p=o._controlledWritableStream;MC(p);let S=o._writeAlgorithm(c);q(S,()=>{OC(p);let k=p._state;if(be(o),!tn(p)&&k==="writable"){let $=$c(o);Nc(p,$)}zs(o)},k=>{p._state==="writable"&&Hs(o),AC(p,k)})}function $c(o){return Fd(o)<=0}function Id(o,c){let p=o._controlledWritableStream;Hs(o),Ic(p,c)}function Bs(o){return new TypeError(`WritableStream.prototype.${o} can only be used on a WritableStream`)}function Wc(o){return new TypeError(`WritableStreamDefaultController.prototype.${o} can only be used on a WritableStreamDefaultController`)}function Vn(o){return new TypeError(`WritableStreamDefaultWriter.prototype.${o} can only be used on a WritableStreamDefaultWriter`)}function _o(o){return new TypeError("Cannot "+o+" a stream using a released writer")}function Us(o){o._closedPromise=b((c,p)=>{o._closedPromise_resolve=c,o._closedPromise_reject=p,o._closedPromiseState="pending"})}function Ld(o,c){Us(o),Hc(o,c)}function YC(o){Us(o),Nd(o)}function Hc(o,c){o._closedPromise_reject!==void 0&&(O(o._closedPromise),o._closedPromise_reject(c),o._closedPromise_resolve=void 0,o._closedPromise_reject=void 0,o._closedPromiseState="rejected")}function XC(o,c){Ld(o,c)}function Nd(o){o._closedPromise_resolve!==void 0&&(o._closedPromise_resolve(void 0),o._closedPromise_resolve=void 0,o._closedPromise_reject=void 0,o._closedPromiseState="resolved")}function Ks(o){o._readyPromise=b((c,p)=>{o._readyPromise_resolve=c,o._readyPromise_reject=p}),o._readyPromiseState="pending"}function zc(o,c){Ks(o),jd(o,c)}function Md(o){Ks(o),Bc(o)}function jd(o,c){o._readyPromise_reject!==void 0&&(O(o._readyPromise),o._readyPromise_reject(c),o._readyPromise_resolve=void 0,o._readyPromise_reject=void 0,o._readyPromiseState="rejected")}function QC(o){Ks(o)}function JC(o,c){zc(o,c)}function Bc(o){o._readyPromise_resolve!==void 0&&(o._readyPromise_resolve(void 0),o._readyPromise_resolve=void 0,o._readyPromise_reject=void 0,o._readyPromiseState="fulfilled")}let $d=typeof DOMException!="undefined"?DOMException:void 0;function ZC(o){if(!(typeof o=="function"||typeof o=="object"))return!1;try{return new o,!0}catch{return!1}}function eR(){let o=function(p,S){this.message=p||"",this.name=S||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return o.prototype=Object.create(Error.prototype),Object.defineProperty(o.prototype,"constructor",{value:o,writable:!0,configurable:!0}),o}let tR=ZC($d)?$d:eR();function Wd(o,c,p,S,k,$){let B=ke(o),J=Td(c);o._disturbed=!0;let ge=!1,Re=C(void 0);return b((Te,Pe)=>{let it;if($!==void 0){if(it=()=>{let se=new tR("Aborted","AbortError"),Ce=[];S||Ce.push(()=>c._state==="writable"?$s(c,se):C(void 0)),k||Ce.push(()=>o._state==="readable"?Nr(o,se):C(void 0)),tr(()=>Promise.all(Ce.map(Ie=>Ie())),!0,se)},$.aborted){it();return}$.addEventListener("abort",it)}function Mr(){return b((se,Ce)=>{function Ie(ur){ur?se():E(xi(),Ie,Ce)}Ie(!1)})}function xi(){return ge?C(!0):E(J._readyPromise,()=>b((se,Ce)=>{Bt(B,{_chunkSteps:Ie=>{Re=E(qd(J,Ie),void 0,t),se(!1)},_closeSteps:()=>se(!0),_errorSteps:Ce})}))}if(pn(o,B._closedPromise,se=>{S?Cr(!0,se):tr(()=>$s(c,se),!0,se)}),pn(c,J._closedPromise,se=>{k?Cr(!0,se):tr(()=>Nr(o,se),!0,se)}),Gt(o,B._closedPromise,()=>{p?Cr():tr(()=>$C(J))}),tn(c)||c._state==="closed"){let se=new TypeError("the destination writable stream closed before all data could be piped to it");k?Cr(!0,se):tr(()=>Nr(o,se),!0,se)}O(Mr());function An(){let se=Re;return E(Re,()=>se!==Re?An():void 0)}function pn(se,Ce,Ie){se._state==="errored"?Ie(se._storedError):A(Ce,Ie)}function Gt(se,Ce,Ie){se._state==="closed"?Ie():N(Ce,Ie)}function tr(se,Ce,Ie){if(ge)return;ge=!0,c._state==="writable"&&!tn(c)?N(An(),ur):ur();function ur(){q(se(),()=>gn(Ce,Ie),ki=>gn(!0,ki))}}function Cr(se,Ce){ge||(ge=!0,c._state==="writable"&&!tn(c)?N(An(),()=>gn(se,Ce)):gn(se,Ce))}function gn(se,Ce){kd(J),je(B),$!==void 0&&$.removeEventListener("abort",it),se?Pe(Ce):Te(void 0)}})}class Di{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Gs(this))throw Xs("desiredSize");return Uc(this)}close(){if(!Gs(this))throw Xs("close");if(!Ei(this))throw new TypeError("The stream is not in a state that permits close");To(this)}enqueue(c=void 0){if(!Gs(this))throw Xs("enqueue");if(!Ei(this))throw new TypeError("The stream is not in a state that permits enqueue");return Ys(this,c)}error(c=void 0){if(!Gs(this))throw Xs("error");xn(this,c)}[Pt](c){Ye(this);let p=this._cancelAlgorithm(c);return Vs(this),p}[Ot](c){let p=this._controlledReadableStream;if(this._queue.length>0){let S=be(this);this._closeRequested&&this._queue.length===0?(Vs(this),Po(p)):So(this),c._chunkSteps(S)}else Dt(p,c),So(this)}}Object.defineProperties(Di.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Di.prototype,e.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function Gs(o){return!s(o)||!Object.prototype.hasOwnProperty.call(o,"_controlledReadableStream")?!1:o instanceof Di}function So(o){if(!Hd(o))return;if(o._pulling){o._pullAgain=!0;return}o._pulling=!0;let p=o._pullAlgorithm();q(p,()=>{o._pulling=!1,o._pullAgain&&(o._pullAgain=!1,So(o))},S=>{xn(o,S)})}function Hd(o){let c=o._controlledReadableStream;return!Ei(o)||!o._started?!1:!!(On(c)&&yr(c)>0||Uc(o)>0)}function Vs(o){o._pullAlgorithm=void 0,o._cancelAlgorithm=void 0,o._strategySizeAlgorithm=void 0}function To(o){if(!Ei(o))return;let c=o._controlledReadableStream;o._closeRequested=!0,o._queue.length===0&&(Vs(o),Po(c))}function Ys(o,c){if(!Ei(o))return;let p=o._controlledReadableStream;if(On(p)&&yr(p)>0)Ir(p,c,!1);else{let S;try{S=o._strategySizeAlgorithm(c)}catch(k){throw xn(o,k),k}try{we(o,c,S)}catch(k){throw xn(o,k),k}}So(o)}function xn(o,c){let p=o._controlledReadableStream;p._state==="readable"&&(Ye(o),Vs(o),Kd(p,c))}function Uc(o){let c=o._controlledReadableStream._state;return c==="errored"?null:c==="closed"?0:o._strategyHWM-o._queueTotalSize}function rR(o){return!Hd(o)}function Ei(o){let c=o._controlledReadableStream._state;return!o._closeRequested&&c==="readable"}function zd(o,c,p,S,k,$,B){c._controlledReadableStream=o,c._queue=void 0,c._queueTotalSize=void 0,Ye(c),c._started=!1,c._closeRequested=!1,c._pullAgain=!1,c._pulling=!1,c._strategySizeAlgorithm=B,c._strategyHWM=$,c._pullAlgorithm=S,c._cancelAlgorithm=k,o._readableStreamController=c;let J=p();q(C(J),()=>{c._started=!0,So(c)},ge=>{xn(c,ge)})}function nR(o,c,p,S){let k=Object.create(Di.prototype),$=()=>{},B=()=>C(void 0),J=()=>C(void 0);c.start!==void 0&&($=()=>c.start(k)),c.pull!==void 0&&(B=()=>c.pull(k)),c.cancel!==void 0&&(J=ge=>c.cancel(ge)),zd(o,k,$,B,J,p,S)}function Xs(o){return new TypeError(`ReadableStreamDefaultController.prototype.${o} can only be used on a ReadableStreamDefaultController`)}function iR(o,c){return Ft(o._readableStreamController)?sR(o):oR(o)}function oR(o,c){let p=ke(o),S=!1,k=!1,$=!1,B=!1,J,ge,Re,Te,Pe,it=b(Gt=>{Pe=Gt});function Mr(){return S?(k=!0,C(void 0)):(S=!0,Bt(p,{_chunkSteps:tr=>{z(()=>{k=!1;let Cr=tr,gn=tr;$||Ys(Re._readableStreamController,Cr),B||Ys(Te._readableStreamController,gn),S=!1,k&&Mr()})},_closeSteps:()=>{S=!1,$||To(Re._readableStreamController),B||To(Te._readableStreamController),(!$||!B)&&Pe(void 0)},_errorSteps:()=>{S=!1}}),C(void 0))}function xi(Gt){if($=!0,J=Gt,B){let tr=R([J,ge]),Cr=Nr(o,tr);Pe(Cr)}return it}function An(Gt){if(B=!0,ge=Gt,$){let tr=R([J,ge]),Cr=Nr(o,tr);Pe(Cr)}return it}function pn(){}return Re=Kc(pn,Mr,xi),Te=Kc(pn,Mr,An),A(p._closedPromise,Gt=>{xn(Re._readableStreamController,Gt),xn(Te._readableStreamController,Gt),(!$||!B)&&Pe(void 0)}),[Re,Te]}function sR(o){let c=ke(o),p=!1,S=!1,k=!1,$=!1,B=!1,J,ge,Re,Te,Pe,it=b(se=>{Pe=se});function Mr(se){A(se._closedPromise,Ce=>{se===c&&(Lr(Re._readableStreamController,Ce),Lr(Te._readableStreamController,Ce),(!$||!B)&&Pe(void 0))})}function xi(){Kn(c)&&(je(c),c=ke(o),Mr(c)),Bt(c,{_chunkSteps:Ce=>{z(()=>{S=!1,k=!1;let Ie=Ce,ur=Ce;if(!$&&!B)try{ur=Y(Ce)}catch(ki){Lr(Re._readableStreamController,ki),Lr(Te._readableStreamController,ki),Pe(Nr(o,ki));return}$||Fs(Re._readableStreamController,Ie),B||Fs(Te._readableStreamController,ur),p=!1,S?pn():k&&Gt()})},_closeSteps:()=>{p=!1,$||vo(Re._readableStreamController),B||vo(Te._readableStreamController),Re._readableStreamController._pendingPullIntos.length>0&&Is(Re._readableStreamController,0),Te._readableStreamController._pendingPullIntos.length>0&&Is(Te._readableStreamController,0),(!$||!B)&&Pe(void 0)},_errorSteps:()=>{p=!1}})}function An(se,Ce){Ze(c)&&(je(c),c=wd(o),Mr(c));let Ie=Ce?Te:Re,ur=Ce?Re:Te;_d(c,se,{_chunkSteps:qi=>{z(()=>{S=!1,k=!1;let Oi=Ce?B:$;if(Ce?$:B)Oi||Ls(Ie._readableStreamController,qi);else{let sf;try{sf=Y(qi)}catch(Vc){Lr(Ie._readableStreamController,Vc),Lr(ur._readableStreamController,Vc),Pe(Nr(o,Vc));return}Oi||Ls(Ie._readableStreamController,qi),Fs(ur._readableStreamController,sf)}p=!1,S?pn():k&&Gt()})},_closeSteps:qi=>{p=!1;let Oi=Ce?B:$,oa=Ce?$:B;Oi||vo(Ie._readableStreamController),oa||vo(ur._readableStreamController),qi!==void 0&&(Oi||Ls(Ie._readableStreamController,qi),!oa&&ur._readableStreamController._pendingPullIntos.length>0&&Is(ur._readableStreamController,0)),(!Oi||!oa)&&Pe(void 0)},_errorSteps:()=>{p=!1}})}function pn(){if(p)return S=!0,C(void 0);p=!0;let se=qc(Re._readableStreamController);return se===null?xi():An(se._view,!1),C(void 0)}function Gt(){if(p)return k=!0,C(void 0);p=!0;let se=qc(Te._readableStreamController);return se===null?xi():An(se._view,!0),C(void 0)}function tr(se){if($=!0,J=se,B){let Ce=R([J,ge]),Ie=Nr(o,Ce);Pe(Ie)}return it}function Cr(se){if(B=!0,ge=se,$){let Ce=R([J,ge]),Ie=Nr(o,Ce);Pe(Ie)}return it}function gn(){}return Re=Ud(gn,pn,tr),Te=Ud(gn,Gt,Cr),Mr(c),[Re,Te]}function aR(o,c){nt(o,c);let p=o,S=p==null?void 0:p.autoAllocateChunkSize,k=p==null?void 0:p.cancel,$=p==null?void 0:p.pull,B=p==null?void 0:p.start,J=p==null?void 0:p.type;return{autoAllocateChunkSize:S===void 0?void 0:At(S,`${c} has member 'autoAllocateChunkSize' that`),cancel:k===void 0?void 0:cR(k,p,`${c} has member 'cancel' that`),pull:$===void 0?void 0:uR($,p,`${c} has member 'pull' that`),start:B===void 0?void 0:lR(B,p,`${c} has member 'start' that`),type:J===void 0?void 0:dR(J,`${c} has member 'type' that`)}}function cR(o,c,p){return lt(o,p),S=>G(o,c,[S])}function uR(o,c,p){return lt(o,p),S=>G(o,c,[S])}function lR(o,c,p){return lt(o,p),S=>M(o,c,[S])}function dR(o,c){if(o=`${o}`,o!=="bytes")throw new TypeError(`${c} '${o}' is not a valid enumeration value for ReadableStreamType`);return o}function fR(o,c){nt(o,c);let p=o==null?void 0:o.mode;return{mode:p===void 0?void 0:hR(p,`${c} has member 'mode' that`)}}function hR(o,c){if(o=`${o}`,o!=="byob")throw new TypeError(`${c} '${o}' is not a valid enumeration value for ReadableStreamReaderMode`);return o}function pR(o,c){nt(o,c);let p=o==null?void 0:o.preventCancel;return{preventCancel:Boolean(p)}}function Bd(o,c){nt(o,c);let p=o==null?void 0:o.preventAbort,S=o==null?void 0:o.preventCancel,k=o==null?void 0:o.preventClose,$=o==null?void 0:o.signal;return $!==void 0&&gR($,`${c} has member 'signal' that`),{preventAbort:Boolean(p),preventCancel:Boolean(S),preventClose:Boolean(k),signal:$}}function gR(o,c){if(!DC(o))throw new TypeError(`${c} is not an AbortSignal.`)}function mR(o,c){nt(o,c);let p=o==null?void 0:o.readable;mr(p,"readable","ReadableWritablePair"),vr(p,`${c} has member 'readable' that`);let S=o==null?void 0:o.writable;return mr(S,"writable","ReadableWritablePair"),Sd(S,`${c} has member 'writable' that`),{readable:p,writable:S}}class kn{constructor(c={},p={}){c===void 0?c=null:cr(c,"First parameter");let S=js(p,"Second parameter"),k=aR(c,"First parameter");if(Gc(this),k.type==="bytes"){if(S.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let $=wo(S,0);yC(this,k,$)}else{let $=Ms(S),B=wo(S,1);nR(this,k,B,$)}}get locked(){if(!qn(this))throw Yn("locked");return On(this)}cancel(c=void 0){return qn(this)?On(this)?w(new TypeError("Cannot cancel a stream that already has a reader")):Nr(this,c):w(Yn("cancel"))}getReader(c=void 0){if(!qn(this))throw Yn("getReader");return fR(c,"First parameter").mode===void 0?ke(this):wd(this)}pipeThrough(c,p={}){if(!qn(this))throw Yn("pipeThrough");dt(c,1,"pipeThrough");let S=mR(c,"First parameter"),k=Bd(p,"Second parameter");if(On(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(Ti(S.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let $=Wd(this,S.writable,k.preventClose,k.preventAbort,k.preventCancel,k.signal);return O($),S.readable}pipeTo(c,p={}){if(!qn(this))return w(Yn("pipeTo"));if(c===void 0)return w("Parameter 1 is required in 'pipeTo'.");if(!Si(c))return w(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let S;try{S=Bd(p,"Second parameter")}catch(k){return w(k)}return On(this)?w(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):Ti(c)?w(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):Wd(this,c,S.preventClose,S.preventAbort,S.preventCancel,S.signal)}tee(){if(!qn(this))throw Yn("tee");let c=iR(this);return R(c)}values(c=void 0){if(!qn(this))throw Yn("values");let p=pR(c,"First parameter");return K(this,p.preventCancel)}}Object.defineProperties(kn.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(kn.prototype,e.toStringTag,{value:"ReadableStream",configurable:!0}),typeof e.asyncIterator=="symbol"&&Object.defineProperty(kn.prototype,e.asyncIterator,{value:kn.prototype.values,writable:!0,configurable:!0});function Kc(o,c,p,S=1,k=()=>1){let $=Object.create(kn.prototype);Gc($);let B=Object.create(Di.prototype);return zd($,B,o,c,p,S,k),$}function Ud(o,c,p){let S=Object.create(kn.prototype);Gc(S);let k=Object.create(le.prototype);return bd(S,k,o,c,p,0,void 0),S}function Gc(o){o._state="readable",o._reader=void 0,o._storedError=void 0,o._disturbed=!1}function qn(o){return!s(o)||!Object.prototype.hasOwnProperty.call(o,"_readableStreamController")?!1:o instanceof kn}function On(o){return o._reader!==void 0}function Nr(o,c){if(o._disturbed=!0,o._state==="closed")return C(void 0);if(o._state==="errored")return w(o._storedError);Po(o);let p=o._reader;p!==void 0&&Kn(p)&&(p._readIntoRequests.forEach(k=>{k._closeSteps(void 0)}),p._readIntoRequests=new _e);let S=o._readableStreamController[Pt](c);return H(S,t)}function Po(o){o._state="closed";let c=o._reader;c!==void 0&&(gt(c),Ze(c)&&(c._readRequests.forEach(p=>{p._closeSteps()}),c._readRequests=new _e))}function Kd(o,c){o._state="errored",o._storedError=c;let p=o._reader;p!==void 0&&(Wt(p,c),Ze(p)?(p._readRequests.forEach(S=>{S._errorSteps(c)}),p._readRequests=new _e):(p._readIntoRequests.forEach(S=>{S._errorSteps(c)}),p._readIntoRequests=new _e))}function Yn(o){return new TypeError(`ReadableStream.prototype.${o} can only be used on a ReadableStream`)}function Gd(o,c){nt(o,c);let p=o==null?void 0:o.highWaterMark;return mr(p,"highWaterMark","QueuingStrategyInit"),{highWaterMark:Ar(p)}}let Vd=o=>o.byteLength;Object.defineProperty(Vd,"name",{value:"size",configurable:!0});class Qs{constructor(c){dt(c,1,"ByteLengthQueuingStrategy"),c=Gd(c,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=c.highWaterMark}get highWaterMark(){if(!Xd(this))throw Yd("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!Xd(this))throw Yd("size");return Vd}}Object.defineProperties(Qs.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Qs.prototype,e.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function Yd(o){return new TypeError(`ByteLengthQueuingStrategy.prototype.${o} can only be used on a ByteLengthQueuingStrategy`)}function Xd(o){return!s(o)||!Object.prototype.hasOwnProperty.call(o,"_byteLengthQueuingStrategyHighWaterMark")?!1:o instanceof Qs}let Qd=()=>1;Object.defineProperty(Qd,"name",{value:"size",configurable:!0});class Js{constructor(c){dt(c,1,"CountQueuingStrategy"),c=Gd(c,"First parameter"),this._countQueuingStrategyHighWaterMark=c.highWaterMark}get highWaterMark(){if(!Zd(this))throw Jd("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!Zd(this))throw Jd("size");return Qd}}Object.defineProperties(Js.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Js.prototype,e.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function Jd(o){return new TypeError(`CountQueuingStrategy.prototype.${o} can only be used on a CountQueuingStrategy`)}function Zd(o){return!s(o)||!Object.prototype.hasOwnProperty.call(o,"_countQueuingStrategyHighWaterMark")?!1:o instanceof Js}function vR(o,c){nt(o,c);let p=o==null?void 0:o.flush,S=o==null?void 0:o.readableType,k=o==null?void 0:o.start,$=o==null?void 0:o.transform,B=o==null?void 0:o.writableType;return{flush:p===void 0?void 0:yR(p,o,`${c} has member 'flush' that`),readableType:S,start:k===void 0?void 0:bR(k,o,`${c} has member 'start' that`),transform:$===void 0?void 0:wR($,o,`${c} has member 'transform' that`),writableType:B}}function yR(o,c,p){return lt(o,p),S=>G(o,c,[S])}function bR(o,c,p){return lt(o,p),S=>M(o,c,[S])}function wR(o,c,p){return lt(o,p),(S,k)=>G(o,c,[S,k])}class Zs{constructor(c={},p={},S={}){c===void 0&&(c=null);let k=js(p,"Second parameter"),$=js(S,"Third parameter"),B=vR(c,"First parameter");if(B.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(B.writableType!==void 0)throw new RangeError("Invalid writableType specified");let J=wo($,0),ge=Ms($),Re=wo(k,1),Te=Ms(k),Pe,it=b(Mr=>{Pe=Mr});CR(this,it,Re,Te,J,ge),_R(this,B),B.start!==void 0?Pe(B.start(this._transformStreamController)):Pe(void 0)}get readable(){if(!ef(this))throw of("readable");return this._readable}get writable(){if(!ef(this))throw of("writable");return this._writable}}Object.defineProperties(Zs.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Zs.prototype,e.toStringTag,{value:"TransformStream",configurable:!0});function CR(o,c,p,S,k,$){function B(){return c}function J(it){return PR(o,it)}function ge(it){return DR(o,it)}function Re(){return ER(o)}o._writable=kC(B,J,Re,ge,p,S);function Te(){return xR(o)}function Pe(it){return ta(o,it),C(void 0)}o._readable=Kc(B,Te,Pe,k,$),o._backpressure=void 0,o._backpressureChangePromise=void 0,o._backpressureChangePromise_resolve=void 0,ra(o,!0),o._transformStreamController=void 0}function ef(o){return!s(o)||!Object.prototype.hasOwnProperty.call(o,"_transformStreamController")?!1:o instanceof Zs}function ea(o,c){xn(o._readable._readableStreamController,c),ta(o,c)}function ta(o,c){tf(o._transformStreamController),jc(o._writable._writableStreamController,c),o._backpressure&&ra(o,!1)}function ra(o,c){o._backpressureChangePromise!==void 0&&o._backpressureChangePromise_resolve(),o._backpressureChangePromise=b(p=>{o._backpressureChangePromise_resolve=p}),o._backpressure=c}class Do{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!na(this))throw ia("desiredSize");let c=this._controlledTransformStream._readable._readableStreamController;return Uc(c)}enqueue(c=void 0){if(!na(this))throw ia("enqueue");rf(this,c)}error(c=void 0){if(!na(this))throw ia("error");SR(this,c)}terminate(){if(!na(this))throw ia("terminate");TR(this)}}Object.defineProperties(Do.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Do.prototype,e.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function na(o){return!s(o)||!Object.prototype.hasOwnProperty.call(o,"_controlledTransformStream")?!1:o instanceof Do}function RR(o,c,p,S){c._controlledTransformStream=o,o._transformStreamController=c,c._transformAlgorithm=p,c._flushAlgorithm=S}function _R(o,c){let p=Object.create(Do.prototype),S=$=>{try{return rf(p,$),C(void 0)}catch(B){return w(B)}},k=()=>C(void 0);c.transform!==void 0&&(S=$=>c.transform($,p)),c.flush!==void 0&&(k=()=>c.flush(p)),RR(o,p,S,k)}function tf(o){o._transformAlgorithm=void 0,o._flushAlgorithm=void 0}function rf(o,c){let p=o._controlledTransformStream,S=p._readable._readableStreamController;if(!Ei(S))throw new TypeError("Readable side is not in a state that permits enqueue");try{Ys(S,c)}catch($){throw ta(p,$),p._readable._storedError}rR(S)!==p._backpressure&&ra(p,!0)}function SR(o,c){ea(o._controlledTransformStream,c)}function nf(o,c){let p=o._transformAlgorithm(c);return H(p,void 0,S=>{throw ea(o._controlledTransformStream,S),S})}function TR(o){let c=o._controlledTransformStream,p=c._readable._readableStreamController;To(p);let S=new TypeError("TransformStream terminated");ta(c,S)}function PR(o,c){let p=o._transformStreamController;if(o._backpressure){let S=o._backpressureChangePromise;return H(S,()=>{let k=o._writable;if(k._state==="erroring")throw k._storedError;return nf(p,c)})}return nf(p,c)}function DR(o,c){return ea(o,c),C(void 0)}function ER(o){let c=o._readable,p=o._transformStreamController,S=p._flushAlgorithm();return tf(p),H(S,()=>{if(c._state==="errored")throw c._storedError;To(c._readableStreamController)},k=>{throw ea(o,k),c._storedError})}function xR(o){return ra(o,!1),o._backpressureChangePromise}function ia(o){return new TypeError(`TransformStreamDefaultController.prototype.${o} can only be used on a TransformStreamDefaultController`)}function of(o){return new TypeError(`TransformStream.prototype.${o} can only be used on a TransformStream`)}r.ByteLengthQueuingStrategy=Qs,r.CountQueuingStrategy=Js,r.ReadableByteStreamController=le,r.ReadableStream=kn,r.ReadableStreamBYOBReader=bo,r.ReadableStreamBYOBRequest=vt,r.ReadableStreamDefaultController=Di,r.ReadableStreamDefaultReader=Zt,r.TransformStream=Zs,r.TransformStreamDefaultController=Do,r.WritableStream=Co,r.WritableStreamDefaultController=Pi,r.WritableStreamDefaultWriter=Ro,Object.defineProperty(r,"__esModule",{value:!0})})});var rw=F(()=>{var mk=65536;if(!globalThis.ReadableStream)try{let r=require("process"),{emitWarning:e}=r;try{r.emitWarning=()=>{},Object.assign(globalThis,require("stream/web")),r.emitWarning=e}catch(t){throw r.emitWarning=e,t}}catch{Object.assign(globalThis,tw())}try{let{Blob:r}=require("buffer");r&&!r.prototype.stream&&(r.prototype.stream=function(t){let n=0,i=this;return new ReadableStream({type:"bytes",async pull(s){let l=await i.slice(n,Math.min(i.size,n+mk)).arrayBuffer();n+=l.byteLength,s.enqueue(new Uint8Array(l)),n===i.size&&s.close()}})})}catch{}});async function*Yl(r,e=!0){for(let t of r)if("stream"in t)yield*t.stream();else if(ArrayBuffer.isView(t))if(e){let n=t.byteOffset,i=t.byteOffset+t.byteLength;for(;n!==i;){let s=Math.min(i-n,nw),a=t.buffer.slice(n,n+s);n+=a.byteLength,yield new Uint8Array(a)}}else yield t;else{let n=0;for(;n!==t.size;){let s=await t.slice(n,Math.min(t.size,n+nw)).arrayBuffer();n+=s.byteLength,yield new Uint8Array(s)}}}var HA,nw,Dn,vs,oo,so,iw,vk,vi,ys=xo(()=>{HA=oe(rw());nw=65536;iw=(so=class{constructor(e=[],t={}){Rr(this,Dn,[]);Rr(this,vs,"");Rr(this,oo,0);if(typeof e!="object"||e===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof e[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof t!="object"&&typeof t!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");t===null&&(t={});let n=new TextEncoder;for(let s of e){let a;ArrayBuffer.isView(s)?a=new Uint8Array(s.buffer.slice(s.byteOffset,s.byteOffset+s.byteLength)):s instanceof ArrayBuffer?a=new Uint8Array(s.slice(0)):s instanceof so?a=s:a=n.encode(s),rr(this,oo,Le(this,oo)+(ArrayBuffer.isView(a)?a.byteLength:a.size)),Le(this,Dn).push(a)}let i=t.type===void 0?"":String(t.type);rr(this,vs,/^[\x20-\x7E]*$/.test(i)?i:"")}get size(){return Le(this,oo)}get type(){return Le(this,vs)}async text(){let e=new TextDecoder,t="";for await(let n of Yl(Le(this,Dn),!1))t+=e.decode(n,{stream:!0});return t+=e.decode(),t}async arrayBuffer(){let e=new Uint8Array(this.size),t=0;for await(let n of Yl(Le(this,Dn),!1))e.set(n,t),t+=n.length;return e.buffer}stream(){let e=Yl(Le(this,Dn),!0);return new globalThis.ReadableStream({type:"bytes",async pull(t){let n=await e.next();n.done?t.close():t.enqueue(n.value)},async cancel(){await e.return()}})}slice(e=0,t=this.size,n=""){let{size:i}=this,s=e<0?Math.max(i+e,0):Math.min(e,i),a=t<0?Math.max(i+t,0):Math.min(t,i),l=Math.max(a-s,0),u=Le(this,Dn),g=[],v=0;for(let C of u){if(v>=l)break;let w=ArrayBuffer.isView(C)?C.byteLength:C.size;if(s&&w<=s)s-=w,a-=w;else{let E;ArrayBuffer.isView(C)?(E=C.subarray(s,Math.min(w,a)),v+=E.byteLength):(E=C.slice(s,Math.min(w,a)),v+=E.size),a-=w,g.push(E),s=0}}let b=new so([],{type:String(n).toLowerCase()});return rr(b,oo,l),rr(b,Dn,g),b}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](e){return e&&typeof e=="object"&&typeof e.constructor=="function"&&(typeof e.stream=="function"||typeof e.arrayBuffer=="function")&&/^(Blob|File)$/.test(e[Symbol.toStringTag])}},Dn=new WeakMap,vs=new WeakMap,oo=new WeakMap,so);Object.defineProperties(iw.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});vk=iw,vi=vk});var ws,Cs,ow,yk,bk,bs,Xl=xo(()=>{ys();yk=(ow=class extends vi{constructor(e,t,n={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(e,n);Rr(this,ws,0);Rr(this,Cs,"");n===null&&(n={});let i=n.lastModified===void 0?Date.now():Number(n.lastModified);Number.isNaN(i)||rr(this,ws,i),rr(this,Cs,String(t))}get name(){return Le(this,Cs)}get lastModified(){return Le(this,ws)}get[Symbol.toStringTag](){return"File"}},ws=new WeakMap,Cs=new WeakMap,ow),bk=yk,bs=bk});function cw(r,e=vi){var t=`${sw()}${sw()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),n=[],i=`--${t}\r
Content-Disposition: form-data; name="`;return r.forEach((s,a)=>typeof s=="string"?n.push(i+Ql(a)+`"\r
\r
${s.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):n.push(i+Ql(a)+`"; filename="${Ql(s.name,1)}"\r
Content-Type: ${s.type||"application/octet-stream"}\r
\r
`,s,`\r
`)),n.push(`--${t}--`),new e(n,{type:"multipart/form-data; boundary="+t})}var Rs,wk,Ck,sw,Rk,aw,Ql,yi,xr,uw,ao,Jl=xo(()=>{ys();Xl();({toStringTag:Rs,iterator:wk,hasInstance:Ck}=Symbol),sw=Math.random,Rk="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),aw=(r,e,t)=>(r+="",/^(Blob|File)$/.test(e&&e[Rs])?[(t=t!==void 0?t+"":e[Rs]=="File"?e.name:"blob",r),e.name!==t||e[Rs]=="blob"?new bs([e],t,e):e]:[r,e+""]),Ql=(r,e)=>(e?r:r.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),yi=(r,e,t)=>{if(e.length<t)throw new TypeError(`Failed to execute '${r}' on 'FormData': ${t} arguments required, but only ${e.length} present.`)},ao=(uw=class{constructor(...e){Rr(this,xr,[]);if(e.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[Rs](){return"FormData"}[wk](){return this.entries()}static[Ck](e){return e&&typeof e=="object"&&e[Rs]==="FormData"&&!Rk.some(t=>typeof e[t]!="function")}append(...e){yi("append",arguments,2),Le(this,xr).push(aw(...e))}delete(e){yi("delete",arguments,1),e+="",rr(this,xr,Le(this,xr).filter(([t])=>t!==e))}get(e){yi("get",arguments,1),e+="";for(var t=Le(this,xr),n=t.length,i=0;i<n;i++)if(t[i][0]===e)return t[i][1];return null}getAll(e,t){return yi("getAll",arguments,1),t=[],e+="",Le(this,xr).forEach(n=>n[0]===e&&t.push(n[1])),t}has(e){return yi("has",arguments,1),e+="",Le(this,xr).some(t=>t[0]===e)}forEach(e,t){yi("forEach",arguments,1);for(var[n,i]of this)e.call(t,i,n,this)}set(...e){yi("set",arguments,2);var t=[],n=!0;e=aw(...e),Le(this,xr).forEach(i=>{i[0]===e[0]?n&&(n=!t.push(e)):t.push(i)}),n&&t.push(e),rr(this,xr,t)}*entries(){yield*Le(this,xr)}*keys(){for(var[e]of this)yield e}*values(){for(var[,e]of this)yield e}},xr=new WeakMap,uw)});var Ss,_k,dw,Sk,Tk,bi,co,ed,Pk,fw=xo(()=>{Ss=oe(require("fs")),_k=oe(require("path")),dw=oe(require("worker_threads"));Xl();ys();({stat:Sk}=Ss.promises),Tk=globalThis.DOMException||(()=>{let r=new dw.MessageChannel().port1,e=new ArrayBuffer(0);try{r.postMessage(e,[e,e])}catch(t){return t.constructor}})(),ed=class{constructor(e){Rr(this,bi,void 0);Rr(this,co,void 0);rr(this,bi,e.path),rr(this,co,e.start),this.size=e.size,this.lastModified=e.lastModified}slice(e,t){return new ed({path:Le(this,bi),lastModified:this.lastModified,size:t-e,start:e})}async*stream(){let{mtimeMs:e}=await Sk(Le(this,bi));if(e>this.lastModified)throw new Tk("The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.","NotReadableError");yield*(0,Ss.createReadStream)(Le(this,bi),{start:Le(this,co),end:Le(this,co)+this.size-1})}get[Symbol.toStringTag](){return"Blob"}},Pk=ed;bi=new WeakMap,co=new WeakMap});var gw={};ff(gw,{toFormData:()=>Ak});function Ok(r){let e=r.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!e)return;let t=e[2]||e[3]||"",n=t.slice(t.lastIndexOf("\\")+1);return n=n.replace(/%22/g,'"'),n=n.replace(/&#(\d{4});/g,(i,s)=>String.fromCharCode(s)),n}async function Ak(r,e){if(!/multipart/i.test(e))throw new TypeError("Failed to fetch");let t=e.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!t)throw new TypeError("no or bad content-type header, no multipart boundary");let n=new pw(t[1]||t[2]),i,s,a,l,u,g,v=[],b=new ao,C=A=>{a+=N.decode(A,{stream:!0})},w=A=>{v.push(A)},E=()=>{let A=new bs(v,g,{type:u});b.append(l,A)},q=()=>{b.append(l,a)},N=new TextDecoder("utf-8");N.decode(),n.onPartBegin=function(){n.onPartData=C,n.onPartEnd=q,i="",s="",a="",l="",u="",g=null,v.length=0},n.onHeaderField=function(A){i+=N.decode(A,{stream:!0})},n.onHeaderValue=function(A){s+=N.decode(A,{stream:!0})},n.onHeaderEnd=function(){if(s+=N.decode(),i=i.toLowerCase(),i==="content-disposition"){let A=s.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);A&&(l=A[2]||A[3]||""),g=Ok(s),g&&(n.onPartData=w,n.onPartEnd=E)}else i==="content-type"&&(u=s);s="",i=""};for await(let A of r)n.write(A);return n.end(),b}var fn,Me,hw,zn,gc,mc,Dk,Ts,Ek,xk,kk,qk,wi,pw,mw=xo(()=>{fw();Jl();fn=0,Me={START_BOUNDARY:fn++,HEADER_FIELD_START:fn++,HEADER_FIELD:fn++,HEADER_VALUE_START:fn++,HEADER_VALUE:fn++,HEADER_VALUE_ALMOST_DONE:fn++,HEADERS_ALMOST_DONE:fn++,PART_DATA_START:fn++,PART_DATA:fn++,END:fn++},hw=1,zn={PART_BOUNDARY:hw,LAST_BOUNDARY:hw*=2},gc=10,mc=13,Dk=32,Ts=45,Ek=58,xk=97,kk=122,qk=r=>r|32,wi=()=>{},pw=class{constructor(e){this.index=0,this.flags=0,this.onHeaderEnd=wi,this.onHeaderField=wi,this.onHeadersEnd=wi,this.onHeaderValue=wi,this.onPartBegin=wi,this.onPartData=wi,this.onPartEnd=wi,this.boundaryChars={},e=`\r
--`+e;let t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n),this.boundaryChars[t[n]]=!0;this.boundary=t,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=Me.START_BOUNDARY}write(e){let t=0,n=e.length,i=this.index,{lookbehind:s,boundary:a,boundaryChars:l,index:u,state:g,flags:v}=this,b=this.boundary.length,C=b-1,w=e.length,E,q,N=z=>{this[z+"Mark"]=t},A=z=>{delete this[z+"Mark"]},H=(z,M,G,X)=>{(M===void 0||M!==G)&&this[z](X&&X.subarray(M,G))},O=(z,M)=>{let G=z+"Mark";G in this&&(M?(H(z,this[G],t,e),delete this[G]):(H(z,this[G],e.length,e),this[G]=0))};for(t=0;t<n;t++)switch(E=e[t],g){case Me.START_BOUNDARY:if(u===a.length-2){if(E===Ts)v|=zn.LAST_BOUNDARY;else if(E!==mc)return;u++;break}else if(u-1==a.length-2){if(v&zn.LAST_BOUNDARY&&E===Ts)g=Me.END,v=0;else if(!(v&zn.LAST_BOUNDARY)&&E===gc)u=0,H("onPartBegin"),g=Me.HEADER_FIELD_START;else return;break}E!==a[u+2]&&(u=-2),E===a[u+2]&&u++;break;case Me.HEADER_FIELD_START:g=Me.HEADER_FIELD,N("onHeaderField"),u=0;case Me.HEADER_FIELD:if(E===mc){A("onHeaderField"),g=Me.HEADERS_ALMOST_DONE;break}if(u++,E===Ts)break;if(E===Ek){if(u===1)return;O("onHeaderField",!0),g=Me.HEADER_VALUE_START;break}if(q=qk(E),q<xk||q>kk)return;break;case Me.HEADER_VALUE_START:if(E===Dk)break;N("onHeaderValue"),g=Me.HEADER_VALUE;case Me.HEADER_VALUE:E===mc&&(O("onHeaderValue",!0),H("onHeaderEnd"),g=Me.HEADER_VALUE_ALMOST_DONE);break;case Me.HEADER_VALUE_ALMOST_DONE:if(E!==gc)return;g=Me.HEADER_FIELD_START;break;case Me.HEADERS_ALMOST_DONE:if(E!==gc)return;H("onHeadersEnd"),g=Me.PART_DATA_START;break;case Me.PART_DATA_START:g=Me.PART_DATA,N("onPartData");case Me.PART_DATA:if(i=u,u===0){for(t+=C;t<w&&!(e[t]in l);)t+=b;t-=C,E=e[t]}if(u<a.length)a[u]===E?(u===0&&O("onPartData",!0),u++):u=0;else if(u===a.length)u++,E===mc?v|=zn.PART_BOUNDARY:E===Ts?v|=zn.LAST_BOUNDARY:u=0;else if(u-1===a.length)if(v&zn.PART_BOUNDARY){if(u=0,E===gc){v&=~zn.PART_BOUNDARY,H("onPartEnd"),H("onPartBegin"),g=Me.HEADER_FIELD_START;break}}else v&zn.LAST_BOUNDARY&&E===Ts?(H("onPartEnd"),g=Me.END,v=0):u=0;if(u>0)s[u-1]=E;else if(i>0){let z=new Uint8Array(s.buffer,s.byteOffset,s.byteLength);H("onPartData",0,i,z),i=0,N("onPartData"),t--}break;case Me.END:break;default:throw new Error(`Unexpected state entered: ${g}`)}O("onHeaderField"),O("onHeaderValue"),O("onPartData"),this.index=u,this.state=g,this.flags=v}end(){if(this.state===Me.HEADER_FIELD_START&&this.index===0||this.state===Me.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==Me.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});var Aw=F((MF,Ow)=>{var ho=1e3,po=ho*60,go=po*60,Ri=go*24,jk=Ri*7,$k=Ri*365.25;Ow.exports=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return Wk(r);if(t==="number"&&isFinite(r))return e.long?zk(r):Hk(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function Wk(r){if(r=String(r),!(r.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(!!e){var t=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*$k;case"weeks":case"week":case"w":return t*jk;case"days":case"day":case"d":return t*Ri;case"hours":case"hour":case"hrs":case"hr":case"h":return t*go;case"minutes":case"minute":case"mins":case"min":case"m":return t*po;case"seconds":case"second":case"secs":case"sec":case"s":return t*ho;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function Hk(r){var e=Math.abs(r);return e>=Ri?Math.round(r/Ri)+"d":e>=go?Math.round(r/go)+"h":e>=po?Math.round(r/po)+"m":e>=ho?Math.round(r/ho)+"s":r+"ms"}function zk(r){var e=Math.abs(r);return e>=Ri?Rc(r,e,Ri,"day"):e>=go?Rc(r,e,go,"hour"):e>=po?Rc(r,e,po,"minute"):e>=ho?Rc(r,e,ho,"second"):r+" ms"}function Rc(r,e,t,n){var i=e>=t*1.5;return Math.round(r/t)+" "+n+(i?"s":"")}});var id=F((jF,Fw)=>{function Bk(r){t.debug=t,t.default=t,t.coerce=u,t.disable=s,t.enable=i,t.enabled=a,t.humanize=Aw(),t.destroy=g,Object.keys(r).forEach(v=>{t[v]=r[v]}),t.names=[],t.skips=[],t.formatters={};function e(v){let b=0;for(let C=0;C<v.length;C++)b=(b<<5)-b+v.charCodeAt(C),b|=0;return t.colors[Math.abs(b)%t.colors.length]}t.selectColor=e;function t(v){let b,C=null,w,E;function q(...N){if(!q.enabled)return;let A=q,H=Number(new Date),O=H-(b||H);A.diff=O,A.prev=b,A.curr=H,b=H,N[0]=t.coerce(N[0]),typeof N[0]!="string"&&N.unshift("%O");let z=0;N[0]=N[0].replace(/%([a-zA-Z%])/g,(G,X)=>{if(G==="%%")return"%";z++;let _e=t.formatters[X];if(typeof _e=="function"){let Ae=N[z];G=_e.call(A,Ae),N.splice(z,1),z--}return G}),t.formatArgs.call(A,N),(A.log||t.log).apply(A,N)}return q.namespace=v,q.useColors=t.useColors(),q.color=t.selectColor(v),q.extend=n,q.destroy=t.destroy,Object.defineProperty(q,"enabled",{enumerable:!0,configurable:!1,get:()=>C!==null?C:(w!==t.namespaces&&(w=t.namespaces,E=t.enabled(v)),E),set:N=>{C=N}}),typeof t.init=="function"&&t.init(q),q}function n(v,b){let C=t(this.namespace+(typeof b=="undefined"?":":b)+v);return C.log=this.log,C}function i(v){t.save(v),t.namespaces=v,t.names=[],t.skips=[];let b,C=(typeof v=="string"?v:"").split(/[\s,]+/),w=C.length;for(b=0;b<w;b++)!C[b]||(v=C[b].replace(/\*/g,".*?"),v[0]==="-"?t.skips.push(new RegExp("^"+v.substr(1)+"$")):t.names.push(new RegExp("^"+v+"$")))}function s(){let v=[...t.names.map(l),...t.skips.map(l).map(b=>"-"+b)].join(",");return t.enable(""),v}function a(v){if(v[v.length-1]==="*")return!0;let b,C;for(b=0,C=t.skips.length;b<C;b++)if(t.skips[b].test(v))return!1;for(b=0,C=t.names.length;b<C;b++)if(t.names[b].test(v))return!0;return!1}function l(v){return v.toString().substring(2,v.toString().length-2).replace(/\.\*\?$/,"*")}function u(v){return v instanceof Error?v.stack||v.message:v}function g(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}Fw.exports=Bk});var Iw=F((pr,_c)=>{pr.formatArgs=Kk;pr.save=Gk;pr.load=Vk;pr.useColors=Uk;pr.storage=Yk();pr.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();pr.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Uk(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Kk(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+_c.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;r.splice(1,0,e,"color: inherit");let t=0,n=0;r[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(t++,i==="%c"&&(n=t))}),r.splice(n,0,e)}pr.log=console.debug||console.log||(()=>{});function Gk(r){try{r?pr.storage.setItem("debug",r):pr.storage.removeItem("debug")}catch{}}function Vk(){let r;try{r=pr.storage.getItem("debug")}catch{}return!r&&typeof process!="undefined"&&"env"in process&&(r=process.env.DEBUG),r}function Yk(){try{return localStorage}catch{}}_c.exports=id()(pr);var{formatters:Xk}=_c.exports;Xk.j=function(r){try{return JSON.stringify(r)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var Nw=F(($F,Lw)=>{"use strict";Lw.exports=(r,e=process.argv)=>{let t=r.startsWith("-")?"":r.length===1?"-":"--",n=e.indexOf(t+r),i=e.indexOf("--");return n!==-1&&(i===-1||n<i)}});var $w=F((WF,jw)=>{"use strict";var Qk=require("os"),Mw=require("tty"),qr=Nw(),{env:_t}=process,Un;qr("no-color")||qr("no-colors")||qr("color=false")||qr("color=never")?Un=0:(qr("color")||qr("colors")||qr("color=true")||qr("color=always"))&&(Un=1);"FORCE_COLOR"in _t&&(_t.FORCE_COLOR==="true"?Un=1:_t.FORCE_COLOR==="false"?Un=0:Un=_t.FORCE_COLOR.length===0?1:Math.min(parseInt(_t.FORCE_COLOR,10),3));function od(r){return r===0?!1:{level:r,hasBasic:!0,has256:r>=2,has16m:r>=3}}function sd(r,e){if(Un===0)return 0;if(qr("color=16m")||qr("color=full")||qr("color=truecolor"))return 3;if(qr("color=256"))return 2;if(r&&!e&&Un===void 0)return 0;let t=Un||0;if(_t.TERM==="dumb")return t;if(process.platform==="win32"){let n=Qk.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in _t)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in _t)||_t.CI_NAME==="codeship"?1:t;if("TEAMCITY_VERSION"in _t)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(_t.TEAMCITY_VERSION)?1:0;if(_t.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in _t){let n=parseInt((_t.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(_t.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(_t.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(_t.TERM)||"COLORTERM"in _t?1:t}function Jk(r){let e=sd(r,r&&r.isTTY);return od(e)}jw.exports={supportsColor:Jk,stdout:od(sd(!0,Mw.isatty(1))),stderr:od(sd(!0,Mw.isatty(2)))}});var Hw=F((qt,Tc)=>{var Zk=require("tty"),Sc=require("util");qt.init=s0;qt.log=n0;qt.formatArgs=t0;qt.save=i0;qt.load=o0;qt.useColors=e0;qt.destroy=Sc.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");qt.colors=[6,2,3,4,5,1];try{let r=$w();r&&(r.stderr||r).level>=2&&(qt.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}qt.inspectOpts=Object.keys(process.env).filter(r=>/^debug_/i.test(r)).reduce((r,e)=>{let t=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),r[t]=n,r},{});function e0(){return"colors"in qt.inspectOpts?Boolean(qt.inspectOpts.colors):Zk.isatty(process.stderr.fd)}function t0(r){let{namespace:e,useColors:t}=this;if(t){let n=this.color,i="[3"+(n<8?n:"8;5;"+n),s=`  ${i};1m${e} [0m`;r[0]=s+r[0].split(`
`).join(`
`+s),r.push(i+"m+"+Tc.exports.humanize(this.diff)+"[0m")}else r[0]=r0()+e+" "+r[0]}function r0(){return qt.inspectOpts.hideDate?"":new Date().toISOString()+" "}function n0(...r){return process.stderr.write(Sc.format(...r)+`
`)}function i0(r){r?process.env.DEBUG=r:delete process.env.DEBUG}function o0(){return process.env.DEBUG}function s0(r){r.inspectOpts={};let e=Object.keys(qt.inspectOpts);for(let t=0;t<e.length;t++)r.inspectOpts[e[t]]=qt.inspectOpts[e[t]]}Tc.exports=id()(qt);var{formatters:Ww}=Tc.exports;Ww.o=function(r){return this.inspectOpts.colors=this.useColors,Sc.inspect(r,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};Ww.O=function(r){return this.inspectOpts.colors=this.useColors,Sc.inspect(r,this.inspectOpts)}});var Pc=F((HF,ad)=>{typeof process=="undefined"||process.type==="renderer"||process.browser===!0||process.__nwjs?ad.exports=Iw():ad.exports=Hw()});var zw=F(cd=>{"use strict";Object.defineProperty(cd,"__esModule",{value:!0});function a0(r){return function(e,t){return new Promise((n,i)=>{r.call(this,e,t,(s,a)=>{s?i(s):n(a)})})}}cd.default=a0});var Kw=F((ld,Uw)=>{"use strict";var Bw=ld&&ld.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},c0=require("events"),u0=Bw(Pc()),l0=Bw(zw()),Es=u0.default("agent-base");function d0(r){return Boolean(r)&&typeof r.addRequest=="function"}function ud(){let{stack:r}=new Error;return typeof r!="string"?!1:r.split(`
`).some(e=>e.indexOf("(https.js:")!==-1||e.indexOf("node:https:")!==-1)}function Dc(r,e){return new Dc.Agent(r,e)}(function(r){class e extends c0.EventEmitter{constructor(n,i){super();let s=i;typeof n=="function"?this.callback=n:n&&(s=n),this.timeout=null,s&&typeof s.timeout=="number"&&(this.timeout=s.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return typeof this.explicitDefaultPort=="number"?this.explicitDefaultPort:ud()?443:80}set defaultPort(n){this.explicitDefaultPort=n}get protocol(){return typeof this.explicitProtocol=="string"?this.explicitProtocol:ud()?"https:":"http:"}set protocol(n){this.explicitProtocol=n}callback(n,i,s){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(n,i){let s=Object.assign({},i);typeof s.secureEndpoint!="boolean"&&(s.secureEndpoint=ud()),s.host==null&&(s.host="localhost"),s.port==null&&(s.port=s.secureEndpoint?443:80),s.protocol==null&&(s.protocol=s.secureEndpoint?"https:":"http:"),s.host&&s.path&&delete s.path,delete s.agent,delete s.hostname,delete s._defaultAgent,delete s.defaultPort,delete s.createConnection,n._last=!0,n.shouldKeepAlive=!1;let a=!1,l=null,u=s.timeout||this.timeout,g=w=>{n._hadError||(n.emit("error",w),n._hadError=!0)},v=()=>{l=null,a=!0;let w=new Error(`A "socket" was not created for HTTP request before ${u}ms`);w.code="ETIMEOUT",g(w)},b=w=>{a||(l!==null&&(clearTimeout(l),l=null),g(w))},C=w=>{if(a)return;if(l!=null&&(clearTimeout(l),l=null),d0(w)){Es("Callback returned another Agent instance %o",w.constructor.name),w.addRequest(n,s);return}if(w){w.once("free",()=>{this.freeSocket(w,s)}),n.onSocket(w);return}let E=new Error(`no Duplex stream was returned to agent-base for \`${n.method} ${n.path}\``);g(E)};if(typeof this.callback!="function"){g(new Error("`callback` is not defined"));return}this.promisifiedCallback||(this.callback.length>=3?(Es("Converting legacy callback function to promise"),this.promisifiedCallback=l0.default(this.callback)):this.promisifiedCallback=this.callback),typeof u=="number"&&u>0&&(l=setTimeout(v,u)),"port"in s&&typeof s.port!="number"&&(s.port=Number(s.port));try{Es("Resolving socket for %o request: %o",s.protocol,`${n.method} ${n.path}`),Promise.resolve(this.promisifiedCallback(n,s)).then(C,b)}catch(w){Promise.reject(w).catch(b)}}freeSocket(n,i){Es("Freeing socket %o %o",n.constructor.name,i),n.destroy()}destroy(){Es("Destroying agent %o",this.constructor.name)}}r.Agent=e,r.prototype=r.Agent.prototype})(Dc||(Dc={}));Uw.exports=Dc});var Gw=F(ks=>{"use strict";var f0=ks&&ks.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ks,"__esModule",{value:!0});var h0=f0(Pc()),xs=h0.default("https-proxy-agent:parse-proxy-response");function p0(r){return new Promise((e,t)=>{let n=0,i=[];function s(){let b=r.read();b?v(b):r.once("readable",s)}function a(){r.removeListener("end",u),r.removeListener("error",g),r.removeListener("close",l),r.removeListener("readable",s)}function l(b){xs("onclose had error %o",b)}function u(){xs("onend")}function g(b){a(),xs("onerror %o",b),t(b)}function v(b){i.push(b),n+=b.length;let C=Buffer.concat(i,n);if(C.indexOf(`\r
\r
`)===-1){xs("have not received end of HTTP headers yet..."),s();return}let E=C.toString("ascii",0,C.indexOf(`\r
`)),q=+E.split(" ")[1];xs("got proxy server response: %o",E),e({statusCode:q,buffered:C})}r.on("error",g),r.on("close",l),r.on("end",u),s()})}ks.default=p0});var Qw=F(_i=>{"use strict";var g0=_i&&_i.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function l(v){try{g(n.next(v))}catch(b){a(b)}}function u(v){try{g(n.throw(v))}catch(b){a(b)}}function g(v){v.done?s(v.value):i(v.value).then(l,u)}g((n=n.apply(r,e||[])).next())})},mo=_i&&_i.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_i,"__esModule",{value:!0});var Vw=mo(require("net")),Yw=mo(require("tls")),m0=mo(require("url")),v0=mo(require("assert")),y0=mo(Pc()),b0=Kw(),w0=mo(Gw()),qs=y0.default("https-proxy-agent:agent"),Xw=class extends b0.Agent{constructor(e){let t;if(typeof e=="string"?t=m0.default.parse(e):t=e,!t)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");qs("creating new HttpsProxyAgent instance: %o",t);super(t);let n=Object.assign({},t);this.secureProxy=t.secureProxy||_0(n.protocol),n.host=n.hostname||n.host,typeof n.port=="string"&&(n.port=parseInt(n.port,10)),!n.port&&n.host&&(n.port=this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in n)&&(n.ALPNProtocols=["http 1.1"]),n.host&&n.path&&(delete n.path,delete n.pathname),this.proxy=n}callback(e,t){return g0(this,void 0,void 0,function*(){let{proxy:n,secureProxy:i}=this,s;i?(qs("Creating `tls.Socket`: %o",n),s=Yw.default.connect(n)):(qs("Creating `net.Socket`: %o",n),s=Vw.default.connect(n));let a=Object.assign({},n.headers),u=`CONNECT ${`${t.host}:${t.port}`} HTTP/1.1\r
`;n.auth&&(a["Proxy-Authorization"]=`Basic ${Buffer.from(n.auth).toString("base64")}`);let{host:g,port:v,secureEndpoint:b}=t;R0(v,b)||(g+=`:${v}`),a.Host=g,a.Connection="close";for(let N of Object.keys(a))u+=`${N}: ${a[N]}\r
`;let C=w0.default(s);s.write(`${u}\r
`);let{statusCode:w,buffered:E}=yield C;if(w===200){if(e.once("socket",C0),t.secureEndpoint){let N=t.servername||t.host;if(!N)throw new Error('Could not determine "servername"');return qs("Upgrading socket connection to TLS"),Yw.default.connect(Object.assign(Object.assign({},S0(t,"host","hostname","path","port")),{socket:s,servername:N}))}return s}s.destroy();let q=new Vw.default.Socket;return q.readable=!0,e.once("socket",N=>{qs("replaying proxy buffer for failed request"),v0.default(N.listenerCount("data")>0),N.push(E),N.push(null)}),q})}};_i.default=Xw;function C0(r){r.resume()}function R0(r,e){return Boolean(!e&&r===80||e&&r===443)}function _0(r){return typeof r=="string"?/^https:?$/i.test(r):!1}function S0(r,...e){let t={},n;for(n in r)e.includes(n)||(t[n]=r[n]);return t}});var Zw=F((hd,Jw)=>{"use strict";var T0=hd&&hd.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},dd=T0(Qw());function fd(r){return new dd.default(r)}(function(r){r.HttpsProxyAgent=dd.default,r.prototype=dd.default.prototype})(fd||(fd={}));Jw.exports=fd});ff(exports,{activate:()=>lC,deactivate:()=>dC});var he=oe(require("vscode")),cC=oe(require("os"));var U=oe(require("vscode")),gs=oe(nc());var He=oe(nc()),_y=new He.RequestType("rust-analyzer/analyzerStatus"),Sy=new He.RequestType0("rust-analyzer/memoryUsage"),Ty=new He.RequestType0("rust-analyzer/shuffleCrateGraph"),Py=new He.NotificationType("experimental/serverStatus"),Dy=new He.RequestType0("rust-analyzer/reloadWorkspace"),Ey=new He.RequestType("textDocument/hover"),xy=new He.RequestType("rust-analyzer/syntaxTree"),ky=new He.RequestType("rust-analyzer/viewHir"),qy=new He.RequestType("rust-analyzer/viewItemTree"),Oy=new He.RequestType("rust-analyzer/viewCrateGraph"),Ay=new He.RequestType("rust-analyzer/expandMacro"),Fy=new He.RequestType("experimental/matchingBrace"),Iy=new He.RequestType("experimental/parentModule"),Ly=new He.RequestType("experimental/joinLines"),Ny=new He.RequestType("experimental/onEnter"),My=new He.RequestType("experimental/runnables"),jy=new He.RequestType("rust-analyzer/relatedTests"),Zi;(e=>{let r;(s=>{s.TypeHint="TypeHint",s.ParamHint="ParameterHint",s.ChainingHint="ChainingHint"})(r=e.Kind||(e.Kind={}))})(Zi||(Zi={}));var $y=new He.RequestType("rust-analyzer/inlayHints"),Al=new He.RequestType("experimental/ssr"),Wy=new He.RequestType("experimental/externalDocs"),Hy=new He.RequestType("experimental/openCargoToml"),zy=new He.RequestType("experimental/moveItem"),ic=(t=>(t.Up="Up",t.Down="Down",t))(ic||{});var fb=oe(require("path"));var Kr=oe(require("vscode"));var Il=oe(Fl()),oc=oe(require("vscode")),Uy=oe(require("assert")),sc=oe(require("child_process")),Ky=oe(require("util"));function cn(r,e){try{(0,Uy.strict)(r,e)}catch(t){throw ae.error("Assertion failed:",e),t}}var ae=new class{constructor(){this.enabled=!0;this.output=oc.window.createOutputChannel("Rust Analyzer Client")}setEnabled(r){ae.enabled=r}debug(...r){!ae.enabled||ae.write("DEBUG",...r)}info(...r){ae.write("INFO",...r)}warn(...r){debugger;ae.write("WARN",...r)}error(...r){debugger;ae.write("ERROR",...r),ae.output.show(!0)}write(r,...e){let t=e.map(ae.stringify).join(" "),n=new Date().toLocaleString();ae.output.appendLine(`${r} [${n}]: ${t}`)}stringify(r){return typeof r=="string"?r:(0,Ky.inspect)(r,{colors:!1,depth:6})}};async function Gy(r,e,t,n){for(let i of[40,160,640,2560,10240,null])try{return await(n?r.sendRequest(e,t,n):r.sendRequest(e,t))}catch(s){if(i===null)throw ae.warn("LSP request timed out",{method:e.method,param:t,error:s}),s;if(s.code===Il.LSPErrorCodes.RequestCancelled)throw s;if(s.code!==Il.LSPErrorCodes.ContentModified)throw ae.warn("LSP request failed",{method:e.method,param:t,error:s}),s;await gi(i)}throw"unreachable"}function gi(r){return new Promise(e=>setTimeout(e,r))}function un(r){return r.languageId==="rust"&&r.uri.scheme==="file"}function Vy(r){return r.uri.scheme==="file"&&r.fileName.endsWith("Cargo.toml")}function Pn(r){return un(r.document)}function Yy(r){ae.debug("Checking availability of a binary at",r);let e=(0,sc.spawnSync)(r,["--version"],{encoding:"utf8"});return(e.error&&e.error.code!=="ENOENT"?ae.warn:ae.debug)(r,"--version:",e),e.status===0}function Ll(r,e){return oc.commands.executeCommand("setContext",r,e)}function Xy(r){let e=new Map;return async function(t){let n=e.get(t);if(n)return n;let i=await r.call(this,t);return e.set(t,i),i}}function Nl(r,e){return new Promise((t,n)=>{(0,sc.exec)(r,e,(i,s,a)=>{if(i){n(i);return}if(a){n(new Error(a));return}t(s.trimEnd())})})}async function Ml(r){if(r.entries().length===1){let[e,t]=r.entries()[0],n=await Qy(e);n&&await ac(n,t);return}for(let[e,t]of r.entries()){let n=await Qy(e);n&&await n.edit(i=>{for(let s of t)cn(!Jy(s.newText),`bad ws edit: snippet received with multiple edits: ${JSON.stringify(r)}`),i.replace(s.range,s.newText)})}}async function Qy(r){var e;return((e=Kr.window.activeTextEditor)==null?void 0:e.document.uri)!==r&&await Kr.window.showTextDocument(r,{}),Kr.window.visibleTextEditors.find(t=>t.document.uri.toString()===r.toString())}async function ac(r,e){let t=[],n=0;await r.edit(i=>{for(let s of e){let a=Jy(s.newText);if(a){let[l,[u,g]]=a,v=l.substr(0,u),b=v.lastIndexOf(`
`),C=s.range.start.line+n+Zy(v),w=b===-1?s.range.start.character+u:v.length-b-1,E=w+g;t.push(new Kr.Selection(new Kr.Position(C,w),new Kr.Position(C,E))),i.replace(s.range,l)}else i.replace(s.range,s.newText);n+=Zy(s.newText)-(s.range.end.line-s.range.start.line)}}),t.length>0&&(r.selections=t),t.length===1&&r.revealRange(t[0],Kr.TextEditorRevealType.InCenterIfOutsideViewport)}function Jy(r){let e=r.match(/\$(0|\{0:([^}]*)\})/);if(!e)return;let t=e[2]??"";if(e.index==null)return;let n=[e.index,t.length];return[r.replace(e[0],t),n]}function Zy(r){return(r.match(/\n/g)||[]).length}var hb=oe(require("child_process"));var mi=oe(require("vscode"));var pt=oe(require("vscode"));var eb=oe(require("child_process")),cc=oe(require("os")),uc=oe(require("path")),tb=oe(require("readline")),Wn=oe(require("vscode"));var hs=class{constructor(e,t){this.rootFolder=e;this.output=t}static artifactSpec(e){let t=[...e,"--message-format=json"];switch(t[0]){case"run":t[0]="build";break;case"test":{t.includes("--no-run")||t.push("--no-run");break}}let n={cargoArgs:t};return t[0]==="test"&&(n.filter=i=>i.filter(s=>s.isTest)),n}async getArtifacts(e){var n;let t=[];try{await this.runCargo(e.cargoArgs,i=>{if(i.reason==="compiler-artifact"&&i.executable){let s=i.target.crate_types.includes("bin"),a=i.target.kind.includes("custom-build");(s&&!a||i.profile.test)&&t.push({fileName:i.executable,name:i.target.name,kind:i.target.kind[0],isTest:i.profile.test})}else i.reason==="compiler-message"&&this.output.append(i.message.rendered)},i=>this.output.append(i))}catch(i){throw this.output.show(!0),new Error(`Cargo invocation has failed: ${i}`)}return((n=e.filter)==null?void 0:n.call(e,t))??t}async executableFromArgs(e){let t=await this.getArtifacts(hs.artifactSpec(e));if(t.length===0)throw new Error("No compilation artifacts");if(t.length>1)throw new Error("Multiple compilation artifacts are not supported.");return t[0].fileName}async runCargo(e,t,n){let i=await jl();return await new Promise((s,a)=>{let l=eb.spawn(i,e,{stdio:["ignore","pipe","pipe"],cwd:this.rootFolder});l.on("error",g=>a(new Error(`could not launch cargo: ${g}`))),l.stderr.on("data",g=>n(g.toString())),tb.createInterface({input:l.stdout}).on("line",g=>{let v=JSON.parse(g);t(v)}),l.on("exit",(g,v)=>{g===0?s(g):a(new Error(`exit code: ${g}.`))})})}};async function rb(r){let e=await $l("rustc");return await Nl(`${e} --print sysroot`,{cwd:r})}async function nb(r){let e=await $l("rustc"),t=await Nl(`${e} -V -v`,{cwd:r});return/commit-hash:\s(.*)$/m.exec(t)[1]}function jl(){return $l("cargo")}var $l=Xy(async r=>{{let e=process.env[r.toUpperCase()];if(e)return e}if(await ek(r))return r;try{let e=Wn.Uri.joinPath(Wn.Uri.file(cc.homedir()),".cargo","bin",r);if(await ib(e))return e.fsPath}catch(e){ae.error("Failed to read the fs info",e)}return r});async function ek(r){let t=(process.env.PATH??"").split(uc.delimiter).flatMap(n=>{let i=uc.join(n,r);return cc.type()==="Windows_NT"?[i,`${i}.exe`]:[i]});for await(let n of t.map(tk))if(n)return!0;return!1}async function tk(r){return ib(Wn.Uri.file(r))}async function ib(r){try{return((await Wn.workspace.fs.stat(r)).type&Wn.FileType.File)!=0}catch{return!1}}var eo="cargo",nk="rust",ob=class{constructor(e){this.config=e}async provideTasks(){let e=[{command:"build",group:pt.TaskGroup.Build},{command:"check",group:pt.TaskGroup.Build},{command:"test",group:pt.TaskGroup.Test},{command:"clean",group:pt.TaskGroup.Clean},{command:"run",group:void 0}],t=[];for(let n of pt.workspace.workspaceFolders||[])for(let i of e){let s=await lc(n,{type:eo,command:i.command},`cargo ${i.command}`,[i.command],this.config.cargoRunner);s.group=i.group,t.push(s)}return t}async resolveTask(e){let t=e.definition;if(t.type===eo&&t.command){let n=[t.command].concat(t.args??[]);return await lc(e.scope,t,e.name,n,this.config.cargoRunner)}}};async function lc(r,e,t,n,i,s=!1){let a;if(i){let l=`${i}.buildShellExecution`;try{let u={kind:eo,args:n,cwd:e.cwd,env:e.env},g=await pt.commands.executeCommand(l,u);if(g)if(g instanceof pt.ShellExecution)a=g;else throw ae.debug("Invalid cargo ShellExecution",g),"Invalid cargo ShellExecution."}catch(u){if(s)throw`Cargo runner '${i}' failed! ${u}`}}if(!a){let l=e.overrideCargo??e.overrideCargo,u=await jl(),v=[...(l==null?void 0:l.split(" "))??[u],...n];a=new pt.ProcessExecution(v[0],v.slice(1),e)}return new pt.Task(e,r??pt.TaskScope.Workspace,t,nk,a,["$rustc"])}function sb(r){let e=new ob(r);return pt.tasks.registerTaskProvider(eo,e)}var ab=oe(require("os")),dr=oe(require("vscode")),to=oe(require("path"));var ro=dr.window.createOutputChannel("Debug");async function dc(r,e){var l;let t=(l=r.activeRustEditor)==null?void 0:l.document.uri;if(!t)return;let n=await cb(r,e);if(!n)return;let i=dr.workspace.getConfiguration("launch",t),s=i.get("configurations")||[],a=s.findIndex(u=>u.name===n.name);if(a!==-1){if(await dr.window.showErrorMessage(`Launch configuration '${n.name}' already exists!`,"Cancel","Update")==="Cancel")return;s[a]=n}else s.push(n);await i.update("configurations",s)}async function Wl(r,e){let t,n="",s=dr.workspace.getConfiguration("launch").get("configurations")||[],a=s.findIndex(l=>l.name===e.label);return a!==-1?(t=s[a],n=" (from launch.json)",ro.clear()):t=await cb(r,e),t?(ro.appendLine(`Launching debug configuration${n}:`),ro.appendLine(JSON.stringify(t,null,2)),dr.debug.startDebugging(void 0,t)):!1}async function cb(r,e){if(!r.activeRustEditor)return;let n={"vadimcn.vscode-lldb":sk,"ms-vscode.cpptools":ak},i=r.config.debug,s=null;if(i.engine==="auto"){for(var a in n)if(s=dr.extensions.getExtension(a),s)break}else s=dr.extensions.getExtension(i.engine);if(!s){await dr.window.showErrorMessage("Install [CodeLLDB](https://marketplace.visualstudio.com/items?itemName=vadimcn.vscode-lldb) or [MS C++ tools](https://marketplace.visualstudio.com/items?itemName=ms-vscode.cpptools) extension for debugging.");return}ro.clear(),r.config.debug.openDebugPane&&ro.show(!0);let l=dr.workspace.workspaceFolders,u=l.length>1,g=l[0],v=!u||!e.args.workspaceRoot?g:l.find(O=>{var z;return(z=e.args.workspaceRoot)==null?void 0:z.includes(O.uri.fsPath)})||g,b=to.normalize(v.uri.fsPath),C=u?`:${v.name}`:"";function w(O){return to.normalize(O).replace(b,"${workspaceFolder"+C+"}")}let E=await ok(e),q=Hl(e,r.config.runnableEnv),N=i.sourceFileMap;if(N==="auto"){let O=await nb(b),z=await rb(b),M=to.normalize(z+"/lib/rustlib/src/rust");N={},N[`/rustc/${O}/`]=M}let A=n[s.id](e,w(E),q,N);if(A.type in i.engineSettings){let O=i.engineSettings[A.type];for(var H in O)A[H]=O[H]}return A.name==="run binary"&&(A.name=`run ${to.basename(E)}`),A.cwd&&(A.cwd=w(A.cwd)),A}async function ok(r){return await new hs(r.args.workspaceRoot||".",ro).executableFromArgs(r.args.cargoArgs)}function sk(r,e,t,n){return{type:"lldb",request:"launch",name:r.label,program:e,args:r.args.executableArgs,cwd:r.args.workspaceRoot,sourceMap:n,sourceLanguages:["rust"],env:t}}function ak(r,e,t,n){return{type:ab.platform()==="win32"?"cppvsdbg":"cppdbg",request:"launch",name:r.label,program:e,args:r.args.executableArgs,cwd:r.args.workspaceRoot,sourceFileMap:n,env:t}}var ub=[{iconPath:new mi.ThemeIcon("save"),tooltip:"Save as a launch.json configurtation."}];async function ps(r,e,t=!1,n=!0){let i=r.activeRustEditor,s=r.client;if(!i||!s)return;let a={uri:i.document.uri.toString()},l=await s.sendRequest(My,{textDocument:a,position:s.code2ProtocolConverter.asPosition(i.selection.active)}),u=[];e&&u.push(e);for(let g of l)e&&JSON.stringify(e.runnable)===JSON.stringify(g)||t&&(g.label.startsWith("doctest")||g.label.startsWith("cargo"))||u.push(new lb(g));if(u.length===0){await mi.window.showErrorMessage("There's no debug target!");return}return await new Promise(g=>{let v=[],b=w=>{g(w),v.forEach(E=>E.dispose())},C=mi.window.createQuickPick();C.items=u,C.title="Select Runnable",n&&(C.buttons=ub),v.push(C.onDidHide(()=>b()),C.onDidAccept(()=>b(C.selectedItems[0])),C.onDidTriggerButton(async w=>{await dc(r,C.activeItems[0].runnable),b()}),C.onDidChangeActive(w=>{n&&w.length>0&&(w[0].label.startsWith("cargo")?C.buttons=[]:C.buttons.length===0&&(C.buttons=ub))}),C),C.show()})}var lb=class{constructor(e){this.runnable=e;this.label=e.label}};function Hl(r,e){let t={RUST_BACKTRACE:"short"};if(r.args.expectTest&&(t.UPDATE_EXPECT="1"),Object.assign(t,process.env),e)if(Array.isArray(e))for(let n of e)(!n.mask||new RegExp(n.mask).test(r.label))&&Object.assign(t,n.env);else Object.assign(t,e);return t}async function zl(r,e){if(r.kind!=="cargo")throw`Unexpected runnable kind: ${r.kind}`;let t=Bl(r),n={type:eo,command:t[0],args:t.slice(1),cwd:r.args.workspaceRoot||".",env:Hl(r,e.runnableEnv),overrideCargo:r.args.overrideCargo},i=mi.workspace.workspaceFolders[0],s=await lc(i,n,r.label,t,e.cargoRunner,!0);return s.presentationOptions.clear=!0,s.presentationOptions.focus=!1,s}function Bl(r){let e=[...r.args.cargoArgs];return r.args.cargoExtraArgs&&e.push(...r.args.cargoExtraArgs),r.args.executableArgs.length>0&&e.push("--",...r.args.executableArgs),e}var rt=oe(require("vscode"));var Ul=class{constructor(e){this.astDecorationType=rt.window.createTextEditorDecorationType({borderColor:new rt.ThemeColor("rust_analyzer.syntaxTreeBorder"),borderStyle:"solid",borderWidth:"2px"});this.rust2Ast=new db(()=>{let e=this.findAstTextEditor();if(!this.rustEditor||!e)return;let t=[];for(let n=0;n<e.document.lineCount;++n){let i=e.document.lineAt(n);if(!(i.text.lastIndexOf('"')>=0))continue;let a=this.parseRustTextRange(this.rustEditor.document,i.text);!a||t.push([a,this.findAstNodeRange(i)])}return t});e.pushCleanup(rt.languages.registerHoverProvider({scheme:"rust-analyzer"},this)),e.pushCleanup(rt.languages.registerDefinitionProvider({language:"rust"},this)),rt.workspace.onDidCloseTextDocument(this.onDidCloseTextDocument,this,e.subscriptions),rt.workspace.onDidChangeTextDocument(this.onDidChangeTextDocument,this,e.subscriptions),rt.window.onDidChangeVisibleTextEditors(this.onDidChangeVisibleTextEditors,this,e.subscriptions),e.pushCleanup(this)}dispose(){this.setRustEditor(void 0)}onDidChangeTextDocument(e){this.rustEditor&&e.document.uri.toString()===this.rustEditor.document.uri.toString()&&this.rust2Ast.reset()}onDidCloseTextDocument(e){this.rustEditor&&e.uri.toString()===this.rustEditor.document.uri.toString()&&this.setRustEditor(void 0)}onDidChangeVisibleTextEditors(e){if(!this.findAstTextEditor()){this.setRustEditor(void 0);return}this.setRustEditor(e.find(Pn))}findAstTextEditor(){return rt.window.visibleTextEditors.find(e=>e.document.uri.scheme==="rust-analyzer")}setRustEditor(e){this.rustEditor&&this.rustEditor!==e&&(this.rustEditor.setDecorations(this.astDecorationType,[]),this.rust2Ast.reset()),this.rustEditor=e}provideDefinition(e,t){var l;if(!this.rustEditor||e.uri.toString()!==this.rustEditor.document.uri.toString())return;let n=this.findAstTextEditor();if(!n)return;let i=(l=this.rust2Ast.get())==null?void 0:l.find(([u,g])=>u.contains(t));if(!i)return;let[s,a]=i;return n.revealRange(a),n.selection=new rt.Selection(a.start,a.end),[{targetRange:a,targetUri:n.document.uri,originSelectionRange:s,targetSelectionRange:a}]}provideHover(e,t){if(!this.rustEditor)return;let n=e.lineAt(t.line),i=this.parseRustTextRange(this.rustEditor.document,n.text);if(!i)return;this.rustEditor.setDecorations(this.astDecorationType,[i]),this.rustEditor.revealRange(i);let s=this.rustEditor.document.getText(i),a=this.findAstNodeRange(n);return new rt.Hover(["```rust\n"+s+"\n```"],a)}findAstNodeRange(e){let t=e.range.start,n=t.translate(void 0,e.firstNonWhitespaceCharacterIndex),i=t.translate(void 0,e.text.trimEnd().length);return new rt.Range(n,i)}parseRustTextRange(e,t){let n=/(\d+)\.\.(\d+)/.exec(t);if(!n)return;let[i,s]=n.slice(1).map(a=>this.positionAt(e,+a));return new rt.Range(i,s)}positionAt(e,t){if(e.eol===rt.EndOfLine.LF)return e.positionAt(t);let n=0,i=0,s=this.cache;for((s==null?void 0:s.doc)===e&&s.offset<=t&&({line:n,offset:i}=s);;){let a=e.lineAt(n).text.length+1;if(i+a>t)return this.cache={doc:e,offset:i,line:n},e.positionAt(t+n);i+=a,n+=1}}},db=class{constructor(e){this.compute=e}get(){return this.val??(this.val=this.compute())}reset(){this.val=void 0}};function pb(r){let e=new class{constructor(){this.uri=U.Uri.parse("rust-analyzer-status://status");this.eventEmitter=new U.EventEmitter}provideTextDocumentContent(t){var s;if(!U.window.activeTextEditor)return"";let n={},i=(s=r.activeRustEditor)==null?void 0:s.document;return i!=null&&(n.textDocument=r.client.code2ProtocolConverter.asTextDocumentIdentifier(i)),r.client.sendRequest(_y,n)}get onDidChange(){return this.eventEmitter.event}};return r.pushCleanup(U.workspace.registerTextDocumentContentProvider("rust-analyzer-status",e)),async()=>{let t=await U.workspace.openTextDocument(e.uri);e.eventEmitter.fire(e.uri),await U.window.showTextDocument(t,{viewColumn:U.ViewColumn.Two,preserveFocus:!0})}}function gb(r){let e=new class{constructor(){this.uri=U.Uri.parse("rust-analyzer-memory://memory");this.eventEmitter=new U.EventEmitter}provideTextDocumentContent(t){return U.window.activeTextEditor?r.client.sendRequest(Sy).then(n=>`Per-query memory usage:
`+n+`
(note: database has been cleared)`):""}get onDidChange(){return this.eventEmitter.event}};return r.pushCleanup(U.workspace.registerTextDocumentContentProvider("rust-analyzer-memory",e)),async()=>{e.eventEmitter.fire(e.uri);let t=await U.workspace.openTextDocument(e.uri);return U.window.showTextDocument(t,U.ViewColumn.Two,!0)}}function mb(r){return async()=>{let e=r.client;!e||await e.sendRequest(Ty)}}function vb(r){return async()=>{let e=r.activeRustEditor,t=r.client;if(!e||!t)return;let n=await t.sendRequest(Fy,{textDocument:r.client.code2ProtocolConverter.asTextDocumentIdentifier(e.document),positions:e.selections.map(i=>t.code2ProtocolConverter.asPosition(i.active))});e.selections=e.selections.map((i,s)=>{let a=t.protocol2CodeConverter.asPosition(n[s]),l=i.isEmpty?a:i.anchor;return new U.Selection(l,a)}),e.revealRange(e.selection)}}function yb(r){return async()=>{let e=r.activeRustEditor,t=r.client;if(!e||!t)return;let n=await t.sendRequest(Ly,{ranges:e.selections.map(i=>t.code2ProtocolConverter.asRange(i)),textDocument:r.client.code2ProtocolConverter.asTextDocumentIdentifier(e.document)});await e.edit(i=>{t.protocol2CodeConverter.asTextEdits(n).forEach(s=>{i.replace(s.range,s.newText)})})}}function bb(r){return Cb(r,ic.Up)}function wb(r){return Cb(r,ic.Down)}function Cb(r,e){return async()=>{let t=r.activeRustEditor,n=r.client;if(!t||!n)return;let i=await n.sendRequest(zy,{range:n.code2ProtocolConverter.asRange(t.selection),textDocument:r.client.code2ProtocolConverter.asTextDocumentIdentifier(t.document),direction:e});if(!i)return;let s=n.protocol2CodeConverter.asTextEdits(i);await ac(t,s)}}function Rb(r){async function e(){let t=r.activeRustEditor,n=r.client;if(!t||!n)return!1;let i=await n.sendRequest(Ny,{textDocument:r.client.code2ProtocolConverter.asTextDocumentIdentifier(t.document),position:n.code2ProtocolConverter.asPosition(t.selection.active)}).catch(a=>null);if(!i)return!1;let s=n.protocol2CodeConverter.asTextEdits(i);return await ac(t,s),!0}return async()=>{await e()||await U.commands.executeCommand("default:type",{text:`
`})}}function _b(r){return async()=>{let e=U.window.activeTextEditor,t=r.client;if(!e||!t||!(un(e.document)||Vy(e.document)))return;let n=await t.sendRequest(Iy,{textDocument:r.client.code2ProtocolConverter.asTextDocumentIdentifier(e.document),position:t.code2ProtocolConverter.asPosition(e.selection.active)});if(!!n)if(n.length===1){let i=n[0],s=t.protocol2CodeConverter.asUri(i.targetUri),a=t.protocol2CodeConverter.asRange(i.targetRange),l=await U.workspace.openTextDocument(s),u=await U.window.showTextDocument(l);u.selection=new U.Selection(a.start,a.start),u.revealRange(a,U.TextEditorRevealType.InCenter)}else{let i=e.document.uri.toString(),s=t.code2ProtocolConverter.asPosition(e.selection.active);await Kl(t,i,s,n.map(a=>gs.Location.create(a.targetUri,a.targetRange)))}}}function Sb(r){return async()=>{let e=r.activeRustEditor,t=r.client;if(!e||!t)return;let n=await t.sendRequest(Hy,{textDocument:r.client.code2ProtocolConverter.asTextDocumentIdentifier(e.document)});if(!n)return;let i=t.protocol2CodeConverter.asUri(n.uri),s=t.protocol2CodeConverter.asRange(n.range),a=await U.workspace.openTextDocument(i),l=await U.window.showTextDocument(a);l.selection=new U.Selection(s.start,s.start),l.revealRange(s,U.TextEditorRevealType.InCenter)}}function Tb(r){return async()=>{let e=U.window.activeTextEditor,t=r.client;if(!e||!t)return;let n=e.selection.active,i=e.selections,s=r.client.code2ProtocolConverter.asTextDocumentIdentifier(e.document),a={value:"() ==>> ()",prompt:"Enter request, for example 'Foo($a) ==>> Foo::new($a)' ",validateInput:async u=>{try{await t.sendRequest(Al,{query:u,parseOnly:!0,textDocument:s,position:n,selections:i})}catch(g){return g.toString()}return null}},l=await U.window.showInputBox(a);!l||await U.window.withProgress({location:U.ProgressLocation.Notification,title:"Structured search replace in progress...",cancellable:!1},async(u,g)=>{let v=await t.sendRequest(Al,{query:l,parseOnly:!1,textDocument:s,position:n,selections:i});await U.workspace.applyEdit(t.protocol2CodeConverter.asWorkspaceEdit(v))})}}function Pb(r){return async()=>{let{stdout:e}=(0,hb.spawnSync)(r.serverPath,["--version"],{encoding:"utf8"}),t=e.slice("rust-analyzer ".length).trim();U.window.showInformationMessage(`rust-analyzer version: ${t}`)}}function Db(r){return async()=>{await U.workspace.getConfiguration(`${r.config.rootSection}.inlayHints`).update("enable",!r.config.inlayHints.enable,U.ConfigurationTarget.Global)}}function Eb(r){let e=new class{constructor(){this.uri=U.Uri.parse("rust-analyzer://syntaxtree/tree.rast");this.eventEmitter=new U.EventEmitter;U.workspace.onDidChangeTextDocument(this.onDidChangeTextDocument,this,r.subscriptions),U.window.onDidChangeActiveTextEditor(this.onDidChangeActiveTextEditor,this,r.subscriptions)}onDidChangeTextDocument(t){un(t.document)&&gi(10).then(()=>this.eventEmitter.fire(this.uri))}onDidChangeActiveTextEditor(t){t&&Pn(t)&&this.eventEmitter.fire(this.uri)}provideTextDocumentContent(t,n){let i=r.activeRustEditor;if(!i)return"";let s=t.query==="range=true"&&!i.selection.isEmpty?r.client.code2ProtocolConverter.asRange(i.selection):null,a={textDocument:{uri:i.document.uri.toString()},range:s};return r.client.sendRequest(xy,a,n)}get onDidChange(){return this.eventEmitter.event}};return new Ul(r),r.pushCleanup(U.workspace.registerTextDocumentContentProvider("rust-analyzer",e)),r.pushCleanup(U.languages.setLanguageConfiguration("ra_syntax_tree",{brackets:[["[",")"]]})),async()=>{let t=U.window.activeTextEditor,i=!!t&&!t.selection.isEmpty?U.Uri.parse(`${e.uri.toString()}?range=true`):e.uri,s=await U.workspace.openTextDocument(i);e.eventEmitter.fire(i),await U.window.showTextDocument(s,{viewColumn:U.ViewColumn.Two,preserveFocus:!0})}}function xb(r){let e=new class{constructor(){this.uri=U.Uri.parse("rust-analyzer://viewHir/hir.txt");this.eventEmitter=new U.EventEmitter;U.workspace.onDidChangeTextDocument(this.onDidChangeTextDocument,this,r.subscriptions),U.window.onDidChangeActiveTextEditor(this.onDidChangeActiveTextEditor,this,r.subscriptions)}onDidChangeTextDocument(t){un(t.document)&&gi(10).then(()=>this.eventEmitter.fire(this.uri))}onDidChangeActiveTextEditor(t){t&&Pn(t)&&this.eventEmitter.fire(this.uri)}provideTextDocumentContent(t,n){let i=r.activeRustEditor,s=r.client;if(!i||!s)return"";let a={textDocument:s.code2ProtocolConverter.asTextDocumentIdentifier(i.document),position:s.code2ProtocolConverter.asPosition(i.selection.active)};return s.sendRequest(ky,a,n)}get onDidChange(){return this.eventEmitter.event}};return r.pushCleanup(U.workspace.registerTextDocumentContentProvider("rust-analyzer",e)),async()=>{let t=await U.workspace.openTextDocument(e.uri);e.eventEmitter.fire(e.uri),await U.window.showTextDocument(t,{viewColumn:U.ViewColumn.Two,preserveFocus:!0})}}function kb(r){let e=new class{constructor(){this.uri=U.Uri.parse("rust-analyzer://viewItemTree/itemtree.rs");this.eventEmitter=new U.EventEmitter;U.workspace.onDidChangeTextDocument(this.onDidChangeTextDocument,this,r.subscriptions),U.window.onDidChangeActiveTextEditor(this.onDidChangeActiveTextEditor,this,r.subscriptions)}onDidChangeTextDocument(t){un(t.document)&&gi(10).then(()=>this.eventEmitter.fire(this.uri))}onDidChangeActiveTextEditor(t){t&&Pn(t)&&this.eventEmitter.fire(this.uri)}provideTextDocumentContent(t,n){let i=r.activeRustEditor,s=r.client;if(!i||!s)return"";let a={textDocument:s.code2ProtocolConverter.asTextDocumentIdentifier(i.document)};return s.sendRequest(qy,a,n)}get onDidChange(){return this.eventEmitter.event}};return r.pushCleanup(U.workspace.registerTextDocumentContentProvider("rust-analyzer",e)),async()=>{let t=await U.workspace.openTextDocument(e.uri);e.eventEmitter.fire(e.uri),await U.window.showTextDocument(t,{viewColumn:U.ViewColumn.Two,preserveFocus:!0})}}function qb(r,e){return async()=>{let t=U.Uri.file(fb.join(r.extensionPath,"node_modules")),n=U.window.createWebviewPanel("rust-analyzer.crate-graph","rust-analyzer crate graph",U.ViewColumn.Two,{enableScripts:!0,retainContextWhenHidden:!0,localResourceRoots:[t]}),i={full:e},s=await r.client.sendRequest(Oy,i),a=n.webview.asWebviewUri(t),l=`
            <!DOCTYPE html>
            <meta charset="utf-8">
            <head>
                <style>
                    /* Fill the entire view */
                    html, body { margin:0; padding:0; overflow:hidden }
                    svg { position:fixed; top:0; left:0; height:100%; width:100% }

                    /* Disable the graphviz backgroud and fill the polygons */
                    .graph > polygon { display:none; }
                    :is(.node,.edge) polygon { fill: white; }

                    /* Invert the line colours for dark themes */
                    body:not(.vscode-light) .edge path { stroke: white; }
                </style>
            </head>
            <body>
                <script type="text/javascript" src="${a}/d3/dist/d3.min.js"><\/script>
                <script type="javascript/worker" src="${a}/@hpcc-js/wasm/dist/index.min.js"><\/script>
                <script type="text/javascript" src="${a}/d3-graphviz/build/d3-graphviz.min.js"><\/script>
                <div id="graph"></div>
                <script>
                    let graph = d3.select("#graph")
                                  .graphviz()
                                  .fit(true)
                                  .zoomScaleExtent([0.1, Infinity])
                                  .renderDot(\`${s}\`);

                    d3.select(window).on("click", (event) => {
                        if (event.ctrlKey) {
                            graph.resetZoom(d3.transition().duration(100));
                        }
                    });
                <\/script>
            </body>
            `;n.webview.html=l}}function Ob(r){return qb(r,!1)}function Ab(r){return qb(r,!0)}function Fb(r){function e(n){let i=`// Recursive expansion of ${n.name}! macro
`;return i+="// "+"=".repeat(i.length-3),i+=`

`,i+=n.expansion,i}let t=new class{constructor(){this.uri=U.Uri.parse("rust-analyzer://expandMacro/[EXPANSION].rs");this.eventEmitter=new U.EventEmitter}async provideTextDocumentContent(n){let i=U.window.activeTextEditor,s=r.client;if(!i||!s)return"";let a=i.selection.active,l=await s.sendRequest(Ay,{textDocument:r.client.code2ProtocolConverter.asTextDocumentIdentifier(i.document),position:a});return l==null?"Not available":e(l)}get onDidChange(){return this.eventEmitter.event}};return r.pushCleanup(U.workspace.registerTextDocumentContentProvider("rust-analyzer",t)),async()=>{let n=await U.workspace.openTextDocument(t.uri);return t.eventEmitter.fire(t.uri),U.window.showTextDocument(n,U.ViewColumn.Two,!0)}}function Ib(r){return async()=>r.client.sendRequest(Dy)}async function Kl(r,e,t,n){r&&await U.commands.executeCommand("editor.action.showReferences",U.Uri.parse(e),r.protocol2CodeConverter.asPosition(t),n.map(r.protocol2CodeConverter.asLocation))}function Lb(r){return async(e,t,n)=>{await Kl(r.client,e,t,n)}}function Nb(r){return async e=>{let t=await U.window.showQuickPick(e);!t||await U.commands.executeCommand("rust-analyzer.resolveCodeAction",t.arguments)}}function Mb(r){return async e=>{let t=r.client;if(t){let n=t.protocol2CodeConverter.asUri(e.targetUri),i=t.protocol2CodeConverter.asRange(e.targetSelectionRange);i=i.with({end:i.start}),await U.window.showTextDocument(n,{selection:i})}}}function jb(r){return async()=>{let e=r.client,t=U.window.activeTextEditor;if(!t||!e)return;let n=t.selection.active,i={uri:t.document.uri.toString()},s=await e.sendRequest(Wy,{position:n,textDocument:i});s!=null&&await U.commands.executeCommand("vscode.open",U.Uri.parse(s))}}function $b(r){let e=r.client;return async t=>{var u;t.command=void 0;let n=await e.sendRequest(gs.CodeActionResolveRequest.type,t);if(!n.edit)return;let i=n.edit,s=e.protocol2CodeConverter.asWorkspaceEdit(i),a=uf(Xn({},i),{documentChanges:(u=i.documentChanges)==null?void 0:u.filter(g=>"kind"in g)}),l=e.protocol2CodeConverter.asWorkspaceEdit(a);await U.workspace.applyEdit(l),await Ml(s)}}function Wb(r){return async e=>{await Ml(e)}}function Hb(r){let e;return async()=>{let t=await ps(r,e);if(!t)return;t.detail="rerun",e=t;let n=await zl(t.runnable,r.config);return await U.tasks.executeTask(n)}}function zb(r){let e=r.client;return async()=>{let t=r.activeRustEditor;!t||!e||await U.window.withProgress({location:U.ProgressLocation.Notification,title:"Looking for tests...",cancellable:!1},async(n,i)=>{let s=t.document.uri.toString(),a=e.code2ProtocolConverter.asPosition(t.selection.active),u=(await e.sendRequest(jy,{textDocument:{uri:s},position:a})).map(g=>gs.Location.create(g.runnable.location.targetUri,g.runnable.location.targetSelectionRange));await Kl(e,s,a,u)})}}function Bb(r){return async e=>{if(!r.activeRustEditor)return;let n=await zl(e,r.config);return n.group=U.TaskGroup.Build,n.presentationOptions={reveal:U.TaskRevealKind.Always,panel:U.TaskPanelKind.Dedicated,clear:!0},U.tasks.executeTask(n)}}function Ub(r){let e;return async()=>{let t=await ps(r,e);if(!t)return;let n=Bl(t.runnable),i=["cargo",...n].join(" ");await U.env.clipboard.writeText(i),await U.window.showInformationMessage("Cargo invocation copied to the clipboard.")}}function Kb(r){let e;return async()=>{let t=await ps(r,e,!0);if(!!t)return t.detail="restart",e=t,await Wl(r,t.runnable)}}function Gb(r){return async e=>{await Wl(r,e)}}function Vb(r){return async()=>{let e=await ps(r,void 0,!0,!1);!e||await dc(r,e.runnable)}}var Gr=oe(require("vscode"));function Yb(r){let e={updater:null,async onConfigChange(){let t=r.config.inlayHints.typeHints||r.config.inlayHints.parameterHints||r.config.inlayHints.chainingHints;if(!(r.config.inlayHints.enable&&t))return this.dispose();await gi(100),this.updater?(this.updater.updateInlayHintsStyles(),this.updater.syncCacheAndRenderHints()):this.updater=new Xb(r)},dispose(){var t;(t=this.updater)==null||t.dispose(),this.updater=null}};r.pushCleanup(e),Gr.workspace.onDidChangeConfiguration(e.onConfigChange,e,r.subscriptions),e.onConfigChange().catch(console.error)}function no(r,e){let[t,n]={type:["after",a=>`\u200C: ${a}`],parameter:["before",a=>`${a}: `],chaining:["after",a=>`\u200C: ${a}`]}[r],i=new Gr.ThemeColor(`rust_analyzer.inlayHints.foreground.${r}Hints`),s=new Gr.ThemeColor(`rust_analyzer.inlayHints.background.${r}Hints`);return{decorationType:Gr.window.createTextEditorDecorationType({[t]:{color:i,backgroundColor:s,fontStyle:"normal",fontWeight:"normal",textDecoration:e?";font-size:smaller":"none"}}),toDecoration(a,l){return{range:l.asRange(a.range),renderOptions:{[t]:{contentText:n(a.label)}}}}}}var uk={typeHints:no("type",!0),paramHints:no("parameter",!0),chainingHints:no("chaining",!0)},lk={typeHints:no("type",!1),paramHints:no("parameter",!1),chainingHints:no("chaining",!1)},Xb=class{constructor(e){this.ctx=e;this.sourceFiles=new Map;this.disposables=[];this.pendingDisposeDecorations=void 0;Gr.window.onDidChangeVisibleTextEditors(this.onDidChangeVisibleTextEditors,this,this.disposables),Gr.workspace.onDidChangeTextDocument(this.onDidChangeTextDocument,this,this.disposables),e.visibleRustEditors.forEach(t=>this.sourceFiles.set(t.document.uri.toString(),{document:t.document,inlaysRequest:null,cachedDecorations:null})),this.updateInlayHintsStyles(),this.syncCacheAndRenderHints()}dispose(){this.sourceFiles.forEach(e=>{var t;return(t=e.inlaysRequest)==null?void 0:t.cancel()}),this.ctx.visibleRustEditors.forEach(e=>this.renderDecorations(e,{param:[],type:[],chaining:[]})),this.disposables.forEach(e=>e.dispose())}onDidChangeTextDocument({contentChanges:e,document:t}){e.length===0||!un(t)||this.syncCacheAndRenderHints()}updateInlayHintsStyles(){let e=this.ctx.config.inlayHints.smallerHints?uk:lk;e!==this.inlayHintsStyles&&(this.pendingDisposeDecorations=this.inlayHintsStyles,this.inlayHintsStyles=e)}syncCacheAndRenderHints(){this.sourceFiles.forEach((e,t)=>this.fetchHints(e).then(n=>{if(!!n){e.cachedDecorations=this.hintsToDecorations(n);for(let i of this.ctx.visibleRustEditors)i.document.uri.toString()===t&&this.renderDecorations(i,e.cachedDecorations)}}))}onDidChangeVisibleTextEditors(){let e=new Map;this.ctx.visibleRustEditors.forEach(async t=>{let n=t.document.uri.toString(),i=this.sourceFiles.get(n)??{document:t.document,inlaysRequest:null,cachedDecorations:null};if(e.set(n,i),!i.cachedDecorations){let s=await this.fetchHints(i);if(!s)return;i.cachedDecorations=this.hintsToDecorations(s)}this.renderDecorations(t,i.cachedDecorations)}),this.sourceFiles.forEach((t,n)=>{var i;e.has(n)||(i=t.inlaysRequest)==null||i.cancel()}),this.sourceFiles=e}renderDecorations(e,t){let{typeHints:n,paramHints:i,chainingHints:s}=this.inlayHintsStyles;if(this.pendingDisposeDecorations!==void 0){let{typeHints:a,paramHints:l,chainingHints:u}=this.pendingDisposeDecorations;e.setDecorations(a.decorationType,[]),e.setDecorations(l.decorationType,[]),e.setDecorations(u.decorationType,[])}e.setDecorations(n.decorationType,t.type),e.setDecorations(i.decorationType,t.param),e.setDecorations(s.decorationType,t.chaining)}hintsToDecorations(e){let{typeHints:t,paramHints:n,chainingHints:i}=this.inlayHintsStyles,s={type:[],param:[],chaining:[]},a=this.ctx.client.protocol2CodeConverter;for(let l of e)switch(l.kind){case Zi.Kind.TypeHint:{s.type.push(t.toDecoration(l,a));continue}case Zi.Kind.ParamHint:{s.param.push(n.toDecoration(l,a));continue}case Zi.Kind.ChainingHint:{s.chaining.push(i.toDecoration(l,a));continue}}return s}async fetchHints(e){var i;(i=e.inlaysRequest)==null||i.cancel();let t=new Gr.CancellationTokenSource;e.inlaysRequest=t;let n={textDocument:{uri:e.document.uri.toString()}};return Gy(this.ctx.client,$y,n,t.token).catch(s=>null).finally(()=>{e.inlaysRequest===t&&(e.inlaysRequest=null)})}};var Vr=oe(require("vscode"));var ln=oe(Fl()),dn=oe(require("vscode"));var ms=oe(yn());var Gl=oe(require("vscode"));function dk(r){return`[${r.title}](command:${r.command}?${encodeURIComponent(JSON.stringify(r.arguments))} '${r.tooltip}')`}function fk(r){let e=r.map(n=>(n.title?n.title+" ":"")+n.commands.map(dk).join(" | ")).join("___"),t=new dn.MarkdownString(e);return t.isTrusted=!0,t}function Qb(r,e,t){let n=Object.assign({},process.env);Object.assign(n,t);let i={command:r,options:{env:n}},s={run:i,debug:i},a=dn.window.createOutputChannel("Rust Analyzer Language Server Trace"),l=dn.workspace.getConfiguration("rust-analyzer");e.kind==="Detached Files"&&(l=Xn({detachedFiles:e.files.map(v=>v.uri.fsPath)},l));let u={documentSelector:[{scheme:"file",language:"rust"}],initializationOptions:l,diagnosticCollectionName:"rustc",traceOutputChannel:a,middleware:{async provideHover(v,b,C,w){var N;let E=dn.window.activeTextEditor,q=((N=E==null?void 0:E.selection)==null?void 0:N.contains(b))?g.code2ProtocolConverter.asRange(E.selection):g.code2ProtocolConverter.asPosition(b);return g.sendRequest(Ey,{textDocument:g.code2ProtocolConverter.asTextDocumentIdentifier(v),position:q},C).then(A=>{let H=g.protocol2CodeConverter.asHover(A);if(H){let O=A.actions;O&&H.contents.push(fk(O))}return H},A=>(g.handleFailedRequest(ln.HoverRequest.type,C,A,null),Promise.resolve(null)))},async provideCodeActions(v,b,C,w,E){let q={textDocument:g.code2ProtocolConverter.asTextDocumentIdentifier(v),range:g.code2ProtocolConverter.asRange(b),context:g.code2ProtocolConverter.asCodeActionContext(C)};return g.sendRequest(ln.CodeActionRequest.type,q,w).then(N=>{if(N===null)return;let A=[],H=new Map;for(let O of N){if(ln.CodeAction.is(O)){cn(!O.command,"We don't expect to receive commands in CodeActions");let X=g.protocol2CodeConverter.asCodeAction(O);A.push(X);continue}cn(hk(O),"We don't expect edits or commands here");let z=g.protocol2CodeConverter.asCodeActionKind(O.kind),M=new dn.CodeAction(O.title,z),G=O.group;if(M.command={command:"rust-analyzer.resolveCodeAction",title:O.title,arguments:[O]},M.edit=new Gl.WorkspaceEdit,G){let X=H.get(G);X||(X={index:A.length,items:[]},H.set(G,X),A.push(M)),X.items.push(M)}else A.push(M)}for(let[O,{index:z,items:M}]of H)if(M.length===1)A[z]=M[0];else{let G=new dn.CodeAction(O);G.kind=M[0].kind,G.command={command:"rust-analyzer.applyActionGroup",title:"",arguments:[M.map(X=>({label:X.title,arguments:X.command.arguments[0]}))]},G.edit=new Gl.WorkspaceEdit,A[z]=G}return A},N=>{})}}},g=new ln.LanguageClient("rust-analyzer","Rust Analyzer Language Server",s,u);return g.registerFeature(new Jb),g}var Jb=class{fillClientCapabilities(e){let t=e.experimental??{};t.snippetTextEdit=!0,t.codeActionGroup=!0,t.hoverActions=!0,t.serverStatusNotification=!0,t.commands={commands:["rust-analyzer.runSingle","rust-analyzer.debugSingle","rust-analyzer.showReferences","rust-analyzer.gotoLocation","editor.action.triggerParameterHints"]},e.experimental=t}initialize(e,t){}dispose(){}};function hk(r){let e=r;return e&&ms.string(e.title)&&(e.diagnostics===void 0||ms.typedArray(e.diagnostics,ln.Diagnostic.is))&&(e.kind===void 0||ms.string(e.kind))&&e.edit===void 0&&e.command===void 0}var io=class{constructor(e,t,n,i,s){this.config=e;this.extCtx=t;this.client=n;this.serverPath=i;this.statusBar=s}static async create(e,t,n,i){let s=Qb(n,i,e.serverExtraEnv),a=Vr.window.createStatusBarItem(Vr.StatusBarAlignment.Left);t.subscriptions.push(a),a.text="rust-analyzer",a.tooltip="ready",a.command="rust-analyzer.analyzerStatus",a.show();let l=new io(e,t,s,n,a);return l.pushCleanup(s.start()),await s.onReady(),s.onNotification(Py,u=>l.setServerStatus(u)),l}get activeRustEditor(){let e=Vr.window.activeTextEditor;return e&&Pn(e)?e:void 0}get visibleRustEditors(){return Vr.window.visibleTextEditors.filter(Pn)}registerCommand(e,t){let n=`rust-analyzer.${e}`,i=t(this),s=Vr.commands.registerCommand(n,i);this.pushCleanup(s)}get extensionPath(){return this.extCtx.extensionPath}get globalState(){return this.extCtx.globalState}get subscriptions(){return this.extCtx.subscriptions}setServerStatus(e){this.statusBar.tooltip=e.message??"Ready";let t="";switch(e.health){case"ok":this.statusBar.color=void 0;break;case"warning":this.statusBar.tooltip+=`
Click to reload.`,this.statusBar.command="rust-analyzer.reloadWorkspace",this.statusBar.color=new Vr.ThemeColor("notificationsWarningIcon.foreground"),t="$(warning) ";break;case"error":this.statusBar.tooltip+=`
Click to reload.`,this.statusBar.command="rust-analyzer.reloadWorkspace",this.statusBar.color=new Vr.ThemeColor("notificationsErrorIcon.foreground"),t="$(error) ";break}e.quiescent||(t="$(sync~spin) "),this.statusBar.text=`${t} rust-analyzer`}pushCleanup(e){this.extCtx.subscriptions.push(e)}};var Yr=oe(require("vscode"));var pk="nightly";var Vl=class{constructor(e){this.extensionId="matklad.rust-analyzer";this.rootSection="rust-analyzer";this.requiresReloadOpts=["serverPath","server","cargo","procMacro","files","highlighting","updates.channel","lens"].map(e=>`${this.rootSection}.${e}`);this.package=Yr.extensions.getExtension(this.extensionId).packageJSON;this.globalStorageUri=e.globalStorageUri,Yr.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,e.subscriptions),this.refreshLogging()}refreshLogging(){ae.setEnabled(this.traceExtension),ae.info("Extension version:",this.package.version);let e=Object.entries(this.cfg).filter(([t,n])=>!(n instanceof Function));ae.info("Using configuration",Object.fromEntries(e))}async onDidChangeConfiguration(e){this.refreshLogging();let t=this.requiresReloadOpts.find(i=>e.affectsConfiguration(i));if(!t)return;await Yr.window.showInformationMessage(`Changing "${t}" requires a reload`,"Reload now")==="Reload now"&&await Yr.commands.executeCommand("workbench.action.reloadWindow")}get cfg(){return Yr.workspace.getConfiguration(this.rootSection)}get(e){return this.cfg.get(e)}get serverPath(){return this.get("server.path")??this.get("serverPath")}get serverExtraEnv(){return this.get("server.extraEnv")??{}}get channel(){return this.get("updates.channel")}get askBeforeDownload(){return this.get("updates.askBeforeDownload")}get traceExtension(){return this.get("trace.extension")}get proxySettings(){let e=Yr.workspace.getConfiguration("http").get("proxy")||process.env.https_proxy||process.env.HTTPS_PROXY,t=Yr.workspace.getConfiguration("http").get("proxyStrictSSL")??!0;return{proxy:e,strictSSL:t}}get inlayHints(){return{enable:this.get("inlayHints.enable"),typeHints:this.get("inlayHints.typeHints"),parameterHints:this.get("inlayHints.parameterHints"),chainingHints:this.get("inlayHints.chainingHints"),hideNamedConstructorHints:this.get("inlayHints.hideNamedConstructorHints"),smallerHints:this.get("inlayHints.smallerHints"),maxLength:this.get("inlayHints.maxLength")}}get cargoRunner(){return this.get("cargoRunner")}get runnableEnv(){return this.get("runnableEnv")}get debug(){let e=this.get("debug.sourceFileMap");if(e!=="auto"){let t=this.get("debug.sourceFileMap"),{["/rustc/<id>"]:n}=t;e=df(t,["/rustc/<id>"])}return{engine:this.get("debug.engine"),engineSettings:this.get("debug.engineSettings"),openDebugPane:this.get("debug.openDebugPane"),sourceFileMap:e}}get hoverActions(){return{enable:this.get("hoverActions.enable"),implementations:this.get("hoverActions.implementations"),references:this.get("hoverActions.references"),run:this.get("hoverActions.run"),debug:this.get("hoverActions.debug"),gotoTypeDef:this.get("hoverActions.gotoTypeDef")}}get currentExtensionIsNightly(){return this.package.releaseTag===pk}};var fc=class{constructor(e){this.globalState=e;let{lastCheck:t,nightlyReleaseId:n,serverVersion:i}=this;ae.info("PersistentState:",{lastCheck:t,nightlyReleaseId:n,serverVersion:i})}get lastCheck(){return this.globalState.get("lastCheck")}async updateLastCheck(e){await this.globalState.update("lastCheck",e)}get nightlyReleaseId(){return this.globalState.get("releaseId")}async updateNightlyReleaseId(e){await this.globalState.update("releaseId",e)}get serverVersion(){return this.globalState.get("serverVersion")}async updateServerVersion(e){await this.globalState.update("serverVersion",e)}get githubToken(){return this.globalState.get("githubToken")}async updateGithubToken(e){await this.globalState.update("githubToken",e)}};var kw=oe(require("http")),qw=oe(require("https")),Ci=oe(require("zlib")),hr=oe(require("stream"));function gk(r){if(!/^data:/i.test(r))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');r=r.replace(/\r?\n/g,"");let e=r.indexOf(",");if(e===-1||e<=4)throw new TypeError("malformed data: URI");let t=r.substring(5,e).split(";"),n="",i=!1,s=t[0]||"text/plain",a=s;for(let v=1;v<t.length;v++)t[v]==="base64"?i=!0:(a+=`;${t[v]}`,t[v].indexOf("charset=")===0&&(n=t[v].substring(8)));!t[0]&&!n.length&&(a+=";charset=US-ASCII",n="US-ASCII");let l=i?"base64":"ascii",u=unescape(r.substring(e+1)),g=Buffer.from(u,l);return g.type=s,g.typeFull=a,g.charset=n,g}var Zb=gk;var Xr=oe(require("stream")),uo=oe(require("util"));ys();Jl();var Hn=class extends Error{constructor(e,t){super(e);Error.captureStackTrace(this,this.constructor),this.type=t}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};var kr=class extends Hn{constructor(e,t,n){super(e,t);n&&(this.code=this.errno=n.code,this.erroredSysCall=n.syscall)}};var pc=Symbol.toStringTag,Zl=r=>typeof r=="object"&&typeof r.append=="function"&&typeof r.delete=="function"&&typeof r.get=="function"&&typeof r.getAll=="function"&&typeof r.has=="function"&&typeof r.set=="function"&&typeof r.sort=="function"&&r[pc]==="URLSearchParams",_s=r=>r&&typeof r=="object"&&typeof r.arrayBuffer=="function"&&typeof r.type=="string"&&typeof r.stream=="function"&&typeof r.constructor=="function"&&/^(Blob|File)$/.test(r[pc]),lw=r=>typeof r=="object"&&(r[pc]==="AbortSignal"||r[pc]==="EventTarget");var sr=Symbol("Body internals"),En=class{constructor(e,{size:t=0}={}){let n=null;e===null?e=null:Zl(e)?e=Buffer.from(e.toString()):_s(e)||Buffer.isBuffer(e)||(uo.types.isAnyArrayBuffer(e)?e=Buffer.from(e):ArrayBuffer.isView(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof Xr.default||(e instanceof ao?(e=cw(e),n=e.type.split("=")[1]):e=Buffer.from(String(e))));let i=e;Buffer.isBuffer(e)?i=Xr.default.Readable.from(e):_s(e)&&(i=Xr.default.Readable.from(e.stream())),this[sr]={body:e,stream:i,boundary:n,disturbed:!1,error:null},this.size=t,e instanceof Xr.default&&e.on("error",s=>{let a=s instanceof Hn?s:new kr(`Invalid response body while trying to fetch ${this.url}: ${s.message}`,"system",s);this[sr].error=a})}get body(){return this[sr].stream}get bodyUsed(){return this[sr].disturbed}async arrayBuffer(){let{buffer:e,byteOffset:t,byteLength:n}=await vc(this);return e.slice(t,t+n)}async formData(){let e=this.headers.get("content-type");if(e.startsWith("application/x-www-form-urlencoded")){let n=new ao,i=new URLSearchParams(await this.text());for(let[s,a]of i)n.append(s,a);return n}let{toFormData:t}=await Promise.resolve().then(()=>(mw(),gw));return t(this.body,e)}async blob(){let e=this.headers&&this.headers.get("content-type")||this[sr].body&&this[sr].body.type||"",t=await this.buffer();return new vi([t],{type:e})}async json(){let e=await vc(this);return JSON.parse(e.toString())}async text(){return(await vc(this)).toString()}buffer(){return vc(this)}};En.prototype.buffer=(0,uo.deprecate)(En.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(En.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}});async function vc(r){if(r[sr].disturbed)throw new TypeError(`body used already for: ${r.url}`);if(r[sr].disturbed=!0,r[sr].error)throw r[sr].error;let{body:e}=r;if(e===null||!(e instanceof Xr.default))return Buffer.alloc(0);let t=[],n=0;try{for await(let i of e){if(r.size>0&&n+i.length>r.size){let s=new kr(`content size at ${r.url} over limit: ${r.size}`,"max-size");throw e.destroy(s),s}n+=i.length,t.push(i)}}catch(i){throw i instanceof Hn?i:new kr(`Invalid response body while trying to fetch ${r.url}: ${i.message}`,"system",i)}if(e.readableEnded===!0||e._readableState.ended===!0)try{return t.every(i=>typeof i=="string")?Buffer.from(t.join("")):Buffer.concat(t,n)}catch(i){throw new kr(`Could not create Buffer from response body for ${r.url}: ${i.message}`,"system",i)}else throw new kr(`Premature close of server response while trying to fetch ${r.url}`)}var lo=(r,e)=>{let t,n,{body:i}=r[sr];if(r.bodyUsed)throw new Error("cannot clone body after it is used");return i instanceof Xr.default&&typeof i.getBoundary!="function"&&(t=new Xr.PassThrough({highWaterMark:e}),n=new Xr.PassThrough({highWaterMark:e}),i.pipe(t),i.pipe(n),r[sr].stream=t,i=n),i},Fk=(0,uo.deprecate)(r=>r.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),yc=(r,e)=>r===null?null:typeof r=="string"?"text/plain;charset=UTF-8":Zl(r)?"application/x-www-form-urlencoded;charset=UTF-8":_s(r)?r.type||null:Buffer.isBuffer(r)||uo.types.isAnyArrayBuffer(r)||ArrayBuffer.isView(r)?null:r instanceof ao?`multipart/form-data; boundary=${e[sr].boundary}`:r&&typeof r.getBoundary=="function"?`multipart/form-data;boundary=${Fk(r)}`:r instanceof Xr.default?null:"text/plain;charset=UTF-8",vw=r=>{let{body:e}=r[sr];return e===null?0:_s(e)?e.size:Buffer.isBuffer(e)?e.length:e&&typeof e.getLengthSync=="function"&&e.hasKnownLength&&e.hasKnownLength()?e.getLengthSync():null},yw=(r,{body:e})=>{e===null?r.end():e.pipe(r)};var td=oe(require("util")),Ps=oe(require("http")),bc=typeof Ps.default.validateHeaderName=="function"?Ps.default.validateHeaderName:r=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(r)){let e=new TypeError(`Header name must be a valid HTTP token [${r}]`);throw Object.defineProperty(e,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),e}},rd=typeof Ps.default.validateHeaderValue=="function"?Ps.default.validateHeaderValue:(r,e)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(e)){let t=new TypeError(`Invalid character in header content ["${r}"]`);throw Object.defineProperty(t,"code",{value:"ERR_INVALID_CHAR"}),t}},fr=class extends URLSearchParams{constructor(e){let t=[];if(e instanceof fr){let n=e.raw();for(let[i,s]of Object.entries(n))t.push(...s.map(a=>[i,a]))}else if(e!=null)if(typeof e=="object"&&!td.types.isBoxedPrimitive(e)){let n=e[Symbol.iterator];if(n==null)t.push(...Object.entries(e));else{if(typeof n!="function")throw new TypeError("Header pairs must be iterable");t=[...e].map(i=>{if(typeof i!="object"||td.types.isBoxedPrimitive(i))throw new TypeError("Each header pair must be an iterable object");return[...i]}).map(i=>{if(i.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...i]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");t=t.length>0?t.map(([n,i])=>(bc(n),rd(n,String(i)),[String(n).toLowerCase(),String(i)])):void 0;super(t);return new Proxy(this,{get(n,i,s){switch(i){case"append":case"set":return(a,l)=>(bc(a),rd(a,String(l)),URLSearchParams.prototype[i].call(n,String(a).toLowerCase(),String(l)));case"delete":case"has":case"getAll":return a=>(bc(a),URLSearchParams.prototype[i].call(n,String(a).toLowerCase()));case"keys":return()=>(n.sort(),new Set(URLSearchParams.prototype.keys.call(n)).keys());default:return Reflect.get(n,i,s)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(e){let t=this.getAll(e);if(t.length===0)return null;let n=t.join(", ");return/^content-encoding$/i.test(e)&&(n=n.toLowerCase()),n}forEach(e,t=void 0){for(let n of this.keys())Reflect.apply(e,t,[this.get(n),n,this])}*values(){for(let e of this.keys())yield this.get(e)}*entries(){for(let e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((e,t)=>(e[t]=this.getAll(t),e),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((e,t)=>{let n=this.getAll(t);return t==="host"?e[t]=n[0]:e[t]=n.length>1?n:n[0],e},{})}};Object.defineProperties(fr.prototype,["get","entries","forEach","values"].reduce((r,e)=>(r[e]={enumerable:!0},r),{}));function bw(r=[]){return new fr(r.reduce((e,t,n,i)=>(n%2==0&&e.push(i.slice(n,n+2)),e),[]).filter(([e,t])=>{try{return bc(e),rd(e,String(t)),!0}catch{return!1}}))}var Ik=new Set([301,302,303,307,308]),wc=r=>Ik.has(r);var Qr=Symbol("Response internals"),ar=class extends En{constructor(e=null,t={}){super(e,t);let n=t.status!=null?t.status:200,i=new fr(t.headers);if(e!==null&&!i.has("Content-Type")){let s=yc(e,this);s&&i.append("Content-Type",s)}this[Qr]={type:"default",url:t.url,status:n,statusText:t.statusText||"",headers:i,counter:t.counter,highWaterMark:t.highWaterMark}}get type(){return this[Qr].type}get url(){return this[Qr].url||""}get status(){return this[Qr].status}get ok(){return this[Qr].status>=200&&this[Qr].status<300}get redirected(){return this[Qr].counter>0}get statusText(){return this[Qr].statusText}get headers(){return this[Qr].headers}get highWaterMark(){return this[Qr].highWaterMark}clone(){return new ar(lo(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(e,t=302){if(!wc(t))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new ar(null,{headers:{location:new URL(e).toString()},status:t})}static error(){let e=new ar(null,{status:0,statusText:""});return e[Qr].type="error",e}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(ar.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var Ew=oe(require("url"));var ww=r=>{if(r.search)return r.search;let e=r.href.length-1,t=r.hash||(r.href[e]==="#"?"#":"");return r.href[e-t.length]==="?"?"?":""};var Cw=oe(require("net"));function Rw(r,e=!1){return r==null||(r=new URL(r),/^(about|blob|data):$/.test(r.protocol))?"no-referrer":(r.username="",r.password="",r.hash="",e&&(r.pathname="",r.search=""),r)}var _w=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),Sw="strict-origin-when-cross-origin";function Tw(r){if(!_w.has(r))throw new TypeError(`Invalid referrerPolicy: ${r}`);return r}function Lk(r){if(/^(http|ws)s:$/.test(r.protocol))return!0;let e=r.host.replace(/(^\[)|(]$)/g,""),t=(0,Cw.isIP)(e);return t===4&&/^127\./.test(e)||t===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(e)?!0:/^(.+\.)*localhost$/.test(r.host)?!1:r.protocol==="file:"}function fo(r){return/^about:(blank|srcdoc)$/.test(r)||r.protocol==="data:"||/^(blob|filesystem):$/.test(r.protocol)?!0:Lk(r)}function Pw(r,{referrerURLCallback:e,referrerOriginCallback:t}={}){if(r.referrer==="no-referrer"||r.referrerPolicy==="")return null;let n=r.referrerPolicy;if(r.referrer==="about:client")return"no-referrer";let i=r.referrer,s=Rw(i),a=Rw(i,!0);s.toString().length>4096&&(s=a),e&&(s=e(s)),t&&(a=t(a));let l=new URL(r.url);switch(n){case"no-referrer":return"no-referrer";case"origin":return a;case"unsafe-url":return s;case"strict-origin":return fo(s)&&!fo(l)?"no-referrer":a.toString();case"strict-origin-when-cross-origin":return s.origin===l.origin?s:fo(s)&&!fo(l)?"no-referrer":a;case"same-origin":return s.origin===l.origin?s:"no-referrer";case"origin-when-cross-origin":return s.origin===l.origin?s:a;case"no-referrer-when-downgrade":return fo(s)&&!fo(l)?"no-referrer":s;default:throw new TypeError(`Invalid referrerPolicy: ${n}`)}}function Dw(r){let e=(r.get("referrer-policy")||"").split(/[,\s]+/),t="";for(let n of e)n&&_w.has(n)&&(t=n);return t}var Rt=Symbol("Request internals"),Cc=r=>typeof r=="object"&&typeof r[Rt]=="object",Bn=class extends En{constructor(e,t={}){let n;if(Cc(e)?n=new URL(e.url):(n=new URL(e),e={}),n.username!==""||n.password!=="")throw new TypeError(`${n} is an url with embedded credentails.`);let i=t.method||e.method||"GET";if(i=i.toUpperCase(),(t.body!=null||Cc(e))&&e.body!==null&&(i==="GET"||i==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let s=t.body?t.body:Cc(e)&&e.body!==null?lo(e):null;super(s,{size:t.size||e.size||0});let a=new fr(t.headers||e.headers||{});if(s!==null&&!a.has("Content-Type")){let g=yc(s,this);g&&a.set("Content-Type",g)}let l=Cc(e)?e.signal:null;if("signal"in t&&(l=t.signal),l!=null&&!lw(l))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let u=t.referrer==null?e.referrer:t.referrer;if(u==="")u="no-referrer";else if(u){let g=new URL(u);u=/^about:(\/\/)?client$/.test(g)?"client":g}else u=void 0;this[Rt]={method:i,redirect:t.redirect||e.redirect||"follow",headers:a,parsedURL:n,signal:l,referrer:u},this.follow=t.follow===void 0?e.follow===void 0?20:e.follow:t.follow,this.compress=t.compress===void 0?e.compress===void 0?!0:e.compress:t.compress,this.counter=t.counter||e.counter||0,this.agent=t.agent||e.agent,this.highWaterMark=t.highWaterMark||e.highWaterMark||16384,this.insecureHTTPParser=t.insecureHTTPParser||e.insecureHTTPParser||!1,this.referrerPolicy=t.referrerPolicy||e.referrerPolicy||""}get method(){return this[Rt].method}get url(){return(0,Ew.format)(this[Rt].parsedURL)}get headers(){return this[Rt].headers}get redirect(){return this[Rt].redirect}get signal(){return this[Rt].signal}get referrer(){if(this[Rt].referrer==="no-referrer")return"";if(this[Rt].referrer==="client")return"about:client";if(this[Rt].referrer)return this[Rt].referrer.toString()}get referrerPolicy(){return this[Rt].referrerPolicy}set referrerPolicy(e){this[Rt].referrerPolicy=Tw(e)}clone(){return new Bn(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(Bn.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});var xw=r=>{let{parsedURL:e}=r[Rt],t=new fr(r[Rt].headers);t.has("Accept")||t.set("Accept","*/*");let n=null;if(r.body===null&&/^(post|put)$/i.test(r.method)&&(n="0"),r.body!==null){let l=vw(r);typeof l=="number"&&!Number.isNaN(l)&&(n=String(l))}n&&t.set("Content-Length",n),r.referrerPolicy===""&&(r.referrerPolicy=Sw),r.referrer&&r.referrer!=="no-referrer"?r[Rt].referrer=Pw(r):r[Rt].referrer="no-referrer",r[Rt].referrer instanceof URL&&t.set("Referer",r.referrer),t.has("User-Agent")||t.set("User-Agent","node-fetch"),r.compress&&!t.has("Accept-Encoding")&&t.set("Accept-Encoding","gzip,deflate,br");let{agent:i}=r;typeof i=="function"&&(i=i(e)),!t.has("Connection")&&!i&&t.set("Connection","close");let s=ww(e),a={path:e.pathname+s,method:r.method,headers:t[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:r.insecureHTTPParser,agent:i};return{parsedURL:e,options:a}};var nd=class extends Hn{constructor(e,t="aborted"){super(e,t)}};var Nk=new Set(["data:","http:","https:"]);async function Ds(r,e){return new Promise((t,n)=>{let i=new Bn(r,e),{parsedURL:s,options:a}=xw(i);if(!Nk.has(s.protocol))throw new TypeError(`node-fetch cannot load ${r}. URL scheme "${s.protocol.replace(/:$/,"")}" is not supported.`);if(s.protocol==="data:"){let E=Zb(i.url),q=new ar(E,{headers:{"Content-Type":E.typeFull}});t(q);return}let l=(s.protocol==="https:"?qw.default:kw.default).request,{signal:u}=i,g=null,v=()=>{let E=new nd("The operation was aborted.");n(E),i.body&&i.body instanceof hr.default.Readable&&i.body.destroy(E),!(!g||!g.body)&&g.body.emit("error",E)};if(u&&u.aborted){v();return}let b=()=>{v(),w()},C=l(s,a);u&&u.addEventListener("abort",b);let w=()=>{C.abort(),u&&u.removeEventListener("abort",b)};C.on("error",E=>{n(new kr(`request to ${i.url} failed, reason: ${E.message}`,"system",E)),w()}),Mk(C,E=>{g.body.destroy(E)}),process.version<"v14"&&C.on("socket",E=>{let q;E.prependListener("end",()=>{q=E._eventsCount}),E.prependListener("close",N=>{if(g&&q<E._eventsCount&&!N){let A=new Error("Premature close");A.code="ERR_STREAM_PREMATURE_CLOSE",g.body.emit("error",A)}})}),C.on("response",E=>{C.setTimeout(0);let q=bw(E.rawHeaders);if(wc(E.statusCode)){let z=q.get("Location"),M=z===null?null:new URL(z,i.url);switch(i.redirect){case"error":n(new kr(`uri requested responds with a redirect, redirect mode is set to error: ${i.url}`,"no-redirect")),w();return;case"manual":M!==null&&q.set("Location",M);break;case"follow":{if(M===null)break;if(i.counter>=i.follow){n(new kr(`maximum redirect reached at: ${i.url}`,"max-redirect")),w();return}let G={headers:new fr(i.headers),follow:i.follow,counter:i.counter+1,agent:i.agent,compress:i.compress,method:i.method,body:lo(i),signal:i.signal,size:i.size,referrer:i.referrer,referrerPolicy:i.referrerPolicy};if(E.statusCode!==303&&i.body&&e.body instanceof hr.default.Readable){n(new kr("Cannot follow redirect with body being a readable stream","unsupported-redirect")),w();return}(E.statusCode===303||(E.statusCode===301||E.statusCode===302)&&i.method==="POST")&&(G.method="GET",G.body=void 0,G.headers.delete("content-length"));let X=Dw(q);X&&(G.referrerPolicy=X),t(Ds(new Bn(M,G))),w();return}default:return n(new TypeError(`Redirect option '${i.redirect}' is not a valid value of RequestRedirect`))}}u&&E.once("end",()=>{u.removeEventListener("abort",b)});let N=(0,hr.pipeline)(E,new hr.PassThrough,n);process.version<"v12.10"&&E.on("aborted",b);let A={url:i.url,status:E.statusCode,statusText:E.statusMessage,headers:q,size:i.size,counter:i.counter,highWaterMark:i.highWaterMark},H=q.get("Content-Encoding");if(!i.compress||i.method==="HEAD"||H===null||E.statusCode===204||E.statusCode===304){g=new ar(N,A),t(g);return}let O={flush:Ci.default.Z_SYNC_FLUSH,finishFlush:Ci.default.Z_SYNC_FLUSH};if(H==="gzip"||H==="x-gzip"){N=(0,hr.pipeline)(N,Ci.default.createGunzip(O),n),g=new ar(N,A),t(g);return}if(H==="deflate"||H==="x-deflate"){(0,hr.pipeline)(E,new hr.PassThrough,n).once("data",M=>{N=(M[0]&15)==8?(0,hr.pipeline)(N,Ci.default.createInflate(),n):(0,hr.pipeline)(N,Ci.default.createInflateRaw(),n),g=new ar(N,A),t(g)});return}if(H==="br"){N=(0,hr.pipeline)(N,Ci.default.createBrotliDecompress(),n),g=new ar(N,A),t(g);return}g=new ar(N,A),t(g)}),yw(C,i)})}function Mk(r,e){let t=Buffer.from(`0\r
\r
`),n=!1,i=!1,s;r.on("response",a=>{let{headers:l}=a;n=l["transfer-encoding"]==="chunked"&&!l["content-length"]}),r.on("socket",a=>{let l=()=>{if(n&&!i){let u=new Error("Premature close");u.code="ERR_STREAM_PREMATURE_CLOSE",e(u)}};a.prependListener("close",l),r.on("abort",()=>{a.removeListener("close",l)}),a.on("data",u=>{i=Buffer.compare(u.slice(-5),t)===0,!i&&s&&(i=Buffer.compare(s.slice(-3),t.slice(0,3))===0&&Buffer.compare(u.slice(-2),t.slice(3))===0),s=u})})}var $t=oe(require("vscode")),eC=oe(require("stream")),tC=oe(require("crypto")),rC=oe(require("fs")),nC=oe(require("zlib")),iC=oe(require("util")),oC=oe(require("path"));var sC=oe(require("https")),P0=Zw(),D0=iC.promisify(eC.pipeline),E0="https://api.github.com",x0="rust-analyzer",k0="rust-analyzer";function aC(r,e){return r?new P0(Xn(Xn({},e),new URL(r))):new sC.Agent(e)}async function pd(r,e,t){let n=`/repos/${x0}/${k0}/releases/tags/${r}`,i=E0+n;ae.debug("Issuing request for released artifacts metadata to",i);let s={Accept:"application/vnd.github.v3+json"};e!=null&&(s.Authorization="token "+e);let a=await(()=>{t.proxy&&ae.debug(`Fetching release metadata via proxy: ${t.proxy}`);let u={};t.strictSSL&&(u.rejectUnauthorized=!1);let g=aC(t.proxy,u);return Ds(i,{headers:s,agent:g})})();if(!a.ok)throw ae.error("Error fetching artifact release info",{requestUrl:i,releaseTag:r,response:{headers:a.headers,status:a.status,body:await a.text()}}),new Error(`Got response ${a.status} when trying to fetch release info for ${r} release`);return await a.json()}async function gd(r){let e=tC.randomBytes(5).toString("hex"),t=oC.parse(r.dest.fsPath),n=$t.Uri.joinPath($t.Uri.file(t.dir),`${t.name}-stale-${e}${t.ext}`),i=$t.Uri.joinPath($t.Uri.file(t.dir),`${t.name}${e}`);await $t.window.withProgress({location:$t.ProgressLocation.Notification,cancellable:!1,title:r.progressTitle},async(a,l)=>{let u=0;await q0(r.url,i,r.mode,!!r.gunzip,r.proxySettings,(g,v)=>{let b=Math.round(g/v*100);b!==u&&(a.report({message:`${b.toFixed(0)}%`,increment:b-u}),u=b)})});try{await $t.workspace.fs.rename(r.dest,n,{overwrite:!0}),ae.info(`Renamed old server binary ${r.dest.fsPath} to ${n.fsPath}`)}catch(a){let l=a;(!l.code||l.code!=="EntryNotFound"&&l.name.indexOf("EntryNotFound")===-1)&&ae.error(`Cannot rename existing server instance: ${a}"`)}try{await $t.workspace.fs.rename(i,r.dest,{overwrite:!0})}catch(a){ae.error(`Cannot update server binary: ${a}`)}let s=$t.Uri.file(t.dir);try{let a=await $t.workspace.fs.readDirectory(s);for(let[l,u]of a)try{if(l.includes(`${t.name}-stale-`)){let g=$t.Uri.joinPath(s,l);try{await $t.workspace.fs.delete(g),ae.info(`Removed old server binary ${g.fsPath}`)}catch{ae.error(`Unable to remove old server binary ${g.fsPath}`)}}}catch{ae.error(`Unable to parse ${l}`)}}catch{ae.error(`Unable to enumerate contents of ${s.fsPath}`)}}async function q0(r,e,t,n,i,s){let a=r.toString(),l=await(()=>{i.proxy&&ae.debug(`Downloading ${a} via proxy: ${i.proxy}`);let C={};i.strictSSL&&(C.rejectUnauthorized=!1);let w=aC(i.proxy,C);return Ds(a,{agent:w})})();if(!l.ok)throw ae.error("Error",l.status,"while downloading file from",a),ae.error({body:await l.text(),headers:l.headers}),new Error(`Got response ${l.status} when trying to download a file.`);if(!l.body)throw ae.error("Empty body while downloading file from",a),ae.error({headers:l.headers}),new Error("Got empty body when trying to download a file.");let u=Number(l.headers.get("content-length"));cn(!Number.isNaN(u),"Sanity check of content-length protocol"),ae.debug("Downloading file of",u,"bytes size from",a,"to",e.fsPath);let g=0;l.body.on("data",C=>{g+=C.length,s(g,u)});let v=rC.createWriteStream(e.fsPath,{mode:t}),b=n?l.body.pipe(nC.createGunzip()):l.body;await D0(b,v)}var Ec=oe(require("child_process")),Jt,uC="inRustProject";async function lC(r){await O0(r).catch(e=>{throw he.window.showErrorMessage(`Cannot activate rust-analyzer: ${e.message}`),e})}async function O0(r){let e=new Vl(r),t=new fc(r.globalState),n=await F0(e,t).catch(i=>{let s="bootstrap error. ";throw(i.code==="EBUSY"||i.code==="ETXTBSY"||i.code==="EPERM")&&(s+="Other vscode windows might be using rust-analyzer, ",s+="you should close them and reload this window to retry. "),s+='See the logs in "OUTPUT > Rust Analyzer Client" (should open automatically). ',s+='To enable verbose logs use { "rust-analyzer.trace.extension": true }',ae.error("Bootstrap error",i),new Error(s)});if((he.workspace.workspaceFolders||[]).length===0){let i=he.workspace.textDocuments.filter(s=>un(s));if(i.length>0)Jt=await io.create(e,r,n,{kind:"Detached Files",files:i});else throw new Error("no rust files are opened")}else Jt=await io.create(e,r,n,{kind:"Workspace Folder"}),Jt.pushCleanup(sb(Jt.config));await A0(r,Jt),Yb(Jt),W0(),Jt.pushCleanup(H0()),he.workspace.onDidChangeConfiguration(i=>{var s;return(s=Jt==null?void 0:Jt.client)==null?void 0:s.sendNotification("workspace/didChangeConfiguration",{settings:""}).catch(ae.error)},null,Jt.subscriptions)}async function A0(r,e){let t=he.commands.registerCommand("rust-analyzer.onEnter",()=>he.commands.executeCommand("default:type",{text:`
`}));r.subscriptions.push(t),await Ll(uC,!0),e.registerCommand("reload",n=>async()=>{for(he.window.showInformationMessage("Reloading rust-analyzer..."),await dC();r.subscriptions.length>0;)try{r.subscriptions.pop().dispose()}catch(i){ae.error("Dispose error:",i)}await lC(r).catch(ae.error)}),e.registerCommand("updateGithubToken",n=>async()=>{await hC(new fc(n.globalState))}),e.registerCommand("analyzerStatus",pb),e.registerCommand("memoryUsage",gb),e.registerCommand("shuffleCrateGraph",mb),e.registerCommand("reloadWorkspace",Ib),e.registerCommand("matchingBrace",vb),e.registerCommand("joinLines",yb),e.registerCommand("parentModule",_b),e.registerCommand("syntaxTree",Eb),e.registerCommand("viewHir",xb),e.registerCommand("viewItemTree",kb),e.registerCommand("viewCrateGraph",Ob),e.registerCommand("viewFullCrateGraph",Ab),e.registerCommand("expandMacro",Fb),e.registerCommand("run",Hb),e.registerCommand("copyRunCommandLine",Ub),e.registerCommand("debug",Kb),e.registerCommand("newDebugConfig",Vb),e.registerCommand("openDocs",jb),e.registerCommand("openCargoToml",Sb),e.registerCommand("peekTests",zb),e.registerCommand("moveItemUp",bb),e.registerCommand("moveItemDown",wb),t.dispose(),e.registerCommand("onEnter",Rb),e.registerCommand("ssr",Tb),e.registerCommand("serverVersion",Pb),e.registerCommand("toggleInlayHints",Db),e.registerCommand("runSingle",Bb),e.registerCommand("debugSingle",Gb),e.registerCommand("showReferences",Lb),e.registerCommand("applySnippetWorkspaceEdit",Wb),e.registerCommand("resolveCodeAction",$b),e.registerCommand("applyActionGroup",Nb),e.registerCommand("gotoLocation",Mb)}async function dC(){await Ll(uC,void 0),await(Jt==null?void 0:Jt.client.stop()),Jt=void 0}async function F0(r,e){return await he.workspace.fs.createDirectory(r.globalStorageUri).then(),r.currentExtensionIsNightly||await e.updateNightlyReleaseId(void 0),await I0(r,e),await L0(r,e)}async function I0(r,e){if(r.package.releaseTag===null)return;if(r.channel==="stable"){r.currentExtensionIsNightly&&he.window.showWarningMessage("You are running a nightly version of rust-analyzer extension. To switch to stable, uninstall the extension and re-install it from the marketplace");return}if(fC(r))return;let t=Date.now(),n=e.nightlyReleaseId===void 0;if(r.currentExtensionIsNightly){let u=e.lastCheck,g=60*60*1e3;if(!(n||t-(u??0)>g))return}let i=await xc(e,async()=>await pd("nightly",e.githubToken,r.proxySettings)).catch(async u=>{ae.error(u),n&&await he.window.showErrorMessage(`Failed to download rust-analyzer nightly: ${u}`)});if(i===void 0){n&&await he.window.showErrorMessage("Failed to download rust-analyzer nightly: empty release contents returned");return}if(r.currentExtensionIsNightly&&i.id===e.nightlyReleaseId||await he.window.showInformationMessage("New version of rust-analyzer (nightly) is available (requires reload).","Update")!=="Update")return;let a=i.assets.find(u=>u.name==="rust-analyzer.vsix");cn(!!a,`Bad release: ${JSON.stringify(i)}`);let l=he.Uri.joinPath(r.globalStorageUri,"rust-analyzer.vsix");await xc(e,async()=>{await gd({url:a.browser_download_url,dest:l,progressTitle:"Downloading rust-analyzer extension",proxySettings:r.proxySettings})}),await he.commands.executeCommand("workbench.extensions.installExtension",l),await he.workspace.fs.delete(l),await e.updateNightlyReleaseId(i.id),await e.updateLastCheck(t),await he.commands.executeCommand("workbench.action.reloadWindow")}async function L0(r,e){let t=await M0(r,e);if(!t)throw new Error("Rust Analyzer Language Server is not available. Please, ensure its [proper installation](https://rust-analyzer.github.io/manual.html#installation).");if(ae.info("Using server binary at",t),!Yy(t))throw r.serverPath?new Error(`Failed to execute ${t} --version. \`config.server.path\` or \`config.serverPath\` has been set explicitly.            Consider removing this config or making a valid server binary available at that path.`):new Error(`Failed to execute ${t} --version`);return t}async function N0(r){await he.window.withProgress({location:he.ProgressLocation.Notification,title:"Patching rust-analyzer for NixOS"},async(e,t)=>{let n=`
            {srcStr, pkgs ? import <nixpkgs> {}}:
                pkgs.stdenv.mkDerivation {
                    name = "rust-analyzer";
                    src = /. + srcStr;
                    phases = [ "installPhase" "fixupPhase" ];
                    installPhase = "cp $src $out";
                    fixupPhase = ''
                    chmod 755 $out
                    patchelf --set-interpreter "$(cat $NIX_CC/nix-support/dynamic-linker)" $out
                    '';
                }
            `,i=he.Uri.file(r.fsPath+"-orig");await he.workspace.fs.rename(r,i,{overwrite:!0});try{e.report({message:"Patching executable",increment:20}),await new Promise((s,a)=>{var u,g;let l=(0,Ec.exec)(`nix-build -E - --argstr srcStr '${i.fsPath}' -o '${r.fsPath}'`,(v,b,C)=>{v!=null?a(Error(C)):s(b)});(u=l.stdin)==null||u.write(n),(g=l.stdin)==null||g.end()})}finally{await he.workspace.fs.delete(i)}})}async function M0(r,e){let t=fC(r);if(t)return t.startsWith("~/")?cC.homedir()+t.slice("~".length):t;if(r.package.releaseTag===null)return"rust-analyzer";let i={"ia32 win32":"x86_64-pc-windows-msvc","x64 win32":"x86_64-pc-windows-msvc","x64 linux":"x86_64-unknown-linux-gnu","x64 darwin":"x86_64-apple-darwin","arm64 win32":"aarch64-pc-windows-msvc","arm64 linux":"aarch64-unknown-linux-gnu","arm64 darwin":"aarch64-apple-darwin"}[`${process.arch} ${process.platform}`];if(i===void 0){await he.window.showErrorMessage("Unfortunately we don't ship binaries for your platform yet. You need to manually clone rust-analyzer repository and run `cargo xtask install --server` to build the language server from sources. If you feel that your platform should be supported, please create an issue about that [here](https://github.com/rust-analyzer/rust-analyzer/issues) and we will consider it.");return}i==="x86_64-unknown-linux-gnu"&&$0()&&(i="x86_64-unknown-linux-musl");let s=i.indexOf("-windows-")!==-1?".exe":"",a=he.Uri.joinPath(r.globalStorageUri,`rust-analyzer-${i}${s}`);if(await he.workspace.fs.stat(a).then(()=>!0,()=>!1)||await e.updateServerVersion(void 0),e.serverVersion===r.package.version||r.askBeforeDownload&&await he.window.showInformationMessage(`Language server version ${r.package.version} for rust-analyzer is not installed.`,"Download now")!=="Download now")return a.fsPath;let u=r.package.releaseTag,g=await xc(e,async()=>await pd(u,e.githubToken,r.proxySettings)),v=g.assets.find(b=>b.name===`rust-analyzer-${i}.gz`);return cn(!!v,`Bad release: ${JSON.stringify(g)}`),await xc(e,async()=>{await gd({url:v.browser_download_url,dest:a,progressTitle:"Downloading rust-analyzer server",gunzip:!0,mode:493,proxySettings:r.proxySettings})}),await j0()&&await N0(a),await e.updateServerVersion(r.package.version),a.fsPath}function fC(r){return process.env.__RA_LSP_SERVER_DEBUG??r.serverPath}async function j0(){try{return(await he.workspace.fs.readFile(he.Uri.file("/etc/os-release"))).toString().indexOf("ID=nixos")!==-1}catch{return!1}}function $0(){let r=(0,Ec.spawnSync)("ldd",["--version"]);return r.stderr!=null&&r.stderr.indexOf("musl libc")>=0}async function xc(r,e){for(;;)try{return await e()}catch(t){let n=await he.window.showErrorMessage("Failed to download: "+t.message,{},{title:"Update Github Auth Token",updateToken:!0},{title:"Retry download",retry:!0},{title:"Dismiss"});if(n==null?void 0:n.updateToken){await hC(r);continue}else if(n==null?void 0:n.retry)continue;throw t}}async function hC(r){let e={value:r.githubToken,password:!0,prompt:`
            This dialog allows to store a Github authorization token.
            The usage of an authorization token will increase the rate
            limit on the use of Github APIs and can thereby prevent getting
            throttled.
            Auth tokens can be created at https://github.com/settings/tokens`},t=await he.window.showInputBox(e);t!==void 0&&(t===""?(ae.info("Clearing github token"),await r.updateGithubToken(void 0)):(ae.info("Storing new github token"),await r.updateGithubToken(t)))}function W0(){let e=[["rust-analyzer","matklad.rust-analyzer"],["Rust","rust-lang.rust"],["Rust","kalitaalexey.vscode-rust"]].filter(t=>he.extensions.getExtension(t[1])!==void 0);if(e.length>1){let t=e[0],n=e[1];he.window.showWarningMessage(`You have both the ${t[0]} (${t[1]}) and ${n[0]} (${n[1]}) plugins enabled. These are known to conflict and cause various functions of both plugins to not work correctly. You should disable one of them.`,"Got it").then(()=>{},console.error)}}function H0(){let r=he.IndentAction.None;return he.languages.setLanguageConfiguration("rust",{onEnterRules:[{beforeText:/^\s*\/{3}.*$/,action:{indentAction:r,appendText:"/// "}},{beforeText:/^\s*\/{2}\!.*$/,action:{indentAction:r,appendText:"//! "}},{beforeText:/^\s*\/\*(\*|\!)(?!\/)([^\*]|\*(?!\/))*$/,afterText:/^\s*\*\/$/,action:{indentAction:he.IndentAction.IndentOutdent,appendText:" * "}},{beforeText:/^\s*\/\*(\*|\!)(?!\/)([^\*]|\*(?!\/))*$/,action:{indentAction:r,appendText:" * "}},{beforeText:/^(\ \ )*\ \*(\ ([^\*]|\*(?!\/))*)?$/,action:{indentAction:r,appendText:"* "}},{beforeText:/^(\ \ )*\ \*\/\s*$/,action:{indentAction:r,removeText:1}}]})}0&&(module.exports={activate,deactivate});
/*! fetch-blob. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> */
/*! formdata-polyfill. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> */
